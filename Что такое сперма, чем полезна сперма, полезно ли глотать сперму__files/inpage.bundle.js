!function(e){function t(r){if(i[r])return i[r].exports;var n=i[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var i={};t.m=e,t.c=i,t.d=function(e,i,r){t.o(e,i)||Object.defineProperty(e,i,{enumerable:!0,get:r})},t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,i){if(1&i&&(e=t(e)),8&i)return e;if(4&i&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&i&&"string"!=typeof e)for(var n in e)t.d(r,n,function(t){return e[t]}.bind(null,n));return r},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=39)}([function(e,t,i){"use strict";function r(e){const t=typeof e;return Boolean(e)&&("object"===t||"function"===t)}i.r(t),i.d(t,"isObject",(function(){return r}))},function(e,t,i){"use strict";function r(e){if(!e||!e.toString)return!1;const t=e.toString();return/\[native code\]/.test(t)||/\/\* source code not available \*\//.test(t)}i.r(t),i.d(t,"checkNativeCode",(function(){return r}))},function(e,t,i){"use strict";function r(e){return"string"===typeof e}i.r(t),i.d(t,"isString",(function(){return r}))},function(e,t,i){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var n="undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint16Array&&"undefined"!==typeof Int32Array;t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var i=t.shift();if(i){if("object"!==typeof i)throw new TypeError(i+"must be non-object");for(var n in i)r(i,n)&&(e[n]=i[n])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var o={arraySet:function(e,t,i,r,n){if(t.subarray&&e.subarray)e.set(t.subarray(i,i+r),n);else for(var o=0;o<r;o++)e[n+o]=t[i+o]},flattenChunks:function(e){var t,i,r,n,o,s;for(r=0,t=0,i=e.length;t<i;t++)r+=e[t].length;for(s=new Uint8Array(r),n=0,t=0,i=e.length;t<i;t++)o=e[t],s.set(o,n),n+=o.length;return s}},s={arraySet:function(e,t,i,r,n){for(var o=0;o<r;o++)e[n+o]=t[i+o]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,o)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,s))},t.setTyped(n)},function(e,t,i){(t=e.exports=i(6)(!1)).push([e.i,"/**\n * \u0414\u043b\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0430\u043d\u0438\u043c\u0430\u0446\u0438\u0438 \u043f\u0440\u0438\u043b\u0438\u043f\u0430\u043d\u0438\u044f \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 CSS\n */\n",""]),t.locals={STICKY_ANIMATION_DURATION_STYLE_VALUE:"400ms"}},function(e,t,i){(t=e.exports=i(6)(!1)).push([e.i,".cFvPZnQkT{position:static;margin:0;padding:0;font-family:Arial,sans-serif;font-size:12px;color:#fff;text-align:left;line-height:normal;background-color:transparent;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.cFvPZnQkT .kD35jnWs{position:absolute;top:10px;left:10px;background-color:rgba(51,51,51,.7);padding:6px!important;cursor:default;width:auto}.cFvPZnQkT.XAUkYA .kD35jnWs{font-size:12px}.cFvPZnQkT .EKK{position:absolute;top:10px;right:10px;padding:6px 27px 6px 8px;background:rgba(51,51,51,.7) url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='18px' height='17px'%3E %3Cdefs/%3E %3Cg%3E %3Cpath stroke='none' fill='%23FFFFFF' d='M0 14.85 L6.35 8.5 0 2.15 2.15 0 10.65 8.5 2.15 17 0 14.85'/%3E %3C/g%3E%3C/svg%3E\") no-repeat 100%;cursor:pointer}.cFvPZnQkT.XAUkYA .EKK{font-size:12px}.cFvPZnQkT .g3vEWEAT{background:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Ctitle%3Evolume-on%3C/title%3E%3Cdefs%3E%3ClinearGradient x1='50%25' y1='2.186%25' x2='50%25' y2='100%25' id='a'%3E%3Cstop stop-color='%235B5B5B' offset='0%25'/%3E%3Cstop stop-color='%23444' offset='100%25'/%3E%3C/linearGradient%3E%3C/defs%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill-rule='nonzero'%3E%3Ccircle cx='11' cy='11' r='11' fill='%23000' transform='translate(1 1)'/%3E%3Ccircle cx='11' cy='11' r='11' stroke='%23242424' fill='url(%23a)' transform='translate(1 1)'/%3E%3C/g%3E%3Cpath fill='%23FFF' fill-rule='nonzero' d='M8 9.5h5v5H8z'/%3E%3Cpath fill='%23FFF' fill-rule='nonzero' d='M8 12l5.5-5v10z'/%3E%3Cpath d='M15.208 13.5c.626-1.085.596-2.093 0-3' stroke='%23FFF' stroke-width='1.3' stroke-linecap='round'/%3E%3C/g%3E%3C/svg%3E\") 0 0 no-repeat}.cFvPZnQkT .g3vEWEAT,.cFvPZnQkT .ErxWJMML{position:absolute;top:2px;left:0;width:24px;height:25px;cursor:pointer}.cFvPZnQkT .ErxWJMML{background:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Ctitle%3Evolume-off%3C/title%3E%3Cdefs%3E%3ClinearGradient x1='50%25' y1='2.186%25' x2='50%25' y2='100%25' id='a'%3E%3Cstop stop-color='%235B5B5B' offset='0%25'/%3E%3Cstop stop-color='%23444' offset='100%25'/%3E%3C/linearGradient%3E%3C/defs%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill-rule='nonzero'%3E%3Ccircle cx='11' cy='11' r='11' fill='%23000' transform='translate(1 1)'/%3E%3Ccircle cx='11' cy='11' r='11' stroke='%23242424' fill='url(%23a)' transform='translate(1 1)'/%3E%3C/g%3E%3Cpath fill='%23000' fill-rule='nonzero' d='M8 9.5h5v5H8z'/%3E%3Cpath fill='%23000' fill-rule='nonzero' d='M8 12l5.5-5v10z'/%3E%3Cpath d='M15.25 10.25l3.5 3.5m0-3.5l-3.5 3.5' stroke='%23000' stroke-width='1.5' stroke-linecap='round'/%3E%3C/g%3E%3C/svg%3E\") 0 0 no-repeat}.cFvPZnQkT.XAUkYA .g3vEWEAT,.cFvPZnQkT.XAUkYA .ErxWJMML{background-size:100% 100%;width:30px;height:30px;top:-1px;left:55px;max-width:none}.cFvPZnQkT .jqd{position:absolute;top:50%;margin-top:-65px;left:50%;margin-left:-65px;width:130px;height:130px;cursor:pointer;background:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='130' height='130' viewBox='0 0 130 130' xmlns='http://www.w3.org/2000/svg'%3E%3Ctitle%3EGroup 3%3C/title%3E%3Cg fill='none' fill-rule='evenodd' opacity='.7'%3E%3Ccircle fill='%23000' cx='65' cy='65' r='65'/%3E%3Ccircle stroke='%23B2B2B2' stroke-width='12' cx='65' cy='65' r='52'/%3E%3Cpath fill='%23D8D8D8' d='M90.188 65L50 88V42z'/%3E%3C/g%3E%3C/svg%3E\") 0 0 no-repeat}.cFvPZnQkT .fIvBWfY30U{display:block}.cFvPZnQkT .r0H3w{position:absolute;top:10px;margin:0 150px 0 100px;background-color:rgba(51,51,51,.7);font-size:12px;cursor:default;padding:6px 8px}.cFvPZnQkT.Smgd .r0H3w{display:none}.cFvPZnQkT .n9b7ks{position:absolute;top:10px;right:10px;width:135px}.cFvPZnQkT.XAUkYA .n9b7ks{width:190px}.cFvPZnQkT .zPCtdHTTkk{position:absolute;top:10px;right:10px;width:85px}.cFvPZnQkT.XAUkYA .zPCtdHTTkk{position:absolute;top:auto;bottom:40px;right:10px;width:85px}.cFvPZnQkT .ZDl4hKc{position:absolute;width:100%;bottom:0;text-align:center}.cFvPZnQkT .U7g6cH{color:#fff;font-family:Arial,sans-serif;font-size:13px;opacity:.8;padding:5px 10px;background:rgba(0,0,0,.5);border-radius:2px;text-align:center;display:inline-block;cursor:pointer}.n9B23xe2Z{cursor:pointer}.VEpiL{position:static;z-index:1;padding:0;margin:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.PuX{position:absolute;width:100%;height:100%;top:0}",""]),t.locals={yaAdSdkGui:"cFvPZnQkT",timeLeft:"kD35jnWs",yaAdSdkGui_mobile:"XAUkYA",skip:"EKK",mute:"g3vEWEAT",unMute:"ErxWJMML",play:"jqd",pause:"fIvBWfY30U",title:"r0H3w",yaAdSdkGui_small:"Smgd",topRightBlock:"n9b7ks",topRightBlockMinimal:"zPCtdHTTkk",visitSiteWrapper:"ZDl4hKc",visitSite:"U7g6cH",pointer:"n9B23xe2Z",yaAdSdk_iosVideoCurtain_wrapper:"VEpiL",yaAdSdk_iosVideoCurtain:"PuX"}},function(e,t,i){"use strict";function r(e,t){var i,r=e[1]||"",n=e[3];if(!n)return r;if(t&&"function"===typeof btoa){var o=(i=n,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),s=n.sources.map((function(e){return"/*# sourceURL="+n.sourceRoot+e+" */"}));return[r].concat(s).concat([o]).join("\n")}return[r].join("\n")}e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i=r(t,e);return t[2]?"@media "+t[2]+"{"+i+"}":i})).join("")},t.i=function(e,i){"string"===typeof e&&(e=[[null,e,""]]);for(var r={},n=0;n<this.length;n++){var o=this[n][0];null!=o&&(r[o]=!0)}for(n=0;n<e.length;n++){var s=e[n];null!=s[0]&&r[s[0]]||(i&&!s[2]?s[2]=i:i&&(s[2]="("+s[2]+") and ("+i+")"),t.push(s))}},t}},function(e,t,i){(t=e.exports=i(6)(!1)).i(i(4),""),t.push([e.i,".SCBZnq{display:flex;justify-content:center;align-items:center;overflow:hidden;flex-grow:1;flex-shrink:1}.JsN,.rULHIBc{transition-duration:"+i(4).locals.STICKY_ANIMATION_DURATION_STYLE_VALUE+";transition-property:background,box-shadow,width,height,left,top,bottom}.rULHIBc{transition-delay:"+i(4).locals.STICKY_ANIMATION_DURATION_STYLE_VALUE+","+i(4).locals.STICKY_ANIMATION_DURATION_STYLE_VALUE+",0ms,0ms,0ms,0ms,0ms}.xIJsQgVP{transition-duration:0ms}.OSlb9A{padding-top:0}.aHnKO5oH6{padding-top:32px;background:#ecf4f9;box-shadow:0 12px 12px rgba(25,58,75,.1),0 4px 4px rgba(25,58,75,.05),0 0 4px rgba(25,58,75,.05);border-radius:4px}.dtI{width:100%;max-width:100%;min-width:0;height:100%;flex-shrink:0;transition-duration:"+i(4).locals.STICKY_ANIMATION_DURATION_STYLE_VALUE+";transition-property:width,height}.Kp3Uk{width:100%;display:flex;flex-direction:row;align-items:stretch}.W49Z7It4{flex-grow:1;flex-shrink:1;display:flex;align-items:stretch}.nqH0F{width:100%;min-width:0}.KNIJ9k{opacity:0;min-width:0;max-width:44vh;font-family:Helvetica,Arial,sans-serif;transition:opacity "+i(4).locals.STICKY_ANIMATION_DURATION_STYLE_VALUE+"}.rAvk{display:none}.JsN .rAvk{margin:0 3.5vh 0 3vh}.cCuG86NpQ{font-style:normal;font-weight:700;font-size:12px;line-height:14px;display:flex;align-items:flex-end;letter-spacing:.05em;text-transform:uppercase;color:#afc5cf;position:absolute;left:13px;top:9px}.pkr,.uQWib6JL31{cursor:pointer}.uQWib6JL31{min-width:5em;margin-bottom:.7em;text-align:left;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:1.5em;line-height:1.2em;color:#000}.pkr{position:relative;display:inline-block;min-width:10em;text-align:center;box-sizing:border-box;padding:.6em 1.2em .7em;border-radius:.3em;font-size:1em;font-weight:300;color:#006aff;background:#e5f0ff}.pkr:hover{background:#d9e9ff}.I9nmx{position:absolute;top:-15px;left:-15px;padding:15px;width:100%;height:100%}.IYDInZUyov{position:absolute;right:0;top:0;width:12px;height:12px;padding:10px;box-sizing:content-box;cursor:pointer}.IYDInZUyov svg{vertical-align:top;width:12px;height:12px}.IYDInZUyov polygon{fill:#bebebe}.IYDInZUyov:hover polygon{fill:#a5a5a5}.WOCuP .uQWib6JL31{color:#fff}.WOCuP .pkr{color:#fff;background:#535c7a}.WOCuP .pkr:hover{background:#5d6682}.WOCuP .IYDInZUyov polygon{fill:#8fa3bf}.WOCuP .IYDInZUyov:hover polygon{fill:#a3b9d9}",""]),t.locals={STICKY_ANIMATION_DURATION_STYLE_VALUE:""+i(4).locals.STICKY_ANIMATION_DURATION_STYLE_VALUE,CROSS_SIZE:"12px",yaInPageStickyWrapper:"SCBZnq",yaInPageStickyWrapper__variant__covering:"JsN",yaInPageStickyWrapper__variant__flyroll:"rULHIBc",yaInPageStickyWrapper__unAnimated:"xIJsQgVP",yaInPageStickyWrapper__inline:"OSlb9A",yaInPageStickyWrapper__sticky__flyroll:"aHnKO5oH6",yaInPageWrapper:"dtI",yaInPageOpeningDiv:"Kp3Uk",yaInPagePlaceholderElement:"W49Z7It4",yaInPageVideo:"nqH0F",yaInpageAdditionalContentContainer:"KNIJ9k",yaInpageAdditionalContent:"rAvk",yaInpageAdditionalContent__adTitle:"cCuG86NpQ",yaInpageAdditionalContent__button:"pkr",yaInpageAdditionalContent__description:"uQWib6JL31",yaInpageAdditionalContent__buttonClickableArea:"I9nmx",yaInpageAdditionalContent__cross:"IYDInZUyov",yaInpageAdditionalContent_dark:"WOCuP"}},function(e,t,i){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(e,t,i){(t=e.exports=i(6)(!1)).push([e.i,".wTa1eQLDSM{position:absolute;top:0;right:0;bottom:0;left:0}.wTa1eQLDSM>iframe{position:absolute;top:0;left:0;width:100%;height:100%;margin:0;padding:0;border:0}",""]),t.locals={yaAdSdkVpaidContainer:"wTa1eQLDSM"}},function(e,t,i){(t=e.exports=i(6)(!1)).push([e.i,".vDLp{z-index:2;width:100%;height:100%;background:50% #000;background-size:cover;position:absolute;top:0;left:0}.vDLp .Xr0H{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.vDLp .CocaIy{text-align:center}.vDLp .cyI{border-radius:8px;border:none;background-color:#fc0;color:#332900;box-shadow:0 2px 2px 0 rgba(0,0,0,.1);font-size:21px;padding:9px 26px;margin-bottom:18px}.vDLp .cyI,.vDLp .RLF9VnK{font-family:Helvetica Neue,Helvetica,Arial,sans-serif;cursor:pointer;display:inline-block}.vDLp .RLF9VnK{background:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='18' height='20' viewBox='0 0 18 20' xmlns='http://www.w3.org/2000/svg'%3E %3Cdefs%3E %3Cfilter id='a' x='-2.7%25' y='-5.3%25' width='105.5%25' height='121.1%25'%3E %3CfeOffset dx='0' dy='2' in='SourceAlpha' result='shadowOffsetOuter1'/%3E %3CfeGaussianBlur in='shadowOffsetOuter1' result='shadowBlurOuter1' stdDeviation='1'/%3E %3CfeColorMatrix in='shadowBlurOuter1' result='shadowMatrixOuter1' values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0'/%3E %3CfeMerge%3E %3CfeMergeNode in='shadowMatrixOuter1'/%3E %3CfeMergeNode in='SourceGraphic'/%3E %3C/feMerge%3E %3C/filter%3E %3C/defs%3E %3Cg fill='none' fill-rule='evenodd'%3E %3Cg transform='translate(-375 -273)' fill='%23fff' fill-rule='nonzero'%3E %3Cg transform='translate(362 263)' filter='url(%23a)'%3E %3Cg transform='translate(15 7)'%3E %3Cpath d='m7 4.4325v-1.4325l-4.0367 2.3794 4.0133 2.4522 0.023333-1.481c2.8467 0 5.1567 2.4036 5.1567 5.3657-0.023333 2.9621-2.3333 5.3657-5.1567 5.3657-2.8467 0-5.1567-2.4036-5.1567-5.3657h-1.8433c0 4.0061 3.1267 7.2838 7 7.2838 3.85 0 7-3.2534 7-7.2838-0.023333-4.0061-3.15-7.2595-7-7.2838z'/%3E %3C/g%3E %3C/g%3E %3C/g%3E %3C/g%3E %3C/svg%3E\") 15px 10px no-repeat;border:1px solid hsla(0,0%,100%,.4);border-radius:8px;color:#fff;font-size:18px;padding:7px 15px 7px 36px;text-shadow:0 2px 2px rgba(0,0,0,.1)}",""]),t.locals={yaAdSdkEndScreen:"vDLp",buttonsContainer:"Xr0H",buttonsContainer__row:"CocaIy",row__goButton:"cyI",row__replayButton:"RLF9VnK"}},function(e,t){function i(e,t){var i=[],r=[];return null==t&&(t=function(e,t){return i[0]===t?"[Circular ~]":"[Circular ~."+r.slice(0,i.indexOf(t)).join(".")+"]"}),function(n,o){if(i.length>0){var s=i.indexOf(this);~s?i.splice(s+1):i.push(this),~s?r.splice(s,1/0,n):r.push(n),~i.indexOf(o)&&(o=t.call(this,n,o))}else i.push(o);return null==e?o:e.call(this,n,o)}}(e.exports=function(e,t,r,n){return JSON.stringify(e,i(t,n),r)}).getSerialize=i},function(e,t,i){"use strict";e.exports=function(e,t,i,r){for(var n=65535&e|0,o=e>>>16&65535|0,s=0;0!==i;){i-=s=i>2e3?2e3:i;do{o=o+(n=n+t[r++]|0)|0}while(--s);n%=65521,o%=65521}return n|o<<16|0}},function(e,t,i){"use strict";var r=function(){for(var e,t=[],i=0;i<256;i++){e=i;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[i]=e}return t}();e.exports=function(e,t,i,n){var o=r,s=n+i;e^=-1;for(var a=n;a<s;a++)e=e>>>8^o[255&(e^t[a])];return-1^e}},function(e,t,i){"use strict";function r(e,t){if(t<65534&&(e.subarray&&s||!e.subarray&&o))return String.fromCharCode.apply(null,n.shrinkBuf(e,t));for(var i="",r=0;r<t;r++)i+=String.fromCharCode(e[r]);return i}var n=i(3),o=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(l){o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(l){s=!1}for(var a=new n.Buf8(256),d=0;d<256;d++)a[d]=d>=252?6:d>=248?5:d>=240?4:d>=224?3:d>=192?2:1;a[254]=a[254]=1,t.string2buf=function(e){var t,i,r,o,s,a=e.length,d=0;for(o=0;o<a;o++)55296===(64512&(i=e.charCodeAt(o)))&&o+1<a&&56320===(64512&(r=e.charCodeAt(o+1)))&&(i=65536+(i-55296<<10)+(r-56320),o++),d+=i<128?1:i<2048?2:i<65536?3:4;for(t=new n.Buf8(d),s=0,o=0;s<d;o++)55296===(64512&(i=e.charCodeAt(o)))&&o+1<a&&56320===(64512&(r=e.charCodeAt(o+1)))&&(i=65536+(i-55296<<10)+(r-56320),o++),i<128?t[s++]=i:i<2048?(t[s++]=192|i>>>6,t[s++]=128|63&i):i<65536?(t[s++]=224|i>>>12,t[s++]=128|i>>>6&63,t[s++]=128|63&i):(t[s++]=240|i>>>18,t[s++]=128|i>>>12&63,t[s++]=128|i>>>6&63,t[s++]=128|63&i);return t},t.buf2binstring=function(e){return r(e,e.length)},t.binstring2buf=function(e){for(var t=new n.Buf8(e.length),i=0,r=t.length;i<r;i++)t[i]=e.charCodeAt(i);return t},t.buf2string=function(e,t){var i,n,o,s,d=t||e.length,l=new Array(2*d);for(n=0,i=0;i<d;)if((o=e[i++])<128)l[n++]=o;else if((s=a[o])>4)l[n++]=65533,i+=s-1;else{for(o&=2===s?31:3===s?15:7;s>1&&i<d;)o=o<<6|63&e[i++],s--;s>1?l[n++]=65533:o<65536?l[n++]=o:(o-=65536,l[n++]=55296|o>>10&1023,l[n++]=56320|1023&o)}return r(l,n)},t.utf8border=function(e,t){var i;for((t=t||e.length)>e.length&&(t=e.length),i=t-1;i>=0&&128===(192&e[i]);)i--;return i<0?t:0===i?t:i+a[e[i]]>t?i:t}},function(e,t,i){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(e,t,i){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(e,t,i){(t=e.exports=i(6)(!1)).push([e.i,"",""]),t.locals={STICKY_ANIMATION_DURATION_STYLE_VALUE:"400ms"}},function(e,t,i){e.exports=i(2).isString},function(e,t){e.exports=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){return e.__proto__=t,e}:function(e,t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i]);return e})},function(e,t){Array.prototype.find||(Array.prototype.find=function(e){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!==typeof e)throw new TypeError("predicate must be a function");for(var t,i=Object(this),r=i.length>>>0,n=arguments[1],o=0;o<r;o++)if(t=i[o],e.call(n,t,o,i))return t})},function(e,t,i){"use strict";var r={};(0,i(3).assign)(r,i(22),i(25),i(16)),e.exports=r},function(e,t,i){"use strict";function r(e){if(!(this instanceof r))return new r(e);this.options=s.assign({level:u,method:A,chunkSize:16384,windowBits:15,memLevel:8,strategy:p,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var i=o.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(i!==h)throw new Error(d[i]);if(t.header&&o.deflateSetHeader(this.strm,t.header),t.dictionary){var n;if(n="string"===typeof t.dictionary?a.string2buf(t.dictionary):"[object ArrayBuffer]"===c.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(i=o.deflateSetDictionary(this.strm,n))!==h)throw new Error(d[i]);this._dict_set=!0}}function n(e,t){var i=new r(t);if(i.push(e,!0),i.err)throw i.msg||d[i.err];return i.result}var o=i(23),s=i(3),a=i(14),d=i(8),l=i(15),c=Object.prototype.toString,h=0,u=-1,p=0,A=8;r.prototype.push=function(e,t){var i,r,n=this.strm,d=this.options.chunkSize;if(this.ended)return!1;r=t===~~t?t:!0===t?4:0,"string"===typeof e?n.input=a.string2buf(e):"[object ArrayBuffer]"===c.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;do{if(0===n.avail_out&&(n.output=new s.Buf8(d),n.next_out=0,n.avail_out=d),1!==(i=o.deflate(n,r))&&i!==h)return this.onEnd(i),this.ended=!0,!1;0!==n.avail_out&&(0!==n.avail_in||4!==r&&2!==r)||("string"===this.options.to?this.onData(a.buf2binstring(s.shrinkBuf(n.output,n.next_out))):this.onData(s.shrinkBuf(n.output,n.next_out)))}while((n.avail_in>0||0===n.avail_out)&&1!==i);return 4===r?(i=o.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===h):2!==r||(this.onEnd(h),n.avail_out=0,!0)},r.prototype.onData=function(e){this.chunks.push(e)},r.prototype.onEnd=function(e){e===h&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Deflate=r,t.deflate=n,t.deflateRaw=function(e,t){return(t=t||{}).raw=!0,n(e,t)},t.gzip=function(e,t){return(t=t||{}).gzip=!0,n(e,t)}},function(e,t,i){"use strict";function r(e,t){return e.msg=S[t],t}function n(e){return(e<<1)-(e>4?9:0)}function o(e){for(var t=e.length;--t>=0;)e[t]=0}function s(e){var t=e.state,i=t.pending;i>e.avail_out&&(i=e.avail_out),0!==i&&(w.arraySet(e.output,t.pending_buf,t.pending_out,i,e.next_out),e.next_out+=i,t.pending_out+=i,e.total_out+=i,e.avail_out-=i,t.pending-=i,0===t.pending&&(t.pending_out=0))}function a(e,t){b._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,s(e.strm)}function d(e,t){e.pending_buf[e.pending++]=t}function l(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function c(e,t){var i,r,n=e.max_chain_length,o=e.strstart,s=e.prev_length,a=e.nice_match,d=e.strstart>e.w_size-$?e.strstart-(e.w_size-$):0,l=e.window,c=e.w_mask,h=e.prev,u=e.strstart+J,p=l[o+s-1],A=l[o+s];e.prev_length>=e.good_match&&(n>>=2),a>e.lookahead&&(a=e.lookahead);do{if(l[(i=t)+s]===A&&l[i+s-1]===p&&l[i]===l[o]&&l[++i]===l[o+1]){o+=2,i++;do{}while(l[++o]===l[++i]&&l[++o]===l[++i]&&l[++o]===l[++i]&&l[++o]===l[++i]&&l[++o]===l[++i]&&l[++o]===l[++i]&&l[++o]===l[++i]&&l[++o]===l[++i]&&o<u);if(r=J-(u-o),o=u-J,r>s){if(e.match_start=t,s=r,r>=a)break;p=l[o+s-1],A=l[o+s]}}}while((t=h[t&c])>d&&0!==--n);return s<=e.lookahead?s:e.lookahead}function h(e){var t,i,r,n,o,s,a,d,l,c,h=e.w_size;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=h+(h-$)){w.arraySet(e.window,e.window,h,h,0),e.match_start-=h,e.strstart-=h,e.block_start-=h,t=i=e.hash_size;do{r=e.head[--t],e.head[t]=r>=h?r-h:0}while(--i);t=i=h;do{r=e.prev[--t],e.prev[t]=r>=h?r-h:0}while(--i);n+=h}if(0===e.strm.avail_in)break;if(s=e.strm,a=e.window,d=e.strstart+e.lookahead,l=n,c=void 0,(c=s.avail_in)>l&&(c=l),i=0===c?0:(s.avail_in-=c,w.arraySet(a,s.input,s.next_in,c,d),1===s.state.wrap?s.adler=E(s.adler,a,c,d):2===s.state.wrap&&(s.adler=_(s.adler,a,c,d)),s.next_in+=c,s.total_in+=c,c),e.lookahead+=i,e.lookahead+e.insert>=Z)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+Z-1])&e.hash_mask,e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<Z)););}while(e.lookahead<$&&0!==e.strm.avail_in)}function u(e,t){for(var i,r;;){if(e.lookahead<$){if(h(e),e.lookahead<$&&t===T)return de;if(0===e.lookahead)break}if(i=0,e.lookahead>=Z&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+Z-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==i&&e.strstart-i<=e.w_size-$&&(e.match_length=c(e,i)),e.match_length>=Z)if(r=b._tr_tally(e,e.strstart-e.match_start,e.match_length-Z),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=Z){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+Z-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!==--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=b._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(a(e,!1),0===e.strm.avail_out))return de}return e.insert=e.strstart<Z-1?e.strstart:Z-1,t===P?(a(e,!0),0===e.strm.avail_out?ce:he):e.last_lit&&(a(e,!1),0===e.strm.avail_out)?de:le}function p(e,t){for(var i,r,n;;){if(e.lookahead<$){if(h(e),e.lookahead<$&&t===T)return de;if(0===e.lookahead)break}if(i=0,e.lookahead>=Z&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+Z-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=Z-1,0!==i&&e.prev_length<e.max_lazy_match&&e.strstart-i<=e.w_size-$&&(e.match_length=c(e,i),e.match_length<=5&&(e.strategy===L||e.match_length===Z&&e.strstart-e.match_start>4096)&&(e.match_length=Z-1)),e.prev_length>=Z&&e.match_length<=e.prev_length){n=e.strstart+e.lookahead-Z,r=b._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-Z),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=n&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+Z-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!==--e.prev_length);if(e.match_available=0,e.match_length=Z-1,e.strstart++,r&&(a(e,!1),0===e.strm.avail_out))return de}else if(e.match_available){if((r=b._tr_tally(e,0,e.window[e.strstart-1]))&&a(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return de}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=b._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<Z-1?e.strstart:Z-1,t===P?(a(e,!0),0===e.strm.avail_out?ce:he):e.last_lit&&(a(e,!1),0===e.strm.avail_out)?de:le}function A(e,t,i,r,n){this.good_length=e,this.max_lazy=t,this.nice_length=i,this.max_chain=r,this.func=n}function f(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=j,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new w.Buf16(2*K),this.dyn_dtree=new w.Buf16(2*(2*q+1)),this.bl_tree=new w.Buf16(2*(2*X+1)),o(this.dyn_ltree),o(this.dyn_dtree),o(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new w.Buf16(Q+1),this.heap=new w.Buf16(2*G+1),o(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new w.Buf16(2*G+1),o(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function m(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=H,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?te:se,e.adler=2===t.wrap?0:1,t.last_flush=T,b._tr_init(t),I):r(e,N)}function g(e){var t,i=m(e);return i===I&&((t=e.state).window_size=2*t.w_size,o(t.head),t.max_lazy_match=y[t.level].max_lazy,t.good_match=y[t.level].good_length,t.nice_match=y[t.level].nice_length,t.max_chain_length=y[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=Z-1,t.match_available=0,t.ins_h=0),i}function v(e,t,i,n,o,s){if(!e)return N;var a=1;if(t===x&&(t=6),n<0?(a=0,n=-n):n>15&&(a=2,n-=16),o<1||o>z||i!==j||n<8||n>15||t<0||t>9||s<0||s>F)return r(e,N);8===n&&(n=9);var d=new f;return e.state=d,d.strm=e,d.wrap=a,d.gzhead=null,d.w_bits=n,d.w_size=1<<d.w_bits,d.w_mask=d.w_size-1,d.hash_bits=o+7,d.hash_size=1<<d.hash_bits,d.hash_mask=d.hash_size-1,d.hash_shift=~~((d.hash_bits+Z-1)/Z),d.window=new w.Buf8(2*d.w_size),d.head=new w.Buf16(d.hash_size),d.prev=new w.Buf16(d.w_size),d.lit_bufsize=1<<o+6,d.pending_buf_size=4*d.lit_bufsize,d.pending_buf=new w.Buf8(d.pending_buf_size),d.d_buf=1*d.lit_bufsize,d.l_buf=3*d.lit_bufsize,d.level=t,d.strategy=s,d.method=i,g(e)}var y,w=i(3),b=i(24),E=i(12),_=i(13),S=i(8),T=0,C=1,k=3,P=4,O=5,I=0,R=1,N=-2,D=-3,V=-5,x=-1,L=1,M=2,B=3,F=4,U=0,H=2,j=8,z=9,W=15,Y=8,G=286,q=30,X=19,K=2*G+1,Q=15,Z=3,J=258,$=J+Z+1,ee=32,te=42,ie=69,re=73,ne=91,oe=103,se=113,ae=666,de=1,le=2,ce=3,he=4,ue=3;y=[new A(0,0,0,0,(function(e,t){var i=65535;for(i>e.pending_buf_size-5&&(i=e.pending_buf_size-5);;){if(e.lookahead<=1){if(h(e),0===e.lookahead&&t===T)return de;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+i;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,a(e,!1),0===e.strm.avail_out))return de;if(e.strstart-e.block_start>=e.w_size-$&&(a(e,!1),0===e.strm.avail_out))return de}return e.insert=0,t===P?(a(e,!0),0===e.strm.avail_out?ce:he):(e.strstart>e.block_start&&(a(e,!1),e.strm.avail_out),de)})),new A(4,4,8,4,u),new A(4,5,16,8,u),new A(4,6,32,32,u),new A(4,4,16,16,p),new A(8,16,32,32,p),new A(8,16,128,128,p),new A(8,32,128,256,p),new A(32,128,258,1024,p),new A(32,258,258,4096,p)],t.deflateInit=function(e,t){return v(e,t,j,W,Y,U)},t.deflateInit2=v,t.deflateReset=g,t.deflateResetKeep=m,t.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?N:(e.state.gzhead=t,I):N},t.deflate=function(e,t){var i,c,u,p;if(!e||!e.state||t>O||t<0)return e?r(e,N):N;if(c=e.state,!e.output||!e.input&&0!==e.avail_in||c.status===ae&&t!==P)return r(e,0===e.avail_out?V:N);if(c.strm=e,i=c.last_flush,c.last_flush=t,c.status===te)if(2===c.wrap)e.adler=0,d(c,31),d(c,139),d(c,8),c.gzhead?(d(c,(c.gzhead.text?1:0)+(c.gzhead.hcrc?2:0)+(c.gzhead.extra?4:0)+(c.gzhead.name?8:0)+(c.gzhead.comment?16:0)),d(c,255&c.gzhead.time),d(c,c.gzhead.time>>8&255),d(c,c.gzhead.time>>16&255),d(c,c.gzhead.time>>24&255),d(c,9===c.level?2:c.strategy>=M||c.level<2?4:0),d(c,255&c.gzhead.os),c.gzhead.extra&&c.gzhead.extra.length&&(d(c,255&c.gzhead.extra.length),d(c,c.gzhead.extra.length>>8&255)),c.gzhead.hcrc&&(e.adler=_(e.adler,c.pending_buf,c.pending,0)),c.gzindex=0,c.status=ie):(d(c,0),d(c,0),d(c,0),d(c,0),d(c,0),d(c,9===c.level?2:c.strategy>=M||c.level<2?4:0),d(c,ue),c.status=se);else{var A=j+(c.w_bits-8<<4)<<8;A|=(c.strategy>=M||c.level<2?0:c.level<6?1:6===c.level?2:3)<<6,0!==c.strstart&&(A|=ee),A+=31-A%31,c.status=se,l(c,A),0!==c.strstart&&(l(c,e.adler>>>16),l(c,65535&e.adler)),e.adler=1}if(c.status===ie)if(c.gzhead.extra){for(u=c.pending;c.gzindex<(65535&c.gzhead.extra.length)&&(c.pending!==c.pending_buf_size||(c.gzhead.hcrc&&c.pending>u&&(e.adler=_(e.adler,c.pending_buf,c.pending-u,u)),s(e),u=c.pending,c.pending!==c.pending_buf_size));)d(c,255&c.gzhead.extra[c.gzindex]),c.gzindex++;c.gzhead.hcrc&&c.pending>u&&(e.adler=_(e.adler,c.pending_buf,c.pending-u,u)),c.gzindex===c.gzhead.extra.length&&(c.gzindex=0,c.status=re)}else c.status=re;if(c.status===re)if(c.gzhead.name){u=c.pending;do{if(c.pending===c.pending_buf_size&&(c.gzhead.hcrc&&c.pending>u&&(e.adler=_(e.adler,c.pending_buf,c.pending-u,u)),s(e),u=c.pending,c.pending===c.pending_buf_size)){p=1;break}p=c.gzindex<c.gzhead.name.length?255&c.gzhead.name.charCodeAt(c.gzindex++):0,d(c,p)}while(0!==p);c.gzhead.hcrc&&c.pending>u&&(e.adler=_(e.adler,c.pending_buf,c.pending-u,u)),0===p&&(c.gzindex=0,c.status=ne)}else c.status=ne;if(c.status===ne)if(c.gzhead.comment){u=c.pending;do{if(c.pending===c.pending_buf_size&&(c.gzhead.hcrc&&c.pending>u&&(e.adler=_(e.adler,c.pending_buf,c.pending-u,u)),s(e),u=c.pending,c.pending===c.pending_buf_size)){p=1;break}p=c.gzindex<c.gzhead.comment.length?255&c.gzhead.comment.charCodeAt(c.gzindex++):0,d(c,p)}while(0!==p);c.gzhead.hcrc&&c.pending>u&&(e.adler=_(e.adler,c.pending_buf,c.pending-u,u)),0===p&&(c.status=oe)}else c.status=oe;if(c.status===oe&&(c.gzhead.hcrc?(c.pending+2>c.pending_buf_size&&s(e),c.pending+2<=c.pending_buf_size&&(d(c,255&e.adler),d(c,e.adler>>8&255),e.adler=0,c.status=se)):c.status=se),0!==c.pending){if(s(e),0===e.avail_out)return c.last_flush=-1,I}else if(0===e.avail_in&&n(t)<=n(i)&&t!==P)return r(e,V);if(c.status===ae&&0!==e.avail_in)return r(e,V);if(0!==e.avail_in||0!==c.lookahead||t!==T&&c.status!==ae){var f=c.strategy===M?function(e,t){for(var i;;){if(0===e.lookahead&&(h(e),0===e.lookahead)){if(t===T)return de;break}if(e.match_length=0,i=b._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,i&&(a(e,!1),0===e.strm.avail_out))return de}return e.insert=0,t===P?(a(e,!0),0===e.strm.avail_out?ce:he):e.last_lit&&(a(e,!1),0===e.strm.avail_out)?de:le}(c,t):c.strategy===B?function(e,t){for(var i,r,n,o,s=e.window;;){if(e.lookahead<=J){if(h(e),e.lookahead<=J&&t===T)return de;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=Z&&e.strstart>0&&(r=s[n=e.strstart-1])===s[++n]&&r===s[++n]&&r===s[++n]){o=e.strstart+J;do{}while(r===s[++n]&&r===s[++n]&&r===s[++n]&&r===s[++n]&&r===s[++n]&&r===s[++n]&&r===s[++n]&&r===s[++n]&&n<o);e.match_length=J-(o-n),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=Z?(i=b._tr_tally(e,1,e.match_length-Z),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(i=b._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),i&&(a(e,!1),0===e.strm.avail_out))return de}return e.insert=0,t===P?(a(e,!0),0===e.strm.avail_out?ce:he):e.last_lit&&(a(e,!1),0===e.strm.avail_out)?de:le}(c,t):y[c.level].func(c,t);if(f!==ce&&f!==he||(c.status=ae),f===de||f===ce)return 0===e.avail_out&&(c.last_flush=-1),I;if(f===le&&(t===C?b._tr_align(c):t!==O&&(b._tr_stored_block(c,0,0,!1),t===k&&(o(c.head),0===c.lookahead&&(c.strstart=0,c.block_start=0,c.insert=0))),s(e),0===e.avail_out))return c.last_flush=-1,I}return t!==P?I:c.wrap<=0?R:(2===c.wrap?(d(c,255&e.adler),d(c,e.adler>>8&255),d(c,e.adler>>16&255),d(c,e.adler>>24&255),d(c,255&e.total_in),d(c,e.total_in>>8&255),d(c,e.total_in>>16&255),d(c,e.total_in>>24&255)):(l(c,e.adler>>>16),l(c,65535&e.adler)),s(e),c.wrap>0&&(c.wrap=-c.wrap),0!==c.pending?I:R)},t.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==te&&t!==ie&&t!==re&&t!==ne&&t!==oe&&t!==se&&t!==ae?r(e,N):(e.state=null,t===se?r(e,D):I):N},t.deflateSetDictionary=function(e,t){var i,r,n,s,a,d,l,c,u=t.length;if(!e||!e.state)return N;if(2===(s=(i=e.state).wrap)||1===s&&i.status!==te||i.lookahead)return N;for(1===s&&(e.adler=E(e.adler,t,u,0)),i.wrap=0,u>=i.w_size&&(0===s&&(o(i.head),i.strstart=0,i.block_start=0,i.insert=0),c=new w.Buf8(i.w_size),w.arraySet(c,t,u-i.w_size,i.w_size,0),t=c,u=i.w_size),a=e.avail_in,d=e.next_in,l=e.input,e.avail_in=u,e.next_in=0,e.input=t,h(i);i.lookahead>=Z;){r=i.strstart,n=i.lookahead-(Z-1);do{i.ins_h=(i.ins_h<<i.hash_shift^i.window[r+Z-1])&i.hash_mask,i.prev[r&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=r,r++}while(--n);i.strstart=r,i.lookahead=Z-1,h(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=Z-1,i.match_available=0,e.next_in=d,e.input=l,e.avail_in=a,i.wrap=s,I},t.deflateInfo="pako deflate (from Nodeca project)"},function(e,t,i){"use strict";function r(e){for(var t=e.length;--t>=0;)e[t]=0}function n(e,t,i,r,n){this.static_tree=e,this.extra_bits=t,this.extra_base=i,this.elems=r,this.max_length=n,this.has_stree=e&&e.length}function o(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function s(e){return e<256?X[e]:X[256+(e>>>7)]}function a(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function d(e,t,i){e.bi_valid>L-i?(e.bi_buf|=t<<e.bi_valid&65535,a(e,e.bi_buf),e.bi_buf=t>>L-e.bi_valid,e.bi_valid+=i-L):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=i)}function l(e,t,i){d(e,i[2*t],i[2*t+1])}function c(e,t){var i=0;do{i|=1&e,e>>>=1,i<<=1}while(--t>0);return i>>>1}function h(e,t,i){var r,n,o=new Array(x+1),s=0;for(r=1;r<=x;r++)o[r]=s=s+i[r-1]<<1;for(n=0;n<=t;n++){var a=e[2*n+1];0!==a&&(e[2*n]=c(o[a]++,a))}}function u(e){var t;for(t=0;t<R;t++)e.dyn_ltree[2*t]=0;for(t=0;t<N;t++)e.dyn_dtree[2*t]=0;for(t=0;t<D;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*B]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function p(e){e.bi_valid>8?a(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function A(e,t,i,r){var n=2*t,o=2*i;return e[n]<e[o]||e[n]===e[o]&&r[t]<=r[i]}function f(e,t,i){for(var r=e.heap[i],n=i<<1;n<=e.heap_len&&(n<e.heap_len&&A(t,e.heap[n+1],e.heap[n],e.depth)&&n++,!A(t,r,e.heap[n],e.depth));)e.heap[i]=e.heap[n],i=n,n<<=1;e.heap[i]=r}function m(e,t,i){var r,n,o,a,c=0;if(0!==e.last_lit)do{r=e.pending_buf[e.d_buf+2*c]<<8|e.pending_buf[e.d_buf+2*c+1],n=e.pending_buf[e.l_buf+c],c++,0===r?l(e,n,t):(l(e,(o=K[n])+I+1,t),0!==(a=j[o])&&d(e,n-=Q[o],a),l(e,o=s(--r),i),0!==(a=z[o])&&d(e,r-=ee[o],a))}while(c<e.last_lit);l(e,B,t)}function g(e,t){var i,r,n,o=t.dyn_tree,s=t.stat_desc.static_tree,a=t.stat_desc.has_stree,d=t.stat_desc.elems,l=-1;for(e.heap_len=0,e.heap_max=V,i=0;i<d;i++)0!==o[2*i]?(e.heap[++e.heap_len]=l=i,e.depth[i]=0):o[2*i+1]=0;for(;e.heap_len<2;)o[2*(n=e.heap[++e.heap_len]=l<2?++l:0)]=1,e.depth[n]=0,e.opt_len--,a&&(e.static_len-=s[2*n+1]);for(t.max_code=l,i=e.heap_len>>1;i>=1;i--)f(e,o,i);n=d;do{i=e.heap[1],e.heap[1]=e.heap[e.heap_len--],f(e,o,1),r=e.heap[1],e.heap[--e.heap_max]=i,e.heap[--e.heap_max]=r,o[2*n]=o[2*i]+o[2*r],e.depth[n]=(e.depth[i]>=e.depth[r]?e.depth[i]:e.depth[r])+1,o[2*i+1]=o[2*r+1]=n,e.heap[1]=n++,f(e,o,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var i,r,n,o,s,a,d=t.dyn_tree,l=t.max_code,c=t.stat_desc.static_tree,h=t.stat_desc.has_stree,u=t.stat_desc.extra_bits,p=t.stat_desc.extra_base,A=t.stat_desc.max_length,f=0;for(o=0;o<=x;o++)e.bl_count[o]=0;for(d[2*e.heap[e.heap_max]+1]=0,i=e.heap_max+1;i<V;i++)(o=d[2*d[2*(r=e.heap[i])+1]+1]+1)>A&&(o=A,f++),d[2*r+1]=o,r>l||(e.bl_count[o]++,s=0,r>=p&&(s=u[r-p]),a=d[2*r],e.opt_len+=a*(o+s),h&&(e.static_len+=a*(c[2*r+1]+s)));if(0!==f){do{for(o=A-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[A]--,f-=2}while(f>0);for(o=A;0!==o;o--)for(r=e.bl_count[o];0!==r;)(n=e.heap[--i])>l||(d[2*n+1]!==o&&(e.opt_len+=(o-d[2*n+1])*d[2*n],d[2*n+1]=o),r--)}}(e,t),h(o,l,e.bl_count)}function v(e,t,i){var r,n,o=-1,s=t[1],a=0,d=7,l=4;for(0===s&&(d=138,l=3),t[2*(i+1)+1]=65535,r=0;r<=i;r++)n=s,s=t[2*(r+1)+1],++a<d&&n===s||(a<l?e.bl_tree[2*n]+=a:0!==n?(n!==o&&e.bl_tree[2*n]++,e.bl_tree[2*F]++):a<=10?e.bl_tree[2*U]++:e.bl_tree[2*H]++,a=0,o=n,0===s?(d=138,l=3):n===s?(d=6,l=3):(d=7,l=4))}function y(e,t,i){var r,n,o=-1,s=t[1],a=0,c=7,h=4;for(0===s&&(c=138,h=3),r=0;r<=i;r++)if(n=s,s=t[2*(r+1)+1],!(++a<c&&n===s)){if(a<h)do{l(e,n,e.bl_tree)}while(0!==--a);else 0!==n?(n!==o&&(l(e,n,e.bl_tree),a--),l(e,F,e.bl_tree),d(e,a-3,2)):a<=10?(l(e,U,e.bl_tree),d(e,a-3,3)):(l(e,H,e.bl_tree),d(e,a-11,7));a=0,o=n,0===s?(c=138,h=3):n===s?(c=6,h=3):(c=7,h=4)}}function w(e,t,i,r){d(e,(C<<1)+(r?1:0),3),function(e,t,i,r){p(e),r&&(a(e,i),a(e,~i)),b.arraySet(e.pending_buf,e.window,t,i,e.pending),e.pending+=i}(e,t,i,!0)}var b=i(3),E=4,_=0,S=1,T=2,C=0,k=1,P=2,O=29,I=256,R=I+1+O,N=30,D=19,V=2*R+1,x=15,L=16,M=7,B=256,F=16,U=17,H=18,j=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],z=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],W=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Y=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],G=new Array(2*(R+2));r(G);var q=new Array(2*N);r(q);var X=new Array(512);r(X);var K=new Array(256);r(K);var Q=new Array(O);r(Q);var Z,J,$,ee=new Array(N);r(ee);var te=!1;t._tr_init=function(e){te||(!function(){var e,t,i,r,o,s=new Array(x+1);for(i=0,r=0;r<O-1;r++)for(Q[r]=i,e=0;e<1<<j[r];e++)K[i++]=r;for(K[i-1]=r,o=0,r=0;r<16;r++)for(ee[r]=o,e=0;e<1<<z[r];e++)X[o++]=r;for(o>>=7;r<N;r++)for(ee[r]=o<<7,e=0;e<1<<z[r]-7;e++)X[256+o++]=r;for(t=0;t<=x;t++)s[t]=0;for(e=0;e<=143;)G[2*e+1]=8,e++,s[8]++;for(;e<=255;)G[2*e+1]=9,e++,s[9]++;for(;e<=279;)G[2*e+1]=7,e++,s[7]++;for(;e<=287;)G[2*e+1]=8,e++,s[8]++;for(h(G,R+1,s),e=0;e<N;e++)q[2*e+1]=5,q[2*e]=c(e,5);Z=new n(G,j,I+1,R,x),J=new n(q,z,0,N,x),$=new n(new Array(0),W,0,D,M)}(),te=!0),e.l_desc=new o(e.dyn_ltree,Z),e.d_desc=new o(e.dyn_dtree,J),e.bl_desc=new o(e.bl_tree,$),e.bi_buf=0,e.bi_valid=0,u(e)},t._tr_stored_block=w,t._tr_flush_block=function(e,t,i,r){var n,o,s=0;e.level>0?(e.strm.data_type===T&&(e.strm.data_type=function(e){var t,i=4093624447;for(t=0;t<=31;t++,i>>>=1)if(1&i&&0!==e.dyn_ltree[2*t])return _;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return S;for(t=32;t<I;t++)if(0!==e.dyn_ltree[2*t])return S;return _}(e)),g(e,e.l_desc),g(e,e.d_desc),s=function(e){var t;for(v(e,e.dyn_ltree,e.l_desc.max_code),v(e,e.dyn_dtree,e.d_desc.max_code),g(e,e.bl_desc),t=D-1;t>=3&&0===e.bl_tree[2*Y[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),n=e.opt_len+3+7>>>3,(o=e.static_len+3+7>>>3)<=n&&(n=o)):n=o=i+5,i+4<=n&&-1!==t?w(e,t,i,r):e.strategy===E||o===n?(d(e,(k<<1)+(r?1:0),3),m(e,G,q)):(d(e,(P<<1)+(r?1:0),3),function(e,t,i,r){var n;for(d(e,t-257,5),d(e,i-1,5),d(e,r-4,4),n=0;n<r;n++)d(e,e.bl_tree[2*Y[n]+1],3);y(e,e.dyn_ltree,t-1),y(e,e.dyn_dtree,i-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),m(e,e.dyn_ltree,e.dyn_dtree)),u(e),r&&p(e)},t._tr_tally=function(e,t,i){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&i,e.last_lit++,0===t?e.dyn_ltree[2*i]++:(e.matches++,t--,e.dyn_ltree[2*(K[i]+I+1)]++,e.dyn_dtree[2*s(t)]++),e.last_lit===e.lit_bufsize-1},t._tr_align=function(e){d(e,k<<1,3),l(e,B,G),function(e){16===e.bi_valid?(a(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},function(e,t,i){"use strict";function r(e){if(!(this instanceof r))return new r(e);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0===(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var i=o.inflateInit2(this.strm,t.windowBits);if(i!==d.Z_OK)throw new Error(l[i]);if(this.header=new h,o.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"===typeof t.dictionary?t.dictionary=a.string2buf(t.dictionary):"[object ArrayBuffer]"===u.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(i=o.inflateSetDictionary(this.strm,t.dictionary))!==d.Z_OK))throw new Error(l[i])}function n(e,t){var i=new r(t);if(i.push(e,!0),i.err)throw i.msg||l[i.err];return i.result}var o=i(26),s=i(3),a=i(14),d=i(16),l=i(8),c=i(15),h=i(29),u=Object.prototype.toString;r.prototype.push=function(e,t){var i,r,n,l,c,h=this.strm,p=this.options.chunkSize,A=this.options.dictionary,f=!1;if(this.ended)return!1;r=t===~~t?t:!0===t?d.Z_FINISH:d.Z_NO_FLUSH,"string"===typeof e?h.input=a.binstring2buf(e):"[object ArrayBuffer]"===u.call(e)?h.input=new Uint8Array(e):h.input=e,h.next_in=0,h.avail_in=h.input.length;do{if(0===h.avail_out&&(h.output=new s.Buf8(p),h.next_out=0,h.avail_out=p),(i=o.inflate(h,d.Z_NO_FLUSH))===d.Z_NEED_DICT&&A&&(i=o.inflateSetDictionary(this.strm,A)),i===d.Z_BUF_ERROR&&!0===f&&(i=d.Z_OK,f=!1),i!==d.Z_STREAM_END&&i!==d.Z_OK)return this.onEnd(i),this.ended=!0,!1;h.next_out&&(0!==h.avail_out&&i!==d.Z_STREAM_END&&(0!==h.avail_in||r!==d.Z_FINISH&&r!==d.Z_SYNC_FLUSH)||("string"===this.options.to?(n=a.utf8border(h.output,h.next_out),l=h.next_out-n,c=a.buf2string(h.output,n),h.next_out=l,h.avail_out=p-l,l&&s.arraySet(h.output,h.output,n,l,0),this.onData(c)):this.onData(s.shrinkBuf(h.output,h.next_out)))),0===h.avail_in&&0===h.avail_out&&(f=!0)}while((h.avail_in>0||0===h.avail_out)&&i!==d.Z_STREAM_END);return i===d.Z_STREAM_END&&(r=d.Z_FINISH),r===d.Z_FINISH?(i=o.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===d.Z_OK):r!==d.Z_SYNC_FLUSH||(this.onEnd(d.Z_OK),h.avail_out=0,!0)},r.prototype.onData=function(e){this.chunks.push(e)},r.prototype.onEnd=function(e){e===d.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Inflate=r,t.inflate=n,t.inflateRaw=function(e,t){return(t=t||{}).raw=!0,n(e,t)},t.ungzip=n},function(e,t,i){"use strict";function r(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function n(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new p.Buf16(320),this.work=new p.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function o(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=N,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new p.Buf32(ce),t.distcode=t.distdyn=new p.Buf32(he),t.sane=1,t.back=-1,S):k}function s(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,o(e)):k}function a(e,t){var i,r;return e&&e.state?(r=e.state,t<0?(i=0,t=-t):(i=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?k:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=i,r.wbits=t,s(e))):k}function d(e,t){var i,r;return e?(r=new n,e.state=r,r.window=null,(i=a(e,t))!==S&&(e.state=null),i):k}function l(e){if(pe){var t;for(h=new p.Buf32(512),u=new p.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(g(y,e.lens,0,288,h,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;g(w,e.lens,0,32,u,0,e.work,{bits:5}),pe=!1}e.lencode=h,e.lenbits=9,e.distcode=u,e.distbits=5}function c(e,t,i,r){var n,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new p.Buf8(o.wsize)),r>=o.wsize?(p.arraySet(o.window,t,i-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):((n=o.wsize-o.wnext)>r&&(n=r),p.arraySet(o.window,t,i-r,n,o.wnext),(r-=n)?(p.arraySet(o.window,t,i-r,r,0),o.wnext=r,o.whave=o.wsize):(o.wnext+=n,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=n))),0}var h,u,p=i(3),A=i(12),f=i(13),m=i(27),g=i(28),v=0,y=1,w=2,b=4,E=5,_=6,S=0,T=1,C=2,k=-2,P=-3,O=-4,I=-5,R=8,N=1,D=2,V=3,x=4,L=5,M=6,B=7,F=8,U=9,H=10,j=11,z=12,W=13,Y=14,G=15,q=16,X=17,K=18,Q=19,Z=20,J=21,$=22,ee=23,te=24,ie=25,re=26,ne=27,oe=28,se=29,ae=30,de=31,le=32,ce=852,he=592,ue=15,pe=!0;t.inflateReset=s,t.inflateReset2=a,t.inflateResetKeep=o,t.inflateInit=function(e){return d(e,ue)},t.inflateInit2=d,t.inflate=function(e,t){var i,n,o,s,a,d,h,u,ce,he,ue,pe,Ae,fe,me,ge,ve,ye,we,be,Ee,_e,Se,Te,Ce=0,ke=new p.Buf8(4),Pe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return k;(i=e.state).mode===z&&(i.mode=W),a=e.next_out,o=e.output,h=e.avail_out,s=e.next_in,n=e.input,d=e.avail_in,u=i.hold,ce=i.bits,he=d,ue=h,_e=S;e:for(;;)switch(i.mode){case N:if(0===i.wrap){i.mode=W;break}for(;ce<16;){if(0===d)break e;d--,u+=n[s++]<<ce,ce+=8}if(2&i.wrap&&35615===u){i.check=0,ke[0]=255&u,ke[1]=u>>>8&255,i.check=f(i.check,ke,2,0),u=0,ce=0,i.mode=D;break}if(i.flags=0,i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&u)<<8)+(u>>8))%31){e.msg="incorrect header check",i.mode=ae;break}if((15&u)!==R){e.msg="unknown compression method",i.mode=ae;break}if(ce-=4,Ee=8+(15&(u>>>=4)),0===i.wbits)i.wbits=Ee;else if(Ee>i.wbits){e.msg="invalid window size",i.mode=ae;break}i.dmax=1<<Ee,e.adler=i.check=1,i.mode=512&u?H:z,u=0,ce=0;break;case D:for(;ce<16;){if(0===d)break e;d--,u+=n[s++]<<ce,ce+=8}if(i.flags=u,(255&i.flags)!==R){e.msg="unknown compression method",i.mode=ae;break}if(57344&i.flags){e.msg="unknown header flags set",i.mode=ae;break}i.head&&(i.head.text=u>>8&1),512&i.flags&&(ke[0]=255&u,ke[1]=u>>>8&255,i.check=f(i.check,ke,2,0)),u=0,ce=0,i.mode=V;case V:for(;ce<32;){if(0===d)break e;d--,u+=n[s++]<<ce,ce+=8}i.head&&(i.head.time=u),512&i.flags&&(ke[0]=255&u,ke[1]=u>>>8&255,ke[2]=u>>>16&255,ke[3]=u>>>24&255,i.check=f(i.check,ke,4,0)),u=0,ce=0,i.mode=x;case x:for(;ce<16;){if(0===d)break e;d--,u+=n[s++]<<ce,ce+=8}i.head&&(i.head.xflags=255&u,i.head.os=u>>8),512&i.flags&&(ke[0]=255&u,ke[1]=u>>>8&255,i.check=f(i.check,ke,2,0)),u=0,ce=0,i.mode=L;case L:if(1024&i.flags){for(;ce<16;){if(0===d)break e;d--,u+=n[s++]<<ce,ce+=8}i.length=u,i.head&&(i.head.extra_len=u),512&i.flags&&(ke[0]=255&u,ke[1]=u>>>8&255,i.check=f(i.check,ke,2,0)),u=0,ce=0}else i.head&&(i.head.extra=null);i.mode=M;case M:if(1024&i.flags&&((pe=i.length)>d&&(pe=d),pe&&(i.head&&(Ee=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Array(i.head.extra_len)),p.arraySet(i.head.extra,n,s,pe,Ee)),512&i.flags&&(i.check=f(i.check,n,pe,s)),d-=pe,s+=pe,i.length-=pe),i.length))break e;i.length=0,i.mode=B;case B:if(2048&i.flags){if(0===d)break e;pe=0;do{Ee=n[s+pe++],i.head&&Ee&&i.length<65536&&(i.head.name+=String.fromCharCode(Ee))}while(Ee&&pe<d);if(512&i.flags&&(i.check=f(i.check,n,pe,s)),d-=pe,s+=pe,Ee)break e}else i.head&&(i.head.name=null);i.length=0,i.mode=F;case F:if(4096&i.flags){if(0===d)break e;pe=0;do{Ee=n[s+pe++],i.head&&Ee&&i.length<65536&&(i.head.comment+=String.fromCharCode(Ee))}while(Ee&&pe<d);if(512&i.flags&&(i.check=f(i.check,n,pe,s)),d-=pe,s+=pe,Ee)break e}else i.head&&(i.head.comment=null);i.mode=U;case U:if(512&i.flags){for(;ce<16;){if(0===d)break e;d--,u+=n[s++]<<ce,ce+=8}if(u!==(65535&i.check)){e.msg="header crc mismatch",i.mode=ae;break}u=0,ce=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),e.adler=i.check=0,i.mode=z;break;case H:for(;ce<32;){if(0===d)break e;d--,u+=n[s++]<<ce,ce+=8}e.adler=i.check=r(u),u=0,ce=0,i.mode=j;case j:if(0===i.havedict)return e.next_out=a,e.avail_out=h,e.next_in=s,e.avail_in=d,i.hold=u,i.bits=ce,C;e.adler=i.check=1,i.mode=z;case z:if(t===E||t===_)break e;case W:if(i.last){u>>>=7&ce,ce-=7&ce,i.mode=ne;break}for(;ce<3;){if(0===d)break e;d--,u+=n[s++]<<ce,ce+=8}switch(i.last=1&u,ce-=1,3&(u>>>=1)){case 0:i.mode=Y;break;case 1:if(l(i),i.mode=Z,t===_){u>>>=2,ce-=2;break e}break;case 2:i.mode=X;break;case 3:e.msg="invalid block type",i.mode=ae}u>>>=2,ce-=2;break;case Y:for(u>>>=7&ce,ce-=7&ce;ce<32;){if(0===d)break e;d--,u+=n[s++]<<ce,ce+=8}if((65535&u)!==(u>>>16^65535)){e.msg="invalid stored block lengths",i.mode=ae;break}if(i.length=65535&u,u=0,ce=0,i.mode=G,t===_)break e;case G:i.mode=q;case q:if(pe=i.length){if(pe>d&&(pe=d),pe>h&&(pe=h),0===pe)break e;p.arraySet(o,n,s,pe,a),d-=pe,s+=pe,h-=pe,a+=pe,i.length-=pe;break}i.mode=z;break;case X:for(;ce<14;){if(0===d)break e;d--,u+=n[s++]<<ce,ce+=8}if(i.nlen=257+(31&u),u>>>=5,ce-=5,i.ndist=1+(31&u),u>>>=5,ce-=5,i.ncode=4+(15&u),u>>>=4,ce-=4,i.nlen>286||i.ndist>30){e.msg="too many length or distance symbols",i.mode=ae;break}i.have=0,i.mode=K;case K:for(;i.have<i.ncode;){for(;ce<3;){if(0===d)break e;d--,u+=n[s++]<<ce,ce+=8}i.lens[Pe[i.have++]]=7&u,u>>>=3,ce-=3}for(;i.have<19;)i.lens[Pe[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,Se={bits:i.lenbits},_e=g(v,i.lens,0,19,i.lencode,0,i.work,Se),i.lenbits=Se.bits,_e){e.msg="invalid code lengths set",i.mode=ae;break}i.have=0,i.mode=Q;case Q:for(;i.have<i.nlen+i.ndist;){for(;ge=(Ce=i.lencode[u&(1<<i.lenbits)-1])>>>16&255,ve=65535&Ce,!((me=Ce>>>24)<=ce);){if(0===d)break e;d--,u+=n[s++]<<ce,ce+=8}if(ve<16)u>>>=me,ce-=me,i.lens[i.have++]=ve;else{if(16===ve){for(Te=me+2;ce<Te;){if(0===d)break e;d--,u+=n[s++]<<ce,ce+=8}if(u>>>=me,ce-=me,0===i.have){e.msg="invalid bit length repeat",i.mode=ae;break}Ee=i.lens[i.have-1],pe=3+(3&u),u>>>=2,ce-=2}else if(17===ve){for(Te=me+3;ce<Te;){if(0===d)break e;d--,u+=n[s++]<<ce,ce+=8}ce-=me,Ee=0,pe=3+(7&(u>>>=me)),u>>>=3,ce-=3}else{for(Te=me+7;ce<Te;){if(0===d)break e;d--,u+=n[s++]<<ce,ce+=8}ce-=me,Ee=0,pe=11+(127&(u>>>=me)),u>>>=7,ce-=7}if(i.have+pe>i.nlen+i.ndist){e.msg="invalid bit length repeat",i.mode=ae;break}for(;pe--;)i.lens[i.have++]=Ee}}if(i.mode===ae)break;if(0===i.lens[256]){e.msg="invalid code -- missing end-of-block",i.mode=ae;break}if(i.lenbits=9,Se={bits:i.lenbits},_e=g(y,i.lens,0,i.nlen,i.lencode,0,i.work,Se),i.lenbits=Se.bits,_e){e.msg="invalid literal/lengths set",i.mode=ae;break}if(i.distbits=6,i.distcode=i.distdyn,Se={bits:i.distbits},_e=g(w,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,Se),i.distbits=Se.bits,_e){e.msg="invalid distances set",i.mode=ae;break}if(i.mode=Z,t===_)break e;case Z:i.mode=J;case J:if(d>=6&&h>=258){e.next_out=a,e.avail_out=h,e.next_in=s,e.avail_in=d,i.hold=u,i.bits=ce,m(e,ue),a=e.next_out,o=e.output,h=e.avail_out,s=e.next_in,n=e.input,d=e.avail_in,u=i.hold,ce=i.bits,i.mode===z&&(i.back=-1);break}for(i.back=0;ge=(Ce=i.lencode[u&(1<<i.lenbits)-1])>>>16&255,ve=65535&Ce,!((me=Ce>>>24)<=ce);){if(0===d)break e;d--,u+=n[s++]<<ce,ce+=8}if(ge&&0===(240&ge)){for(ye=me,we=ge,be=ve;ge=(Ce=i.lencode[be+((u&(1<<ye+we)-1)>>ye)])>>>16&255,ve=65535&Ce,!(ye+(me=Ce>>>24)<=ce);){if(0===d)break e;d--,u+=n[s++]<<ce,ce+=8}u>>>=ye,ce-=ye,i.back+=ye}if(u>>>=me,ce-=me,i.back+=me,i.length=ve,0===ge){i.mode=re;break}if(32&ge){i.back=-1,i.mode=z;break}if(64&ge){e.msg="invalid literal/length code",i.mode=ae;break}i.extra=15&ge,i.mode=$;case $:if(i.extra){for(Te=i.extra;ce<Te;){if(0===d)break e;d--,u+=n[s++]<<ce,ce+=8}i.length+=u&(1<<i.extra)-1,u>>>=i.extra,ce-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=ee;case ee:for(;ge=(Ce=i.distcode[u&(1<<i.distbits)-1])>>>16&255,ve=65535&Ce,!((me=Ce>>>24)<=ce);){if(0===d)break e;d--,u+=n[s++]<<ce,ce+=8}if(0===(240&ge)){for(ye=me,we=ge,be=ve;ge=(Ce=i.distcode[be+((u&(1<<ye+we)-1)>>ye)])>>>16&255,ve=65535&Ce,!(ye+(me=Ce>>>24)<=ce);){if(0===d)break e;d--,u+=n[s++]<<ce,ce+=8}u>>>=ye,ce-=ye,i.back+=ye}if(u>>>=me,ce-=me,i.back+=me,64&ge){e.msg="invalid distance code",i.mode=ae;break}i.offset=ve,i.extra=15&ge,i.mode=te;case te:if(i.extra){for(Te=i.extra;ce<Te;){if(0===d)break e;d--,u+=n[s++]<<ce,ce+=8}i.offset+=u&(1<<i.extra)-1,u>>>=i.extra,ce-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){e.msg="invalid distance too far back",i.mode=ae;break}i.mode=ie;case ie:if(0===h)break e;if(pe=ue-h,i.offset>pe){if((pe=i.offset-pe)>i.whave&&i.sane){e.msg="invalid distance too far back",i.mode=ae;break}pe>i.wnext?(pe-=i.wnext,Ae=i.wsize-pe):Ae=i.wnext-pe,pe>i.length&&(pe=i.length),fe=i.window}else fe=o,Ae=a-i.offset,pe=i.length;pe>h&&(pe=h),h-=pe,i.length-=pe;do{o[a++]=fe[Ae++]}while(--pe);0===i.length&&(i.mode=J);break;case re:if(0===h)break e;o[a++]=i.length,h--,i.mode=J;break;case ne:if(i.wrap){for(;ce<32;){if(0===d)break e;d--,u|=n[s++]<<ce,ce+=8}if(ue-=h,e.total_out+=ue,i.total+=ue,ue&&(e.adler=i.check=i.flags?f(i.check,o,ue,a-ue):A(i.check,o,ue,a-ue)),ue=h,(i.flags?u:r(u))!==i.check){e.msg="incorrect data check",i.mode=ae;break}u=0,ce=0}i.mode=oe;case oe:if(i.wrap&&i.flags){for(;ce<32;){if(0===d)break e;d--,u+=n[s++]<<ce,ce+=8}if(u!==(4294967295&i.total)){e.msg="incorrect length check",i.mode=ae;break}u=0,ce=0}i.mode=se;case se:_e=T;break e;case ae:_e=P;break e;case de:return O;case le:default:return k}return e.next_out=a,e.avail_out=h,e.next_in=s,e.avail_in=d,i.hold=u,i.bits=ce,(i.wsize||ue!==e.avail_out&&i.mode<ae&&(i.mode<ne||t!==b))&&c(e,e.output,e.next_out,ue-e.avail_out)?(i.mode=de,O):(he-=e.avail_in,ue-=e.avail_out,e.total_in+=he,e.total_out+=ue,i.total+=ue,i.wrap&&ue&&(e.adler=i.check=i.flags?f(i.check,o,ue,e.next_out-ue):A(i.check,o,ue,e.next_out-ue)),e.data_type=i.bits+(i.last?64:0)+(i.mode===z?128:0)+(i.mode===Z||i.mode===G?256:0),(0===he&&0===ue||t===b)&&_e===S&&(_e=I),_e)},t.inflateEnd=function(e){if(!e||!e.state)return k;var t=e.state;return t.window&&(t.window=null),e.state=null,S},t.inflateGetHeader=function(e,t){var i;return e&&e.state?0===(2&(i=e.state).wrap)?k:(i.head=t,t.done=!1,S):k},t.inflateSetDictionary=function(e,t){var i,r=t.length;return e&&e.state?0!==(i=e.state).wrap&&i.mode!==j?k:i.mode===j&&A(1,t,r,0)!==i.check?P:c(e,t,r,r)?(i.mode=de,O):(i.havedict=1,S):k},t.inflateInfo="pako inflate (from Nodeca project)"},function(e,t,i){"use strict";e.exports=function(e,t){var i,r,n,o,s,a,d,l,c,h,u,p,A,f,m,g,v,y,w,b,E,_,S,T,C;i=e.state,r=e.next_in,T=e.input,n=r+(e.avail_in-5),o=e.next_out,C=e.output,s=o-(t-e.avail_out),a=o+(e.avail_out-257),d=i.dmax,l=i.wsize,c=i.whave,h=i.wnext,u=i.window,p=i.hold,A=i.bits,f=i.lencode,m=i.distcode,g=(1<<i.lenbits)-1,v=(1<<i.distbits)-1;e:do{A<15&&(p+=T[r++]<<A,A+=8,p+=T[r++]<<A,A+=8),y=f[p&g];t:for(;;){if(p>>>=w=y>>>24,A-=w,0===(w=y>>>16&255))C[o++]=65535&y;else{if(!(16&w)){if(0===(64&w)){y=f[(65535&y)+(p&(1<<w)-1)];continue t}if(32&w){i.mode=12;break e}e.msg="invalid literal/length code",i.mode=30;break e}b=65535&y,(w&=15)&&(A<w&&(p+=T[r++]<<A,A+=8),b+=p&(1<<w)-1,p>>>=w,A-=w),A<15&&(p+=T[r++]<<A,A+=8,p+=T[r++]<<A,A+=8),y=m[p&v];i:for(;;){if(p>>>=w=y>>>24,A-=w,!(16&(w=y>>>16&255))){if(0===(64&w)){y=m[(65535&y)+(p&(1<<w)-1)];continue i}e.msg="invalid distance code",i.mode=30;break e}if(E=65535&y,A<(w&=15)&&(p+=T[r++]<<A,(A+=8)<w&&(p+=T[r++]<<A,A+=8)),(E+=p&(1<<w)-1)>d){e.msg="invalid distance too far back",i.mode=30;break e}if(p>>>=w,A-=w,E>(w=o-s)){if((w=E-w)>c&&i.sane){e.msg="invalid distance too far back",i.mode=30;break e}if(_=0,S=u,0===h){if(_+=l-w,w<b){b-=w;do{C[o++]=u[_++]}while(--w);_=o-E,S=C}}else if(h<w){if(_+=l+h-w,(w-=h)<b){b-=w;do{C[o++]=u[_++]}while(--w);if(_=0,h<b){b-=w=h;do{C[o++]=u[_++]}while(--w);_=o-E,S=C}}}else if(_+=h-w,w<b){b-=w;do{C[o++]=u[_++]}while(--w);_=o-E,S=C}for(;b>2;)C[o++]=S[_++],C[o++]=S[_++],C[o++]=S[_++],b-=3;b&&(C[o++]=S[_++],b>1&&(C[o++]=S[_++]))}else{_=o-E;do{C[o++]=C[_++],C[o++]=C[_++],C[o++]=C[_++],b-=3}while(b>2);b&&(C[o++]=C[_++],b>1&&(C[o++]=C[_++]))}break}}break}}while(r<n&&o<a);r-=b=A>>3,p&=(1<<(A-=b<<3))-1,e.next_in=r,e.next_out=o,e.avail_in=r<n?n-r+5:5-(r-n),e.avail_out=o<a?a-o+257:257-(o-a),i.hold=p,i.bits=A}},function(e,t,i){"use strict";var r=i(3),n=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,i,d,l,c,h,u){var p,A,f,m,g,v,y,w,b,E=u.bits,_=0,S=0,T=0,C=0,k=0,P=0,O=0,I=0,R=0,N=0,D=null,V=0,x=new r.Buf16(16),L=new r.Buf16(16),M=null,B=0;for(_=0;_<=15;_++)x[_]=0;for(S=0;S<d;S++)x[t[i+S]]++;for(k=E,C=15;C>=1&&0===x[C];C--);if(k>C&&(k=C),0===C)return l[c++]=20971520,l[c++]=20971520,u.bits=1,0;for(T=1;T<C&&0===x[T];T++);for(k<T&&(k=T),I=1,_=1;_<=15;_++)if(I<<=1,(I-=x[_])<0)return-1;if(I>0&&(0===e||1!==C))return-1;for(L[1]=0,_=1;_<15;_++)L[_+1]=L[_]+x[_];for(S=0;S<d;S++)0!==t[i+S]&&(h[L[t[i+S]]++]=S);if(0===e?(D=M=h,v=19):1===e?(D=n,V-=257,M=o,B-=257,v=256):(D=s,M=a,v=-1),N=0,S=0,_=T,g=c,P=k,O=0,f=-1,m=(R=1<<k)-1,1===e&&R>852||2===e&&R>592)return 1;for(;;){y=_-O,h[S]<v?(w=0,b=h[S]):h[S]>v?(w=M[B+h[S]],b=D[V+h[S]]):(w=96,b=0),p=1<<_-O,T=A=1<<P;do{l[g+(N>>O)+(A-=p)]=y<<24|w<<16|b|0}while(0!==A);for(p=1<<_-1;N&p;)p>>=1;if(0!==p?(N&=p-1,N+=p):N=0,S++,0===--x[_]){if(_===C)break;_=t[i+h[S]]}if(_>k&&(N&m)!==f){for(0===O&&(O=k),g+=T,I=1<<(P=_-O);P+O<C&&!((I-=x[P+O])<=0);)P++,I<<=1;if(R+=1<<P,1===e&&R>852||2===e&&R>592)return 1;l[f=N&m]=k<<24|P<<16|g-c|0}}return 0!==N&&(l[g+N]=_-O<<24|64<<16|0),u.bits=k,0}},function(e,t,i){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},function(e,t){e.exports=function(e){e||(e=window);var t=e.navigator.userAgent,i=t.indexOf("MSIE ");if(i>0)return parseInt(t.substring(i+5,t.indexOf(".",i)),10);if(t.indexOf("Trident/")>0){var r=t.indexOf("rv:");return parseInt(t.substring(r+3,t.indexOf(".",r)),10)}var n=t.indexOf("Edge/");return n>0&&parseInt(t.substring(n+5,t.indexOf(".",n)),10)}},function(e){e.exports={be:{adsdk:{AD_TITLE:"",LEARN_MORE:"",MORE:"",REPEAT:"",SECONDS:"",SKIP:"",SKIP_TIME_LEFT:"",TIME_LEFT:"",UNMUTE_INVITE:"",VISIT_SITE:""}},en:{adsdk:{AD_TITLE:"Ad",LEARN_MORE:"Learn more",MORE:"More",REPEAT:"Repeat",SECONDS:"sec",SKIP:"Skip",SKIP_TIME_LEFT:"Skip ad",TIME_LEFT:"Ad",UNMUTE_INVITE:"Move mouse over ad<br>to hear sound",VISIT_SITE:"Go to advertiser\u2019s site"}},kk:{adsdk:{AD_TITLE:"",LEARN_MORE:"",MORE:"",REPEAT:"",SECONDS:"",SKIP:"",SKIP_TIME_LEFT:"",TIME_LEFT:"",UNMUTE_INVITE:"",VISIT_SITE:""}},ru:{adsdk:{AD_TITLE:"\u0420\u0435\u043a\u043b\u0430\u043c\u0430",LEARN_MORE:"\u0423\u0437\u043d\u0430\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435",MORE:"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435",REPEAT:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c",SECONDS:"\u0441\u0435\u043a",SKIP:"\u041f\u0440\u043e\u043f\u0443\u0441\u0442\u0438\u0442\u044c",SKIP_TIME_LEFT:"\u041f\u0440\u043e\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u0440\u0435\u043a\u043b\u0430\u043c\u0443",TIME_LEFT:"\u0420\u0435\u043a\u043b\u0430\u043c\u0430",UNMUTE_INVITE:"\u041d\u0430\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u0443\u0440\u0441\u043e\u0440,<br>\u0447\u0442\u043e\u0431\u044b \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0437\u0432\u0443\u043a",VISIT_SITE:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043d\u0430 \u0441\u0430\u0439\u0442 \u0440\u0435\u043a\u043b\u0430\u043c\u043e\u0434\u0430\u0442\u0435\u043b\u044f"}},tr:{adsdk:{AD_TITLE:"Reklam",LEARN_MORE:"Daha fazla bilgi edinin",MORE:"Daha fazla",REPEAT:"Tekrarla",SECONDS:"sn",SKIP:"Atla",SKIP_TIME_LEFT:"Reklam\u0131 atla",TIME_LEFT:"Reklam",UNMUTE_INVITE:"Sesi a\xe7mak i\xe7in<br>imleci \xfczerine getirin",VISIT_SITE:"Reklam verenin sitesine git"}},uk:{adsdk:{AD_TITLE:"",LEARN_MORE:"",MORE:"",REPEAT:"",SECONDS:"",SKIP:"",SKIP_TIME_LEFT:"",TIME_LEFT:"",UNMUTE_INVITE:"",VISIT_SITE:""}},uz:{adsdk:{AD_TITLE:"",LEARN_MORE:"",MORE:"",REPEAT:"",SECONDS:"",SKIP:"",SKIP_TIME_LEFT:"",TIME_LEFT:"",UNMUTE_INVITE:"",VISIT_SITE:""}}}},function(e,t,i){var r=i(33),n=i(35);e.exports=r(Object,"create")?Object.create:function(e,t){function i(){}if(i.prototype=e,n(t))for(var r in t)t.hasOwnProperty(r)&&(i[r]=t[r]);return new i}},function(e,t,i){var r=i(34);e.exports=function(e,t){var i=e[t];if(!r(i)){var n=i;try{delete e[t],i=e[t],e[t]=n}catch(o){}}return i}},function(e,t,i){e.exports=i(1).checkNativeCode},function(e,t,i){e.exports=i(0).isObject},function(e,t){e.exports={initMoatTracking:function(e,t,i,r){var n=document.createElement("script"),o={events:[],addEvent:function(e){a.sendEvent?(o.events&&(a.sendEvent(o.events),o.events=!1),a.sendEvent(e)):o.events.push(e)}},s=function(t){return function(){var r,n=-1;if(e&&e.getAdVolume&&(r=e.getAdVolume()),"number"==typeof r&&!isNaN(r)&&0<=r&&(n=r),o.addEvent({type:t,adVolume:n}),-1!==u.indexOf(t)&&e&&e.unsubscribe&&!h)for(var s in h=!0,c)if(c.hasOwnProperty&&c.hasOwnProperty(s))try{e.unsubscribe(c[s],s)}catch(i){}}},a={adData:{ids:i,vpaid:e,build:"cc07a80-clean"},dispatchEvent:o.addEvent};i="_moatApi"+Math.floor(1e8*Math.random());var d,l,c={AdStarted:s("AdStarted"),AdStopped:s("AdStopped"),AdSkipped:s("AdSkipped"),AdLoaded:s("AdLoaded"),AdLinearChange:s("AdLinearChange"),AdSizeChange:s("AdSizeChange"),AdExpandedChange:s("AdExpandedChange"),AdSkippableStateChange:s("AdSkippableStateChange"),AdDurationChange:s("AdDurationChange"),AdRemainingTimeChange:s("AdRemainingTimeChange"),AdVolumeChange:s("AdVolumeChange"),AdImpression:s("AdImpression"),AdClickThru:s("AdClickThru"),AdInteraction:s("AdInteraction"),AdVideoStart:s("AdVideoStart"),AdVideoFirstQuartile:s("AdVideoFirstQuartile"),AdVideoMidpoint:s("AdVideoMidpoint"),AdVideoThirdQuartile:s("AdVideoThirdQuartile"),AdVideoComplete:s("AdVideoComplete"),AdUserAcceptInvitation:s("AdUserAcceptInvitation"),AdUserMinimize:s("AdUserMinimize"),AdUserClose:s("AdUserClose"),AdPaused:s("AdPaused"),AdPlaying:s("AdPlaying"),AdError:s("AdError")},h=!1,u=["AdStopped","AdSkipped","AdVideoComplete"];!function(){if(e&&e.subscribe)for(var t in c)c.hasOwnProperty&&c.hasOwnProperty(t)&&e.subscribe(c[t],t)}();try{l=(d=t.ownerDocument).defaultView||d.parentWindow}catch(p){d=document,l=window}return l[i]=a,n.type="text/javascript",t&&t.insertBefore(n,t.childNodes[0]||null),n.src="https://z.moatads.com/"+r+"/moatvideo.js#"+i,a}}},function(e,t){!function(e){function t(){this.intersectionSupport=!!e.IntersectionObserver,this.intersectionRatio=-1,this.observerData=[{percent:.5,duration:2e3,useFocus:!0,name:"MRC"}]}function i(e){return e==t.eventsMap.AdImpression?"{{protocol}}//{{domain}}/fcgi-bin/dispatch.fcgi?a.A=im&a.si={{account}}&a.te={{tte}}&a.aap={{aap}}&a.agi={{agi}}&a.hr=XC&g.ra={{random}}&a.ycp={{siteID}}":e==t.eventsMap.AdClickThru?"{{protocol}}//{{domain}}/fcgi-bin/dispatch.fcgi?a.A=cl&a.si={{account}}&a.te={{tte}}&a.aap={{aap}}&a.agi={{agi}}&g.lu=":"{{protocol}}//{{domain}}/fcgi-bin/dispatch.fcgi?a.A=ev&a.si={{account}}&a.te={{tte}}&a.aap={{aap}}&a.agi={{agi}}&a.evn="+e+"&g.ra={{random}}&a.ycp={{siteID}}"}function r(e,t){for(var i in t)t.hasOwnProperty(i)&&(e=e.replace(new RegExp("{{"+i+"}}","g"),t[i]));return e}function n(e){(new Image).src=e}t.prototype.version=function(){console.log("[Viewability Observer JS] 2018.02.20")},t.DELAY=250,t.ON_PAGE="OnPage",t.S_FRAME="SameDomainFrame",t.X_FRAME="CrossDomainFrame",t.VIEWABLE="Viewable",t.NOT_VIEWABLE="Unviewable",t.UNDETERMINED="Undetermined",t.VISIBILITY_RATIO=.5,t.USE_FOCUS=!0,t.eventsMap={AdLoaded:"load",AdStarted:"creativeView",AdVideoStart:"start",AdImpression:"impression",AdVideoFirstQuartile:"firstQuartile",AdVideoMidpoint:"midpoint",AdVideoThirdQuartile:"thirdQuartile",AdVideoComplete:"complete",AdUserClose:"close",AdStopped:"stop",AdSkipped:"skip",AdClickThru:"click",AdPaused:"pause",AdPlaying:"resume",AdError:"error"},t.prototype.hasFocus=function(){return("undefined"===this.realDocument.hidden||!0!==this.realDocument.hidden)&&(this.getPosition()===t.X_FRAME||"function"!==typeof this.realWindow.top.document.hasFocus||this.realWindow.top.document.hasFocus())},t.prototype.getPosition=function(){if(!this.position)if(e.top===this.realWindow)this.position=t.ON_PAGE;else{this.position=t.S_FRAME;try{for(var i=this.realWindow;i.parent!==i;){if(i.parent.document.domain!==i.document.domain){this.position=t.X_FRAME;break}i=i.parent}}catch(r){this.position=t.X_FRAME}}return this.position},t.prototype.init=function(e,o,s){this.rootElement=e,this.realDocument=this.rootElement.ownerDocument,this.realWindow=this.realDocument.defaultView||this.realDocument.parentWindow,this.adParameters=JSON.parse(o),this.adParameters.agi=Math.round(1e3*Math.random()),this.adParameters.random=Math.round(1e8*Math.random()),this.adParameters.protocol="https:",this.vpaidObject=s,this.completeDispatched=this.durationChecked=!1,e={cet:0,pg:0,ulv:0,dnn:0};try{if("undefined"!==typeof this.adParameters.cp){var a=decodeURIComponent(this.adParameters.cp).split("|");for(o=0;o<a.length;o++)if(a[o]){var d=a[o].split(":");e[d[0]]=2!=d.length||("undefined"!==typeof e[d[0]]?isNaN(parseInt(d[1],10))?e[d[0]]:parseInt(d[1],10):d[1])}}}catch(c){}for(var l in this.customParams=e,0<this.customParams.pg&&(this.observerData=[{percent:.5,duration:2e3,useFocus:!0,name:"MRC"},{percent:.7,duration:2e3,useFocus:!0,name:"70and2"},{percent:.99,duration:2e3,useFocus:!0,name:"100and2"},{percent:.75,duration:5e3,useFocus:!0,name:"MRC75Prc"}]),0<this.customParams.ulv&&(this.observerData=[{percent:.5,duration:2e3,useFocus:!0,name:"MRC"},{percent:.5,duration:2e3,useFocus:!0,name:"visibility_2sec"},{percent:.5,duration:4e3,useFocus:!0,name:"visibility_4sec"},{percent:.5,duration:7e3,useFocus:!0,name:"visibility_7sec"},{percent:.5,duration:1e4,useFocus:!0,name:"visibility_10sec"},{percent:.5,duration:15e3,useFocus:!0,name:"visibility_15sec"},{percent:.5,duration:2e4,useFocus:!0,name:"visibility_20sec"},{percent:.5,duration:3e4,useFocus:!0,name:"visibility_30sec"}]),0<this.customParams.dnn&&(this.observerData=[{percent:.5,duration:2e3,useFocus:!0,name:"MRC"},{percent:.7,duration:5e3,useFocus:!0,name:"MRC70"}]),n(r(i(this.getPosition()),this.adParameters)),t.eventsMap)t.eventsMap.hasOwnProperty(l)&&s.subscribe(this.onVPAIDEvent.bind(this,l),l);if(this.intersectionSupport)this.intersectionObserver=new IntersectionObserver(function(e){this.intersectionRatio=Math.round(100*e[0].intersectionRatio)/100}.bind(this),{threshold:[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1]}),this.intersectionObserver.observe(this.rootElement);else if(this.getPosition()==t.X_FRAME)return n(r(i(this.observerData.shift().name+t.UNDETERMINED),this.adParameters)),!1},t.prototype.checkDuration=function(){if(this.vpaidObject&&"function"==typeof this.vpaidObject.getAdDuration&&this.vpaidObject.getAdDuration()){var e=Math.round(this.vpaidObject.getAdDuration());if(0<e){this.durationChecked=!0;for(var t=0;t<this.observerData.length;t++)this.observerData[t].duration>1e3*e&&(this.observerData.splice(t,1),t--)}else setTimeout(this.checkDuration,250)}},t.prototype.onVPAIDEvent=function(e){if(0<this.customParams.ulv&&!this.durationChecked&&"AdVideoStart"==e&&this.checkDuration(),"AdStarted"!=e&&"AdPlaying"!=e||(this.updater=setInterval(t.updateTime.bind(this),t.DELAY)),"AdVideoComplete"==e){if(this.completeDispatched)return;if(this.completeDispatched=!0,0<this.customParams.pg){var o=this.getViewAbility(t.VISIBILITY_RATIO,t.USE_FOCUS);o.state===t.VIEWABLE&&n(r(i("AdVideoCompleteMRC"),this.adParameters))}}"AdClickThru"==e&&0<this.customParams.cet&&(0<(o=this.vpaidObject.getAdDuration()-this.vpaidObject.getAdRemainingTime())&&n(r(i("AdVideoClick"+parseInt(o,10)),this.adParameters))),"AdPaused"==e&&clearInterval(this.updater),-1!=["AdStopped","AdSkipped","AdUserClose"].indexOf(e)&&this.stop(),t.eventsMap.hasOwnProperty(e)&&(o=this.getViewAbility(t.VISIBILITY_RATIO,t.USE_FOCUS),n(r(i(t.eventsMap[e]),this.adParameters)),o.state&&n(r(i(e+o.state),this.adParameters))),"AdVideoThirdQuartile"==e&&this.checkTwoSeconds()},t.prototype.checkTwoSeconds=function(){if(!this.completeDispatched){var e=this.vpaidObject.getAdRemainingTime();if(0<e&&1.1>e)this.completeDispatched=!0,e=this.getViewAbility(t.VISIBILITY_RATIO,t.USE_FOCUS),0<this.customParams.pg&&e.state===t.VIEWABLE&&n(r(i("AdVideoCompleteMRC"),this.adParameters)),n(r(i(t.eventsMap.AdVideoComplete),this.adParameters)),e.state&&n(r(i("AdVideoComplete"+e.state),this.adParameters)),this.stop();else{var o=this;setTimeout((function(){o.checkTwoSeconds()}),250)}}},t.prototype.stop=function(){if(clearInterval(this.updater),t.updateTime.call(this),this.observerData&&this.observerData.length)for(;this.observerData.length;)n(r(i(this.observerData.shift().name+t.NOT_VIEWABLE),this.adParameters))},t.prototype.getViewAbility=function(i,r){if(this.intersectionSupport)return t.match(this.hasFocus(),r,this.intersectionRatio,i);if(this.getPosition()==t.X_FRAME)return{error:t.UNDETERMINED,state:t.UNDETERMINED,percent:0,focus:!1};var n=this.realWindow,o=this.rootElement.getBoundingClientRect(),s=t.calculateArea(o,n);try{for(;n!==e.top;){var a=n.name||(n.name="wb-"+Math.round(1e6*Math.random()).toString(16));o=(n=n.parent).frames[a].frameElement.getBoundingClientRect(),s=Math.min(t.calculateArea(o,n),s)}}catch(d){return{error:t.UNDETERMINED,state:t.UNDETERMINED,percent:0,focus:!1}}return t.match(this.hasFocus(),r,s,i)},t.updateTime=function(){var e=this.getViewAbility();if(!this.observerData||!this.observerData.length)return clearInterval(this.updater);for(var o=[],s=0;s<this.observerData.length;s++){var a=this.observerData[s];a.timeInView=(!a.useFocus||e.focus)&&e.percent>=a.percent?t.DELAY+(a.timeInView||0):0,a.timeInView>=a.duration?n(r(i(a.name+t.VIEWABLE),this.adParameters)):o.push(a)}this.observerData=o},t.match=function(e,i,r,n){var o=t.NOT_VIEWABLE;return(e||!i)&&r>=n&&(o=t.VIEWABLE),{state:o,focus:e,percent:r}},t.calculateArea=function(e,t){var i=e.width*e.height,r=e.width,n=e.height;return 0>e.top&&(n+=e.top),e.bottom>t.innerHeight&&(n-=e.bottom-t.innerHeight),0>e.left&&(r+=e.left),e.right>t.innerWidth&&(r-=e.right-t.innerWidth),r*n/i},e.WBViewAbility=t}(window)},function(e,t){e.exports='<svg width=\'100%\' height=\'100%\' viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M1 1L13 13" stroke="#AFC5CF" stroke-width="2"/>\n<path d="M1 13L13 1" stroke="#AFC5CF" stroke-width="2"/>\n</svg>\n'},function(e,t,i){"use strict";function r(e,t){const i=e.style;for(const r in t)if(t.hasOwnProperty(r)){i[En(r)]=t[r]}}function n(e,t){void 0===t&&(t=!0);const i=_n(e);return i?!e[i]:t}function o(){}function s(e,t){let i=e[t];if(!Object(Sn.checkNativeCode)(i)){const n=i;try{delete e[t];const r=e[t];"function"===typeof r&&(i=r),e[t]=n}catch(r){}}return i}function a(e,t,i,r){const n=function(e){let t=!1,i=!1,r=!1;return!0===e?t=!0:"object"===typeof e&&(t=Boolean(e.capture),i=Boolean(e.passive),r=Boolean(e.once)),{capture:t,passive:i,once:r}}(r),o=On?n:n.capture,s=n.once&&!kn?function(e){a(),i.call(this,e)}:i,a=()=>{Cn(e,t,s,o)};return Tn(e,t,s,o),a}function d(e,t){const i=function(e){const t=_n(e);if(t)return t.replace(/hidden/i,"visibilitychange")}(e);return i?a(e,i,()=>{t(n(e))}):o}function l(e){return"function"===typeof e||"Function"===Yn(e)}function c(e){let t="";for(let i=0;i<e;i++)t+=(16*to()|0).toString(16);return t}function h(e){if(e&&e.location){const{location:t}=e;return"function"===typeof t.toString?t.toString():t.href||""}return""}function u(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];no(e)&&e.forEach(e=>{"function"===typeof e&&e(...i)})}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function A(e,t){e.forEach(e=>{!function(e){return"function"===typeof e.dispatch}(e)?e(t):e.dispatch(t)})}function f(e){return 0===fo.length&&(Ao=window.setInterval(()=>{fo.forEach(e=>e())},po)),fo.push(e),()=>{const t=fo.indexOf(e);t>-1&&fo.splice(t,1),0===fo.length&&clearInterval(Ao)}}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function g(e,t,i){return e>i?i:e<t?t:e}function v(e){void 0===e&&(e=window);try{return(e.navigator||{}).userAgent||""}catch(t){return""}}function y(e,t){if(void 0===t&&(t=!0),bo&&t)return[];{const t=[];let r=e;for(;;)try{if(!(r=r.ownerDocument.defaultView.frameElement))return t;t.push(r)}catch(i){return t}}}function w(e){const t=e.ownerDocument,i=t.defaultView,r=t.documentElement,n=e.getBoundingClientRect();return{winWidth:Eo?Math.max(r.clientWidth,i.innerWidth||0):i.innerWidth||r.clientWidth||t.body.clientWidth,winHeight:Eo?Math.max(r.clientHeight,i.innerHeight||0):i.innerHeight||r.clientHeight||t.body.clientHeight,left:n.left,top:n.top,width:n.width,height:n.height}}function b(e){let{width:t,height:i,top:r,left:n,winWidth:o,winHeight:s}=e;const a=n+t,d=r+i,l=g(n,0,o),c=g(r,0,s);return{winWidth:o,winHeight:s,left:l,top:c,width:g(a,l,o)-l,height:g(d,c,s)-c}}function E(e,t){return e.width*e.height/(t.width*t.height)}function _(e){const t=w(e);let i=b(t),r=E(i,t);return y(e).forEach(e=>{const n=w(e),o=function(e,t){return{winWidth:t.winWidth,winHeight:t.winHeight,left:e.left+t.left,top:e.top+t.top,width:e.width,height:e.height}}(i,n);i=b(o),r=E(i,t)}),r}function S(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function T(e){const t={};for(const i in e)S(e,i)&&void 0!==e[i]&&(t[i]=e[i]);return t}function C(e){if(!e)return;const{parentElement:t}=e;t&&t.removeChild(e)}function k(e,t,i){for(const r in e)S(e,r)&&t.call(i,e[r],r,e)}function P(){return(P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function O(e){Ro.href=e;let t=Ro.pathname||"";"/"!==t.charAt(0)&&(t="/"+t);const i=(Ro.search||"")+(Ro.hash||""),r=e.lastIndexOf(i),n=-1===r?e:e.slice(0,r),o=Ro.protocol&&/^[a-z]+:/i.test(Ro.protocol)?Ro.protocol:"";return{originalPath:n,href:Ro.href,protocol:o,host:Ro.host,hostname:Ro.hostname,port:Ro.port,pathname:t,search:Ro.search,hash:Ro.hash}}function I(e,t){if(void 0===t&&(t=!1),t){const t=e.originalPath,i="/"===e.pathname&&"/"!==t[t.length-1];return e.originalPath+(i?"/":"")+e.search+e.hash}const i="443"===e.port||"80"===e.port?e.hostname:e.host;return e.protocol+"//"+i+e.pathname+e.search+e.hash}function R(e){const t={},i=e.replace(/^[?#]+/,"").replace(/#.*$/,"").split("&");for(let r=0;r<i.length;r++){const e=i[r].indexOf("=");let n,o;if(-1===e?(n=No(i[r]),o=""):(n=No(i[r].slice(0,e)),o=i[r].slice(e+1)),n){const e=Boolean(/(\[\])$/.exec(n));n=n.replace(/\[\]$/,""),e?void 0===t[n]?t[n]=[No(o)]:t[n]=[].concat(t[n],No(o)):t[n]=No(o)}}return t}function N(e){return R(O(e).search)}function D(e){const t=[];for(const i in e)if(e.hasOwnProperty(i)){const r=e[i];no(r)?t.push(Do(i,r)):void 0!==r&&t.push(i+"="+encodeURIComponent(r))}return"?"+t.join("&")}function V(e,t,i){let{override:r=!0,saveOriginalPath:n=!1}=void 0===i?{}:i;const o=O(e),s=R(o.search);return k(t,(e,t)=>{(void 0===s[t]||r)&&(s[t]=e)}),I(P({},o,{search:D(s)}),n)}function x(e){return O(e).pathname.split("/").pop()||""}function L(e){return[].concat.apply([],e)}function M(e,t,i,r){void 0===r&&(r=!1);const n=(r?to():Lo)<e,o=n?t:i;return"function"===typeof o&&o(),n}function B(e){const t=y(e.documentElement).map(e=>e.ownerDocument);return t.unshift(e),t.map(e=>({location:h(e.defaultView),referrer:e.referrer}))}function F(e){if("function"===typeof Object.keys)return Object.keys(e);{const t=[];for(const i in e)S(e,i)&&t.push(i);return t}}function U(e){return"function"===typeof Object.entries?Object.entries(e):F(e).map(t=>[t,e[t]])}function H(){if(Go&&Go.document&&"function"===typeof Go.document.hasFocus)try{return Go.document.hasFocus()}catch(e){}}function j(e){setTimeout(()=>{throw e},0)}function z(e){if(!e)return[];const t=[];for(let i=0;i<e.length;i++)t.push(e[i]);return t}function W(e){return qo?z(e.location.ancestorOrigins):[]}function Y(e){let t=e;const i=[e],{top:r}=e;for(;t!==r;)t=t.parent,i.push(t);return i}function G(e){let t="",i="";if(e){B(e).reverse().forEach(e=>{let{location:r,referrer:n}=e;t=t||r,i=i||n})}return{location:t,referrer:i}}function q(){return(q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function X(e){const{method:t,url:i,async:r=!0,data:n,responseType:s="text",onBeforeSend:a=o,onError:d=o,onSuccess:l=o,onRetry:c=o,checkStatus:h=(e=>es===e),headers:u={},xhrConstructor:p=XMLHttpRequest,retries:A=0,timeout:f=0,withCredentials:m,onAbort:g,onSetup:v}=e;let y,w=!1,b=e=>{w=!0,b=o,y=e,E(new Error("Abort request")),"function"===typeof g&&g(e)};const E=t=>{if(_.onerror=null,_.onreadystatechange=null,S&&clearTimeout(S),S&&_.readyState!==ts||w)try{_.abort()}catch(t){}if(!w)if(A>0){const i=c(t,_);if("boolean"!==typeof i||i||b(),w)return;X(q({},e,{onSetup:e=>{let{abort:t}=e;b=e=>t(e),w&&t(y)},retries:A-1}))}else b=o,d(t,_)},_=new p;try{_.open(t,i,r)}catch(T){return void E(T)}let S;if(_.responseType=s,_.withCredentials=Boolean(m),k(u,(e,t)=>{try{_.setRequestHeader(t,e)}catch(T){}}),f>0&&isFinite(f)&&(S=window.setTimeout(()=>{E(new Error("Request timeout, "+i))},f)),_.onerror=E,_.onreadystatechange=()=>{if(_.readyState===ts){const{status:e}=_;h(e)?(b=o,clearTimeout(S),l(_)):E(new Error("Invalid request status "+e+", "+i))}},("function"!==typeof v||(v({abort:e=>b(e)}),!w))&&(a(_,e),!w))try{_.send(n)}catch(T){E(T)}}function K(e){const t={};return e.forEach(e=>{let[i,r]=e;t[i]=r}),t}function Q(){return(Q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function Z(e,t){try{return e()}catch(i){"function"===typeof t&&t(i)}}function J(e,t){const i=U({UrlParams:()=>{const i=B(e.document);for(let e=0;e<i.length;e++){const{location:r}=i[e],n=N(r)[t];if(n)return n}},LocalStorage:()=>e.localStorage.getItem(t),globalVariable:()=>{const i=io(e);for(let e=0;e<i.length;e++){const r=i[e],n=r&&r.Ya&&r.Ya.hardcodedParams&&r.Ya.hardcodedParams[t];if(n)return String(n)}}});for(let r=0;r<i.length;r++){const[e,n]=i[r],o=Z(n);if("string"===typeof o&&o.length>0)return gs.deprecated("HardcodedParamObtainedFrom"+e,"ATTENTION! Product parameter obtained from "+e+" ["+t+"]["+o+"]"),o}}function $(){return($=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function ee(e){return e[Math.floor(to()*e.length)]}function te(e,t){const i={};return F(e).forEach(r=>{i[r]=t(e[r],r)}),i}function ie(e,t,i){void 0===i&&(i=" ");const r=t-e.length;if(r>0){let t=i;for(;t.length<r;)t+=t;return(t.length>r?t.substr(0,r):t)+e}return e}function re(e){const t=[];for(const[i,r]of e){const e=ne(r,i);t.push(e)}return function(e){if(e.length>53)throw new Error("bitUtils.toDecimal: \u0431\u043e\u043b\u044c\u0448\u0435 53 \u0431\u0438\u0442 \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0438\u0437-\u0437\u0430 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u043d\u043e\u0439 \u0442\u043e\u0447\u043d\u043e\u0441\u0442\u0438, \u043d\u043e \u043f\u0435\u0440\u0435\u0434\u0430\u043d\u0430 \u0441\u0442\u0440\u043e\u043a\u0430 \u0434\u043b\u0438\u043d\u043e\u0439 "+e.length+" \u0431\u0438\u0442.");return parseInt(e,2)}(t.reverse().join(""))}function ne(e,t){return oe(function(e,t){return Number(e)&Math.pow(2,t)-1}(e,t).toString(2),t)}function oe(e,t){return ie(e,t,"0")}function se(){return(se=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function ae(e){let t=function(){t=()=>i;const i=e.apply(this,arguments);return i};return function(){return t.apply(this,arguments)}}function de(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.join("")}function le(){return(le=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function ce(e){void 0===e&&(e=window);const t=e.navigator.userAgent.toLowerCase();return/ipad|iphone|ipod/.test(t)&&!e.MSStream&&!Pa(e)}function he(e,t){e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)}function ue(e){const t=Object.values;if("function"===typeof t)return t(e);{const t=[];for(const i in e)S(e,i)&&t.push(e[i]);return t}}function pe(){return(pe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function Ae(e){return new Promise((t,i)=>{X(pe({},e,{onSuccess:t,onError:i}))})}function fe(e,t){let i=e+to()*(t+1-e);return i=Math.floor(i)}function me(e,t){void 0===e&&(e="a"),void 0===t&&(t="z");const i=fe(e.charCodeAt(0),t.charCodeAt(0));return String.fromCharCode(i)}function ge(){return(ge=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function ve(e){const{dropCacheOnRetry:t=!1,onBeforeLoad:i=o,retries:r=0}=e;if(e.checkLoad&&e.checkLoad())return void(e.onLoad&&e.onLoad());let n=i,s=0;return t&&r>0&&(n=e=>{if(i(e),s>0){const t=-1===e.src.indexOf("?")?"?":"&",i=function(e){const t=[];for(let i=0;i<e;i++)t.push(me());return t.join("")}(4);e.src+=t+i}s++}),function e(t){const{src:i,win:r,charset:n=Xa,async:s=!0,retries:a=0,onRetry:d=o,retryDelay:l=0,checkLoad:c=Ka,onBeforeLoad:h=o,onLoad:u=o,onError:p=o}=t;const A=r||window;const f=A.document.createElement("script");const m=r=>{a>0?(d(r),e(ge({},t,{src:i,retries:a-1}))):p(r),C(f)};f.type="text/javascript";f.async=s;f.onload=()=>c(f)?u():m(new Error("checkLoad for "+i+" failed"));f.onerror=e=>{try{A.setTimeout(()=>{m(e)},l)}catch(e){}};f.src=i;f.charset=n;h(f);(function(e){const t=e.document;let i=t.getElementsByTagName("head")[0];return i||(i=t.createElement("head"),t.documentElement.appendChild(i)),i})(A).appendChild(f)}(ge({},e,{onBeforeLoad:n}))}function ye(){return(ye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function we(){return(we=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function be(e){return new Promise((t,i)=>{!function(e){const{win:t=window,src:i,retries:r=0,onError:n=o}=e,s=new Fn({id:qa.LOAD_SCRIPT_ERROR,message:"Failed to load script ["+i+"]",details:{src:i,isSelfWindow:t===window,onBeforeLoad:Boolean(e.onBeforeLoad),retries:r}});ve(ye({},e,{win:t,onError:()=>n(s)}))}(we({},e,{onLoad:t,onError:i}))})}function Ee(){return(Ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function _e(e){return be(Ee({},Qa,{},e))}function Se(e,t){return function(){try{e(...arguments)}catch(i){Js.error({error:new Cs(i,{code:t})}),j(i)}}}function Te(e,t,i){let r;return void 0===t&&(t=Ms),(r=i?i.ya&&i.ya.videoAd.modules[t]:$a.videoAd.modules[t])?r[e]:void 0}function Ce(e){let{moduleName:t,version:i=Ms,onSuccess:r,onError:n,win:o}=e;const s=Date.now(),a=Se(e=>{const n=Date.now()-s;Js.values({name:"ModuleLoaded",labels:{bundleName:t},data:{loaderVersion:Ls,bundleVersion:i},values:{timeSpent:n}}),r(e)},"LOAD_MODULE_CALLBACK_ERROR"),d=Se(e=>{Js.errorToStats(e),n(e)},"LOAD_MODULE_CALLBACK_ERROR"),l=Te(t,i);if(l)return void a(l);const c=Us(i)?Wa.ES2017:Wa.ES5,{encodeUrl:h}=$a.videoAd,u=""+function(e){return void 0===e&&(e=Ms),Os||"https://"+xa+"/awaps-ad-sdk-js-bundles/1.0-"+e+"/"}(i)+c+"/"+Ga[t]+".bundle.js";_e({src:"function"===typeof h?h(u):u,win:o}).then(()=>{const e=Te(t,i,o);e?a(e):d(new Cs({code:"CANNOT_INIT_MODULE",details:{moduleName:t,version:i}}))}).catch(e=>{d(new Cs(e,{code:"CANNOT_LOAD_MODULE",details:{moduleName:t,version:i}}))})}function ke(e,t){const i=t.split(".");let r=window;for(let o=0;o<i.length-1;o++)r=r[i[o]];const n=i[i.length-1];if(void 0===r[n])r[n]=e;else if("object"===typeof r[n])for(const o in e)e.hasOwnProperty(o)&&ke(e[o],t+"."+o)}function Pe(e,t){const i=(e.ownerDocument||document).createElement("style");return i.type="text/css",i.textContent=t,e.appendChild(i),i}function Oe(e,t){return t===e.substring(e.length-t.length)}function Ie(e,t,i,r){const n=(document,document.createElement("video"));return n.id="yaVideoPlayer_"+Math.floor(1e6*Math.random()),n.setAttribute("x-webkit-airplay","allow"),Array.isArray(t)?t.forEach(e=>{const t=document.createElement("source");t.src=e.src,t.type=e.type,n.appendChild(t)}):t&&(n.src=t),i&&(n.poster=i),n.autoplay=Boolean(r),Na||(n.preload=r?"auto":"none"),he(e,n),n}function Re(){return Na&&Oa<=9}function Ne(e,t){const i=document.createElement("div");return e&&(i.className=e),t&&(i.innerHTML=t),i}function De(e){const{hostname:t}=O(e);return t===td||Oe(t,"."+td)}function Ve(e){return xe(e,!0)}function xe(e,t){if(void 0===t&&(t=!1),!e)return!1;const{hostname:i}=O(e),r=t?rd.concat(id):rd.concat(id,nd);return!(!i||0===i.length)&&r.some(e=>e===i||Oe(i,"."+e))}function Le(e){let{url:t,options:i,ignoreAbd:r=!1}=e;if(l(zo)&&!r)return t;if(!Ve(t)&&!De(t))return t;const n=Math.round(100*i.visibility),o=Math.round(i.size.width),s=Math.round(i.size.height);return V(t,{[ta]:String(Ls),[ia]:Is,[ra]:String(n),[na]:String(o),[oa]:String(s),[Ns]:String(Ks.serialize()),[sa]:ka(),[aa]:Ps,[la]:Jo,[ca]:$o?"0":"1",[ea]:String(Date.now()),[da]:$s?"0":"1"},{override:!1})}function Me(e){if(e){const{localName:t,name:i,documentElement:r}=e;if("string"===typeof t)return t;if("string"===typeof i)return i;if(r){const{tagName:e}=r;if("string"===typeof e)return e}}return""}function Be(e,t,i,r){return void 0===r&&(r=!0),new Promise((n,o)=>{"https:"===window.location.protocol&&(e=function(e){return Ro.href=e,Ro.protocol="https:",Ro.href}(e));const s=new XMLHttpRequest;"function"===typeof s.overrideMimeType&&s.overrideMimeType("text/xml"),s.open("GET",e);let a=0;"number"===typeof i&&(a=window.setTimeout(()=>{const e=new od("HTTP timeout error");e.isTimeoutError=!0,o(e)},i)),s.withCredentials=r,s.onerror=t=>{clearTimeout(a),o(new Error("XHR Error["+s.status+"]["+s.statusText+"]["+e+"]"))},s.onreadystatechange=()=>{4===s.readyState&&0!==s.status&&(clearTimeout(a),n({xml:s.responseXML,responseText:s.responseText,responseStatus:s.status}))};try{s.send(t)}catch(d){d.message="["+d.message+"]["+e+"]",o(d)}})}function Fe(e){if(ys&&console&&console.log){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];console.log("AdSDKJS:",e,...i)}}function Ue(){return(Ue=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function He(e){if("function"===typeof e.getVideoPlaybackQuality){const{droppedVideoFrames:t,corruptedVideoFrames:i,totalVideoFrames:r}=e.getVideoPlaybackQuality();return{droppedVideoFrames:t,corruptedVideoFrames:i,totalVideoFrames:r}}const t=e;return"number"===typeof t.webkitDroppedFrameCount?Ue({},ad,{droppedVideoFrames:t.webkitDroppedFrameCount,totalVideoFrames:t.webkitDecodedFrameCount}):ad}function je(e){return{url:e,promise:new Promise(t=>{const i=new Image;i.onload=()=>t(!0),i.onerror=()=>t(!1),i.src=e})}}function ze(e){let{error:t,trackingUrls:i}=e;return Fe("Track error ==> ",t),r=i,Array.isArray(r)?r.map(e=>Le({url:e,options:ld})).map(je):[];var r}function We(e,t){return void 0===t&&(t=[]),Js.errorToStats(e),ze({error:e,trackingUrls:t})}function Ye(e,t,i){if(void 0===i&&(i=null),e.hasAttribute(t)){const i=e.getAttribute(t);return i?i.trim():""}return i}function Ge(e){return e&&e.textContent?e.textContent.trim():""}function qe(e){return Boolean(e&&Ge(e).length)}function Xe(e,t,i,r){const n=t.ownerDocument,o=n.createElement(e);if(t.appendChild(o),i&&o.appendChild(n.createCDATASection(i)),r)for(const s in r)r.hasOwnProperty(s)&&null!==r[s]&&o.setAttribute(s,String(r[s]));return o}function Ke(e){const t=parseInt(Ye(e,"width",0),10),i=parseInt(Ye(e,"height",0),10),r=parseInt(Ye(e,"bitrate",0),10),n=Ye(e,"minBitrate",""),o=n?parseInt(n,10):void 0,s=Ye(e,"maxBitrate",""),a=s?parseInt(s,10):void 0,d=Ye(e,"delivery"),l=Ye(e,"type"),c=Ge(e);return{width:t,height:i,bitrate:r,minBitrate:o,maxBitrate:a,delivery:d,type:l,url:c,get source(){return Js.warning({name:"UsingSourceParameterOfMediaFile",message:"AdSDK Warning: AdMediaFile.source parameter deprecated, use AdMediaFile.url"}),c},get src(){return Js.warning({name:"UsingSrcParameterOfMediaFile",message:"AdSDK Warning: AdMediaFile.src parameter deprecated, use AdMediaFile.url"}),c},get isVpaid(){return Js.warning({name:"UsingIsVpaidParameterOfMediaFile",message:"AdSDK Warning: AdMediaFile.isVpaid parameter deprecated, use AdMediaFile.apiFramework"}),cd.indexOf(l)>-1}}}function Qe(e){const t=e.querySelector("StaticResource"),i=parseInt(Ye(e,"width",0),10),r=parseInt(Ye(e,"height",0),10),n=Ye(e,"delivery"),o=t?Ye(t,"creativeType"):null,s=t?Ge(t):"";return{width:i,height:r,type:o,url:s,bitrate:0,minBitrate:void 0,maxBitrate:void 0,delivery:n,get source(){return Js.warning({name:"UsingSourceParameterOfMediaFile",message:"AdSDK Warning: AdMediaFile.source parameter deprecated, use AdMediaFile.url"}),s},get src(){return Js.warning({name:"UsingSrcParameterOfMediaFile",message:"AdSDK Warning: AdMediaFile.src parameter deprecated, use AdMediaFile.url"}),s},get isVpaid(){return Js.warning({name:"UsingIsVpaidParameterOfMediaFile",message:"AdSDK Warning: AdMediaFile.isVpaid parameter deprecated, use AdMediaFile.apiFramework"}),cd.indexOf(o)>-1}}}function Ze(e){return{type:e.type,width:e.width,height:e.height,url:e.url,bitrate:e.bitrate,delivery:e.delivery,source:e.url,src:e.url,isVpaid:cd.indexOf(e.type)>-1}}function Je(e){return"number"===typeof e&&isFinite(e)}function $e(e){return"string"!==typeof e?NaN:e.split(":").reverse().reduce((e,t,i)=>e+parseFloat(t)*60**i,0)}function et(e){if(e.indexOf("%")>-1){const t=parseFloat(e);return Je(t)?{unit:pd.portion,value:t/100}:void 0}const t=$e(e);if(Je(t))return{unit:pd.seconds,value:t}}function tt(e){const t=Math.floor(e/60/60),i=Math.floor((e-60*t*60)/60),r=e-60*t*60-60*i;return[ie(String(t),2,"0"),ie(String(i),2,"0"),ie(r.toFixed(3),6,"0")].join(":")}function it(e){let{unit:t,value:i}=e;if(t===pd.seconds)return tt(i);return 100*i+"%"}function rt(){return(rt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function nt(e,t){let i=!1;const r=function(){const r=i?t:e;return i=!0,r.apply(this,arguments)};return function(){return r.apply(this,arguments)}}function ot(e){return"number"===typeof e&&isFinite(e)&&e>0}function st(e){e.forEach(e=>Js.error({error:e}))}function at(e){let{win:t,methodName:i,data:r,id:n}=e;t.postMessage({methodName:i,data:r,id:n},"*")}function dt(){return(dt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function lt(){return(lt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function ct(e,t){return void 0===t&&(t=1e6),ht(function(e,t){e=e.replace(/\r\n/g,"\n");let i="";for(let r=0;r<e.length;r++){const n=e.charCodeAt(r);let o;if(n<128?o=String.fromCharCode(n):n>127&&n<2048?(o=String.fromCharCode(n>>6|192),o+=String.fromCharCode(63&n|128)):(o=String.fromCharCode(n>>12|224),o+=String.fromCharCode(n>>6&63|128),o+=String.fromCharCode(63&n|128)),i.length+o.length>t)break;i+=o}return i}(e,3*t/4|0))}function ht(e){let t="",i=0;for(;i<e.length;){const r=e.charCodeAt(i++),n=e.charCodeAt(i++),o=e.charCodeAt(i++),s=r>>2,a=(3&r)<<4|n>>4;let d=(15&n)<<2|o>>6,l=63&o;isNaN(n)?d=l=64:isNaN(o)&&(l=64),t=t+Td.charAt(s)+Td.charAt(a)+Td.charAt(d)+Td.charAt(l)}return t}function ut(e){return function(e){const t=[];let i=0;for(;i<e.length;){const r=e.charCodeAt(i);if(r<128)t.push(String.fromCharCode(r)),i++;else if(r>191&&r<224){const n=e.charCodeAt(i+1);t.push(String.fromCharCode((31&r)<<6|63&n)),i+=2}else{const n=e.charCodeAt(i+1),o=e.charCodeAt(i+2);t.push(String.fromCharCode((15&r)<<12|(63&n)<<6|63&o)),i+=3}}return t.join("")}(function(e){const t=[];let i=0;e=e.replace(/[^A-Za-z0-9\-_=]/g,"");for(;i<e.length;){const r=Td.indexOf(e.charAt(i++)),n=Td.indexOf(e.charAt(i++)),o=Td.indexOf(e.charAt(i++)),s=Td.indexOf(e.charAt(i++)),a=r<<2|n>>4,d=(15&n)<<4|o>>2,l=(3&o)<<6|s;t.push(String.fromCharCode(a)),64!==o&&t.push(String.fromCharCode(d)),64!==s&&t.push(String.fromCharCode(l))}return t.join("")}(e))}function pt(e,t,i){const r=function(e){return'{"grab_version":1,"is_async":'+function(){try{return Boolean(Ya.Context._asyncModeOn)}catch(e){return!0}}()+',"old_grab_size":'+e.length+"}"}(t);let n=At(r,t+e);if(n.length<i)return n;let o=i,s="";for(;s.length<i;){n=s,s=At(r,(t+e).substr(0,o)),o+=512}return n}function At(e,t){return ht(e+"\n"+Cd.deflate(t,{level:9,to:"string"}))}function ft(e){const t=e.document.head,i=e.document.title;if(!t)return"<head></head>";const r=t.getElementsByTagName("meta"),n=["<head>"];i&&n.push("<title>"+i+"</title>");for(let o=0;o<r.length;o++){const e=(r[o].getAttribute("name")||"").toLowerCase();"description"!==e&&"keywords"!==e||(n.push("<meta"),mt(r[o],"name",n),mt(r[o],"content",n),n.push("/>"))}return n.push("</head>"),n.join("")}function mt(e,t,i){e.hasAttribute(t)&&i.push(" "+t+'="'+e.getAttribute(t)+'"')}function gt(e,t,i){const r=e.document.getElementsByTagName(t)[0]||e.document.getElementsByClassName(t)[0],n=[];return r&&function(e,t,i){const r=[e],n=Number(new Date);let o=0,s=0;for(;r.length>0&&o<1e4&&Number(new Date)-n<100;){const e=r.pop();if(e instanceof Pd)e.textContentLength===s?(i.length=e.resultLength,o=e.textContentLength):(i.push(e.name),o+=e.name.length);else if(bt(e)){const t=e.textContent||"";i.push(t),o+=t.length,s+=t.length}else if(Et(e)&&vt(e)){const n=new Pd("</"+e.tagName.toLowerCase()+">",s,i.length);yt(e,t,i),o+=i[i.length-1].length,r.push(n);for(let t=e.lastChild;t;t=t.previousSibling)if(wt(t))if(bt(t))r.push(t);else if(Et(t)){const e=t.nodeName.toLowerCase();if("select"===e){const e=t.childNodes.length,r=t.selectedIndex;if(0!==e&&-1!==r){const e=t.options[r],n="<select><option>"+(e.textContent||e.innerText)+"</option></select>";i.push(n),s+=n.length}break}-1===kd.indexOf(e)&&r.push(t)}}}}(r,i,n),n.join("").replace(/\s{2,}/g," ").replace(/>\s*</g,"><")}function vt(e){const t=Boolean(e.offsetWidth||e.offsetHeight);return e&&e.getClientRects?Boolean(t||e.getClientRects().length):e&&e.currentStyle?t&&"hidden"!==e.currentStyle.visibility:t}function yt(e,t,i){const r=[],n=e.tagName.toLowerCase();if(r.push("<"+n),function(e){for(let t=e.lastChild;t;t=t.previousSibling)if(bt(t)&&wt(t))return!0;return!1}(e))for(let o=0;o<t.length;o++)e.hasAttribute(t[o])&&r.push(" "+t[o]+'="'+e.getAttribute(t[o])+'"');r.push(">"),i.push(r.join(""))}function wt(e){if(!e.lastChild)return Od.test(e.innerText);for(let t=e.lastChild;t;t=t.previousSibling){if(!t.lastChild&&Od.test(t.innerText))return!0;for(let e=t.lastChild;e;e=e.previousSibling)if(Od.test(e.innerText))return!0}return!1}function bt(e){return 3===e.nodeType}function Et(e){return 1===e.nodeType}function _t(e,t){const i=window,r=i.document;if(t){const e=function(e){return e.location.host}(r);if((" "+Id+" ").indexOf(" "+e+" ")>-1)return t}let n=St(e,r);if("t\n"===n&&i.top!==i.self)try{n=St(e,i.parent.document)}catch(o){}return ct(n,e)}function St(e,t){const i=[];let r=0;i.push("t"+(t.title||"")),r+=i[0].length;for(let n=1;n<4&&r<e;n++){const e=t.getElementsByTagName("h"+n),o=e.length;for(let t=0;t<o;t++){const o=Tt(e[t]);r+=o.length,i.push(""+n+o)}}return i.join("\n")+"\n"}function Tt(e){const t=[];let i="";if(!e)return i;for(t.push(e);t.length>0;){if(3===(e=t.pop()).nodeType)i+=e.nodeValue+" ";else if(e.childNodes&&e.childNodes.length>0){const i=e.childNodes;for(let e=i.length-1;e>=0;e--)t.push(i[e])}}return i.replace(/\s+/g," ")}function Ct(e,t){const i=window;let r,n;if(t&&(" "+Vd+" ").indexOf(" "+function(e){return e.location.host}(i)+" ")>-1)return t;if(Nd&&Nd+Rd>Number(new Date))return Dd;if(function(e){return e.top!==e.self}(i))if(n=ft(i),""!==(r=gt(i,"body",["class"])))n=ft(i),r=gt(i,"body",["class"]);else try{n=ft(i.parent),r=gt(i.parent,"body",["class"])}catch(a){}else n=ft(i),r=gt(i,"body",["class"]);const o=["<html>",n,r,"</html>"].join(""),s=function(e,t){return ut(_t(e,t))}(Math.min(e/2,1800),t);return Dd=pt(o,s,e),Nd=Number(new Date),Dd}function kt(e){let t;try{t=JSON.stringify(e)}catch(i){}return t}function Pt(e){return Boolean(e.YA_TURBO_PAGES)}function Ot(e){return void 0===e&&(e=window),Boolean(e.ampSeen)}function It(e){void 0===e&&(e=window);let t="";const i=e.context,r=e.Ya;return Ot(e)&&i&&i.master.Ya&&i.master.Ya.getSkipToken?t=i.master.Ya.getSkipToken():r&&r.Context&&r.Context.AdvManager&&r.Context.AdvManager.getSkipToken&&(t=r.Context.AdvManager.getSkipToken()),t}function Rt(){const e=function(){const e=window;let t=0;return e.Ya&&e.Ya.Context&&e.Ya.Context.AdvManager&&e.Ya.Context.AdvManager.getCapturedCount&&(t=e.Ya.Context.AdvManager.getCapturedCount()),t}();return Ud()+e}function Nt(){return(Nt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function Dt(){return(Dt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function Vt(e,t){void 0===t&&(t="");const{params:i,bids:r,matchIdDirect:n=!1}=e,o=Dt({},function(e){let{win:t=window,cookies:i,layoutConfig:r,isTurbo:n=Pt(t),testtag:o,pr1:s,pr:a,loaderVer:d,bundleVer:l,date:c}=e;const h=Sd(Kd,e=>e.test(t.location.hostname));return qd({win:t,date:c,pr1:s,pr:a,testtag:o,isTurbo:n,layoutConfig:r,cookies:i,addsSsSkipToken:h,loaderVer:d,bundleVer:l})}(e),{},i||{},{},n?{"matchid-direct":1}:{});if(Ys(Qd,e=>{o[e]=void 0}),o.pk)try{o.pk=decodeURIComponent(o.pk)}catch(s){}if(r){const e=r.map(e=>Dt({},e,{placement_id:e.placement_id?String(e.placement_id):void 0}));e.toJSON&&(e.toJSON=void 0),o.bids=ct(kt(e)||"")}return o.grab=Ct(Xd-t.length),o.utf8="\u2713",o}function xt(e){!function(e){const{ownerId:t}=e;if(!t)throw new Error("there is no `ownerId` for getAdfoxBulkUrl()")}(e);const t=function(e){let t,{adblock:i,useXhr:r,ownerId:n,domain:o,win:s=window}=e;return t=r?"getBulk/v2":i?"getCodeTest":"prepareCode",("http:"===s.location.protocol?"http:":"https:")+"//"+(o||Zd)+("/"+n+"/"+t)}(e);return{base:t,queryParams:Vt(e,t)}}function Lt(e){const t=e.trim();return"//"===t.substr(0,2)||"http://"===t.substr(0,7)||"https://"===t.substr(0,8)}function Mt(){return(Mt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function Bt(e){const t=jo(window),i=function(e){const{base:t,queryParams:i}=xt(e);return V(t,i)}(Mt({},e,{testtag:Ks,layoutConfig:new Bd,useXhr:!0}));if(!Lt(i))throw new Cs({code:"CANNOT_CREATE_ADFOX_URL",details:{adFoxParameters:e}});return t?t(i):i}function Ft(e){const t=function(e){try{return Object(Ed.isString)(e)?JSON.parse(e):void 0}catch(t){return}}(e),i=[];if(!Object(Mo.isObject)(t))throw new Cs({code:"ADFOX_AD_DATA_IS_NOT_VALID_JSON_OBJECT",details:{adFoxDataString:e}});const{error:r,data:n}=t;if(Array.isArray(r)&&r.length>0)throw new Cs({code:"ADFOX_AD_DATA_ERROR",details:{adFoxData:t}});if(!Array.isArray(n))throw new Cs({code:"INVALID_ADFOX_DATA_FORMAT",details:{adFoxData:t}});const o=n.filter((e,r)=>{if(!Object(Mo.isObject)(e)||!Object(Mo.isObject)(e.attributes))return i.push(new Cs({code:"INVALID_ADFOX_CREATIVE_DATA",details:{adFoxData:t,index:r}})),!1;const{campaignId:n,vastBase64:o}=e.attributes;return"string"===typeof o&&o.length>0||("string"===typeof n&&n.length>0||(i.push(new Cs({code:"NO_REQUIRED_PARAMETERS_IN_ADFOX_CREATIVE",details:{adFoxData:t,index:r}})),!1))});if(0===o.length)throw new Cs({code:"NO_ADS_IN_ADFOX_DATA",details:{adFoxData:t}});return o.length>1&&i.push(new Cs({code:"EXTRA_ADFOX_DATA",details:{adFoxData:t}})),{creative:o[0].attributes,errors:i}}function Ut(e){const t=Bt(e);return Ae({url:t,method:"GET"}).catch(i=>{throw new Cs(i,{code:"ADFOX_AD_DATA_LOADING_ERROR",details:{adFoxParameters:e,adFoxUrl:t}})}).then(e=>{const{creative:t,errors:i}=Ft(e.responseText);return st(i),t})}function Ht(){return(Ht=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function jt(e){if(!Object(Mo.isObject)(e))return{config:{},errors:[]};const t={},i=[];var r;return void 0!==e.adFoxParameters&&(r=e.adFoxParameters,Object(Mo.isObject)(r)&&kt(r)&&"string"===typeof r.containerId&&"string"===typeof r.ownerId?t.adFoxParameters=e.adFoxParameters:i.push(new Cs({code:"INVALID_AD_FOX_PARAMETER",details:{adConfig:e}}))),{config:t,errors:i}}function zt(){return(zt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function Wt(e){if(!Object(Mo.isObject)(e))return{};const{partnerId:t,category:i,videoContentId:r,startWatchedTime:n,watchedTimeSinceAd:o,additionalParams:s}=e;return zt({},function(e){return T({vmapLoadTimeout:void 0===e.vmapLoadTimeout?void 0:Number(e.vmapLoadTimeout),blockInfoLoadTimeout:void 0===e.blockInfoLoadTimeout?void 0:Number(e.blockInfoLoadTimeout)})}(e),{partnerId:void 0===t?void 0:Number(t),category:void 0===i?void 0:Number(i),videoContentId:"string"===typeof r?r:void 0,startWatchedTime:Je(n)?n:void 0,watchedTimeSinceAd:Je(o)?o:void 0,additionalParams:Gt(s)})}function Yt(){return(Yt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function Gt(e){if(!e)return;const t={},i=["string","number","boolean"];for(const r in e)e.hasOwnProperty(r)&&i.indexOf(typeof e[r])>=0&&(t[r]=e[r]);return t}function qt(e){if(!Object(Mo.isObject)(e))return{};const{config:t,errors:i}=jt(e);return st(i),Yt({},t,{},Wt(e),{},function(e){return{width:void 0===e.width?void 0:String(e.width),height:void 0===e.height?void 0:String(e.height),videoContentId:void 0===e.videoContentId?void 0:String(e.videoContentId),videoContentName:void 0===e.videoContentName?void 0:String(e.videoContentName),videoPublisherId:void 0===e.videoPublisherId?void 0:String(e.videoPublisherId),videoPublisherName:void 0===e.videoPublisherName?void 0:String(e.videoPublisherName),videoGenreId:Array.isArray(e.videoGenreId)?e.videoGenreId.map(String):void 0===e.videoGenreId?void 0:String(e.videoGenreId),videoGenreName:Array.isArray(e.videoGenreName)?e.videoGenreName.map(String):void 0===e.videoGenreName?void 0:String(e.videoGenreName),musicArtistId:void 0===e.musicArtistId?void 0:String(e.musicArtistId),musicGenreId:"string"===typeof e.musicGenreId?e.musicGenreId:void 0,musicGenreName:"string"===typeof e.musicGenreName?e.musicGenreName:void 0,tagsList:Array.isArray(e.tagsList)?e.tagsList.map(String):void 0,extParam:void 0===e.extParam?void 0:String(e.extParam),charset:void 0===e.charset?void 0:String(e.charset),targetRef:void 0===e.targetRef?void 0:String(e.targetRef),distrId:void 0===e.distrId?void 0:String(e.distrId)}}(e),{vastUrl:void 0===e.vastUrl?void 0:String(e.vastUrl),vast:void 0===e.vast?void 0:String(e.vast),adFoxUrl:void 0===e.adFoxUrl?void 0:String(e.adFoxUrl),adFoxUrlVast:void 0===e.adFoxUrlVast?void 0:String(e.adFoxUrlVast),adFoxUrlMidRoll:void 0===e.adFoxUrlMidRoll?void 0:String(e.adFoxUrlMidRoll),adFoxUrlPauseRoll:void 0===e.adFoxUrlPauseRoll?void 0:String(e.adFoxUrlPauseRoll),adFoxUrlPostRoll:void 0===e.adFoxUrlPostRoll?void 0:String(e.adFoxUrlPostRoll),xml:void 0===e.xml?void 0:String(e.xml),desiredBitrate:void 0===e.desiredBitrate?void 0:Number(e.desiredBitrate),secureMode:rl(e)})}function Xt(e){return void 0===e?e:Array.isArray(e)?e.join("\n"):String(e)}function Kt(e){return"number"===typeof e.repeatNumber}function Qt(){return(Qt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function Zt(e){let{adConfig:t,adBreak:i,random:r,adPlacementOptions:n}=e;return l(zo)?i.adTagURI:function(e){let{adConfig:t,adBreak:i,random:r,adPlacementOptions:n=ld}=e;const{adTagURI:o}=i;return Ve(o)?Le({url:V(o,sl(t,i,r)),options:n}):o}({adConfig:t,adBreak:i,random:r,adPlacementOptions:n})}function Jt(e){const t=e.ownerDocument.createElement("iframe");t.scrolling="no",t.setAttribute("allowfullscreen",""),t.style.display="block",e.appendChild(t);const i=t.contentDocument;return i.open(),i.close(),i.body.style.margin="0",t.style.borderWidth="0",t}function $t(e){e.src="",C(e)}function ei(e){return hl.indexOf(e.toLowerCase())>-1}function ti(e){void 0===e&&(e=window);const t=v(e).match(/Tizen ([\d]+)\.([\d]+)/);if(!t)return{major:-1,minor:-1};const[,i,r]=t;return{major:parseInt(i,10),minor:parseInt(r,10)}}function ii(e,t){return function(e,t,i){if(e.length<1)return;let[r]=e,n=t(r);for(let o=1;o<e.length;o++){const s=e[o],a=t(s);i(a,n)<0&&(r=s,n=a)}return r}(e,t,(e,t)=>e-t)}function ri(e){let t;void 0===e&&(e=window);try{t=e.devicePixelRatio}catch(i){}return t||1}function ni(e){let{clientWidth:t,clientHeight:i}=e;const r=function(e){void 0===e&&(e=window);const{navigator:t}=e,{connection:i={}}=t;if("number"===typeof i.downlink)return i.downlink;if("number"===typeof i.downlinkMax)return i.downlinkMax;if("string"===typeof i.type||"number"===typeof i.type)switch(i.type){case kl.BLUETOOTH:return 3;case Cl.CELL_2G:return.384;case Cl.CELL_3G:case kl.CELLULAR:return 2;case kl.WIMAX:return 37;case kl.NONE:return 0;case Cl.ETHERNET:case kl.ETHERNET:case Cl.WIFI:case kl.WIFI:case kl.MIXED:return 10;case Cl.UNKNOWN:case kl.UNKNOWN:case kl.OTHER:}return-1}();if(r>0)return Math.round(1e3*r*Il);{const e=Tl(t,i)*ri();return g(Math.round(2.64886*e-1189.26038),Pl,Ol)}}function oi(e){return"number"===typeof e&&e>0}function si(e){return!!Object(Mo.isObject)(e)&&("string"===typeof e.url&&(!!e.url.trim()&&("string"===typeof e.type&&!!e.type.trim())))}function ai(e){let{width:t,height:i}=e;return Tl(t,i)}function di(e){const{size:{clientWidth:t,clientHeight:i},forPreloading:r=!1}=e,n=e.mediaFiles.filter(si);let{desiredBitrate:o=NaN}=e;o>0||(o=ni(e.size));const s=e=>-1!==O(e).hostname.indexOf("proxy.video.yandex.net"),a=n.every(e=>{let{url:t}=e;return s(t)}),d=ri(),l=n.filter(e=>{let{type:t,url:i}=e;return r?cl(t)&&bl(t)&&(!!a||!s(i)):cl(t)}),c=Dl(l,o);if(c.length>0&&!r)return c[0];const h=l.filter(e=>{let{width:r,height:n,bitrate:s,type:a}=e;return r<=t*d*Vl&&n<=i*d*Vl&&"number"===typeof s&&s*("video/ogg"===a?Ml:1)<=o*xl}),u=Math.max(...h.map(ai)),p=ii(h.filter(e=>(function(e,t,i){return void 0===i&&(i=Sl),Math.abs(e-t)<=i})(ai(e),u,Ll)),e=>{let{bitrate:t}=e;return t}),A=ii(l,e=>{let{bitrate:t}=e;return t});return p||A}function li(e){if(ys&&console&&console.error){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];console.error(e,...i)}}function ci(e){void 0===e&&(e=window);const{navigator:t}=e,{connection:i={}}=t;if(!ec&&"number"===typeof i.downlink)return i.downlink;if("number"===typeof i.downlinkMax)return i.downlinkMax;const r=i.type;if("string"===typeof r||"number"===typeof r)switch(r){case ic.BLUETOOTH:return 3;case tc.CELL_2G:return.384;case tc.CELL_3G:case ic.CELLULAR:return 2;case ic.WIMAX:return 37;case ic.NONE:return 0;case tc.ETHERNET:case ic.ETHERNET:case tc.WIFI:case ic.WIFI:case ic.MIXED:return 10;case tc.UNKNOWN:case ic.UNKNOWN:case ic.OTHER:}return-1}function hi(e){let{clientWidth:t,clientHeight:i}=e;const r=ci();if(r>0)return Math.round(1e3*r*oc);{const e=Tl(t,i)*ri();return g(Math.round(2.64886*e-1189.26038),rc,nc)}}function ui(e){let{trackingUrls:t,options:i}=e;return Array.isArray(t)?t.filter(Lt).map(e=>Le({url:e,options:i})).map(je):[]}function pi(e){let{eventName:t,trackingEventDetails:i,trackingUrls:r,options:{devicePixelRatio:n,downlink:o,relativeSizeRatio:s,screenSize:a,size:d,visibility:l,videoContentSize:c,videoPixelRatio:h,videoFramesInfo:u}}=e;(Es||"impression"===t)&&Js.eventToStats("VastTracking_"+t,{eventName:t,trackingUrls:r,visibility:l,devicePixelRatio:n,downlink:o,isVisibilityReliable:$s,relativeSizeRatio:s,screenSize:a,size:d,trackingEventDetails:i,videoContentSize:c,videoPixelRatio:h,videoFramesInfo:u})}function Ai(e){return pi(e),ui(e)}function fi(e){void 0===e&&(e=window);const t=e.MediaSource||e.WebKitMediaSource;return t&&l(t.isTypeSupported)&&!function(e){void 0===e&&(e=window);const t=e.SourceBuffer||e.WebKitSourceBuffer;return!!t&&!(t.prototype&&l(t.prototype.appendBuffer)&&l(t.prototype.remove))}(e)?t:void 0}function mi(e){let{type:t}=e;return cd.indexOf(t)>-1?Gl.js:Gl.video}function gi(e){let{imhoParams:t,skipTime:i,skipOffset:r}=e;return t&&t.resetSkipDelay?gc:Je(r)?Je(i)?i:r:gc}function vi(){return(vi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function yi(){return(yi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function wi(e){let t,{commonParameters:{vastTimeout:i,wrapperMaxCount:r,wrapperTimeout:n},isAdFox:o,url:s,adPlacementOptions:a}=e;return{adPlacementOptions:a,vastSourceType:t=o||s&&De(s)?"AD_FOX":s&&xe(s)?"YANDEX":"EXTERNAL",vastTimeout:i,ignoreVastVersion:!1,wrapperMaxCount:r,wrapperTimeout:n}}function bi(e,t,i){async function r(){try{const r=e.vast;if(r)return await vd.fromXMLString(r,wi({commonParameters:t,isAdFox:!1,adPlacementOptions:i}));{const r=(()=>e.vastUrl?e.vastUrl:Zt({adConfig:e,adBreak:t,random:Math.random(),adPlacementOptions:i}))();return await vd.load(r,wi({commonParameters:t,isAdFox:!1,url:r,adPlacementOptions:i}))}}catch(r){throw We(r),r}}void 0===i&&(i=ld);const{adType:n}=t,o=t.adFoxParameters||e.adFoxParameters;if(o)return async function(e,t){return new Jd(e,t).loadVastPromise}(yi({},e,{adFoxParameters:o}),t);const s=e.adFoxUrlVast,a=function(e,t){let i;if(t===$d.midroll&&e.adFoxUrlMidRoll?i=e.adFoxUrlMidRoll:t===$d.pauseroll&&e.adFoxUrlPauseRoll?i=e.adFoxUrlPauseRoll:t===$d.postroll&&e.adFoxUrlPostRoll?i=e.adFoxUrlPostRoll:e.adFoxUrl&&(i=e.adFoxUrl),i){const{fmt:e}=N(i);return e?i:V(i,{fmt:"1"})}}(e,n);return Boolean(a||s)?(Js.event({name:"UsingOldAdFoxParameters",probability:ws,data:{adConfig:e,adBreak:t}}),(()=>s?vd.fromXMLString(s,wi({commonParameters:t,isAdFox:!0,adPlacementOptions:i})):a?vd.load(Le({url:a,options:i}),wi({commonParameters:t,isAdFox:!0,url:a,adPlacementOptions:i})):Promise.reject(new Error("AdSDK Error: AdManager: bad condition: adFoxUrl and adFoxVastString")))().catch(e=>(We(e),r()))):r()}async function Ei(e){let t,{adConfig:i,adBreak:r,adPlacementOptions:n}=e;try{t=await bi(i,r,n)}catch(d){throw d.details||(d.details={}),d.details.adConfig=i,d}const o=t.ads.map(e=>(e.vast=t,new wc(r,e,i))),s=function(e,t,i){const r=i.adType===$d.overlay;return e.filter(e=>{const{isNonLinear:n}=e.vastAd;return n===r||(e.trackError(new Cs({code:n?"CANNOT_PLAY_NONLINEAR_IN_LINEAR_AD_BREAK":"CANNOT_PLAY_LINEAR_IN_NONLINEAR_AD_BREAK",details:{adConfig:t,adBreak:i}})),!1)})}(o,i,r),a=new bc(s);if(0===a.mediaAds.length)throw new Cs({code:"NO_AD_SECTION",details:void 0});if(a.hasMedia())return a;if(a.hasFilteredOutMediaFiles()){const e=xo(Vo(o.map(e=>e.vastAd.mediaFiles)),Ze);throw new Cs({code:"ALL_MEDIA_FILES_FILTERED_OUT",details:{adConfig:i,unfilteredMediaFiles:e}})}throw new Cs({code:"NO_AD_TO_DISPLAY",details:void 0})}function _i(e,t){return e.filter(e=>e.adType===t)}function Si(e,t){const i=[],r=[];return Ys(e,(n,o)=>{t(n,o,e)?i.push(n):r.push(n)}),[i,r]}function Ti(e){return function(e){return Boolean(e.PointerEvent)}(e)&&function(e){const t=e.navigator||{},{msMaxTouchPoints:i,maxTouchPoints:r}=t;return i||r||0}(e)>0&&!Tc(e)}function Ci(e,t){if(!l(e.matchMedia))return!1;const i=e.matchMedia(t);return Object(Mo.isObject)(i)&&Boolean(i.matches)}function ki(e){return void 0===e&&(e=window),Ti(e)||function(e){return Ci(e,Cc)}(e)||function(e){return Ci(e,kc)}(e)||function(e){const{DocumentTouch:t}=e;return Boolean(t)&&e.document instanceof t}(e)||function(e){return"ontouchstart"in e}(e)}function Pi(e){const t=e.getRootNode;if(l(t))return t.call(e);let i=e;for(;i.parentNode;)i=i.parentNode;return i}function Oi(e,t){return void 0===t&&(t=window),("function"===typeof t.getComputedStyle?t.getComputedStyle(e,null):e.currentStyle)||{}}function Ii(e){return!!e&&"ShadowRoot"===Yn(e)}function Ri(e){const t=e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;let i=e;for(;i;){if(i&&t.document.body.contains(i))return!0;const e=Pi(i);if(!Ii(e)||!Oc(e.host))return!1;i=e.host}return!1}function Ni(e,t,i){const r=()=>e.map(e=>e.getValue());let n=t(...r());i(n);const o=()=>{const e=t(...r());n!==e&&(n=e,i(e))},s=e.map(e=>e.add(o));return()=>{u(s)}}function Di(e){e&&"function"===typeof e.catch&&e.catch(e=>void 0)}function Vi(e,t){F(t).forEach(i=>{const r=t[i];null===r?e.removeAttribute(i):e.setAttribute(i,r)})}function xi(e,t){const i={};return F(t).forEach(t=>{i[t]=e.getAttribute(t)}),Vi(e,t),ae(()=>{Vi(e,i)})}function Li(e,t){if(void 0===t&&(t=window),!t||!t[e]||!t[e].prototype)return;const{play:i}=t[e].prototype;return i&&Object(Sn.checkNativeCode)(i)?i:void 0}function Mi(e){if(!ll)return Promise.reject();const t=(i=e.play)[Ic]||i;var i;if(Object(Sn.checkNativeCode)(t))return t.call(e);const r=Li("HTMLVideoElement")||Li("HTMLMediaElement");if(r)return r.call(e);const n=document.createElement("div");n.style.display="none",document.body.appendChild(n);const o=Li("HTMLMediaElement",Jt(n).contentWindow);if(o){const t=o.call(e);return C(n),t}return e.play()}function Bi(e,t){void 0===t&&(t={});let i=0;const r=[],n=(t,n)=>{r.push(a(e,t,n,Mc)),clearTimeout(i)},o=()=>u(r),s=new Promise((r,o)=>{const s=t=>{e.paused&&o(t)},a=Mi(e);if(s(Lc.VideoTagPaused),n("durationchange",()=>s(Lc.VideoTagPausedAfterDurationChange)),n("error",()=>s(Lc.VideoTagPausedAfterError)),n("pause",()=>o(Lc.PauseEvent)),n("playing",()=>{r(Lc.PlayingEvent)}),a)t.useProgressEvent&&n("progress",()=>{r(Lc.ProgressEvent)}),a.then(()=>r(Lc.PromiseResolve)).catch(e=>o(function(e){return e?Lc.PromiseReject+"["+e.code+"]["+e.name+"]["+e.message+"]":Lc.PromiseReject}(e)));else{const{timeoutForNonPromisePlay:e}=t;"number"===typeof e&&e>0&&(i=window.setTimeout(()=>{o(Lc.Timeout)},t.timeoutForNonPromisePlay))}});return s.then(o,o),s}function Fi(){return(Fi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function Ui(e){let{canPlayUnMuted:t,canPlayMuted:i,detectionMethod:r}=e;return{canPlayUnMuted:t,canPlayMuted:i,requireMute:!t&&i,requireUserGesture:!t&&!i,detectionMethod:r}}function Hi(e){const t={};return"object"===typeof e&&F(e).forEach(i=>{const r=e[i];Array.isArray(r)&&(t[i]=r.filter(e=>"string"===typeof e))}),t}function ji(){const e={};for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return i.forEach(t=>{F(t).forEach(i=>{const r=e[i]||[],n=t[i]||[];e[i]=[...r,...n]})}),e}function zi(){return(zi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function Wi(e){const t="number"===typeof e.bufferFullTimeout?Math.min(e.bufferFullTimeout,Zl):void 0;return void 0!==e.skipDelay&&(!Je(e.skipDelay)||e.skipDelay<0)&&Js.error({error:new Cs({code:"INCORRECT_SKIP_DELAY_FORMAT",details:{value:e.skipDelay,stringValue:String(e.skipDelay),type:typeof e.skipDelay}})}),zi({},function(e){return{autoplay:"autoplay"in e?Boolean(e.autoplay):void 0,pauseAllowed:"pauseAllowed"in e?Boolean(e.pauseAllowed):void 0,pauseOnClickThrough:void 0===e.pauseOnClickThrough||Boolean(e.pauseOnClickThrough),visitSiteShow:"visitSiteShow"in e?Boolean(e.visitSiteShow):void 0,qualityLevel:"qualityLevel"in e?Number(e.qualityLevel):void 0,poster:"string"===typeof e.poster?String(e.poster):void 0,showGuiForVpaid:"showGuiForVpaid"in e?Boolean(e.showGuiForVpaid):void 0,backgroundBlur:void 0===e.backgroundBlur?void 0:Boolean(e.backgroundBlur)}}(e),{isClickable:"isClickable"in e?Boolean(e.isClickable):void 0,title:"string"===typeof e.title?e.title.trim():void 0,description:"string"===typeof e.description?e.description:void 0,skipDelay:"number"===typeof e.skipDelay?e.skipDelay:void 0,showGuiForVpaid:"showGuiForVpaid"in e?Boolean(e.showGuiForVpaid):void 0,videoTimeout:"videoTimeout"in e?Number(e.videoTimeout):void 0,vpaidTimeout:"vpaidTimeout"in e?Number(e.vpaidTimeout):void 0,bufferFullTimeout:t,bufferEmptyLimit:"bufferEmptyLimit"in e?Number(e.bufferEmptyLimit):void 0,clickThroughUrl:"string"===typeof e.clickThroughUrl?e.clickThroughUrl:void 0,clickThroughConfirmation:"boolean"===typeof e.clickThroughConfirmation?e.clickThroughConfirmation:void 0,trackingEvents:e.trackingEvents?Hi(e.trackingEvents):{},controlsSettings:Yi(e)})}function Yi(e){const t=Zc(Jc);if(!Object(Mo.isObject)(e))return t;const i=(e,i)=>{void 0===t.controlsVisibility[i]&&"boolean"===typeof e&&(t.controlsVisibility[i]=e)};return i(e.showTimeLeft,ql.timeLeft),i(e.showSoundButton,ql.mute),i(e.showTitle,ql.title),i(e.showSkipButton,ql.skip),Object(Mo.isObject)(e.controlsSettings)&&Object(Mo.isObject)(e.controlsSettings.controlsVisibility)&&k(e.controlsSettings.controlsVisibility,(e,i)=>{Xl.indexOf(i)>-1&&"boolean"===typeof e&&(t.controlsVisibility[i]=e)}),t}function Gi(e){if(!Object(Mo.isObject)(e))return{};const{stickTo:t,stickyColorScheme:i}=e;return T({stickTo:qi(t,$c),stickyColorScheme:qi(i,eh)})}function qi(e,t){if("string"!==typeof e)return;const i=e.toLowerCase();return ue(t).indexOf(i)>-1?i:void 0}function Xi(){return(Xi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function Ki(e){return T(Xi({},Gi(e),{repeat:void 0===e.repeat?void 0:Boolean(e.repeat),vastTimeout:void 0===e.vastTimeout?void 0:Number(e.vastTimeout),wrapperTimeout:void 0===e.wrapperTimeout?void 0:Number(e.wrapperTimeout),wrapperMaxCount:void 0===e.wrapperMaxCount?void 0:Number(e.wrapperMaxCount),bufferFullTimeout:void 0===e.bufferFullTimeout?void 0:Number(e.bufferFullTimeout),bufferEmptyLimit:void 0===e.bufferEmptyLimit?void 0:Number(e.bufferEmptyLimit),timeLeftShow:void 0===e.timeLeftShow?void 0:Boolean(e.timeLeftShow),visitSiteShow:void 0===e.visitSiteShow?void 0:Boolean(e.visitSiteShow),videoTimeout:void 0===e.videoTimeout?void 0:Number(e.videoTimeout),vpaidTimeout:void 0===e.vpaidTimeout?void 0:Number(e.vpaidTimeout)}))}function Qi(){const e=Zc(Jc);for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return i.filter(e=>e).reduce((e,t)=>(function(e,t){const i=Zc(Jc);for(const r of ph)"boolean"===typeof t.controlsVisibility[r]?i.controlsVisibility[r]=t.controlsVisibility[r]:i.controlsVisibility[r]=e.controlsVisibility[r];return i})(e,t),e)}function Zi(e){let{width:t,height:i}=e;const r=[t,i].map(e=>Math.round(e)),n=Math.min(...r),o=Math.max(...r);return vh?n>=mh&&o>=gh:n>=Ah&&o>=fh}function Ji(){return(Ji=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function $i(e){let{win:t=window,slotSize:i,slotVisibilityRatio:r,videoContentSize:n,videoPlaybackQuality:o}=e;const s=wh(t),a=s.width*s.height,d=i.width*i.height,l=0===a?0:d/a,c=ri(t),h=ci(t),u=function(e){let{videoContentSize:t,slotSize:i}=e;if(0===t.height||0===i.height)return-1;const r=t.width/t.height;return i.width/i.height>r?t.height/i.height:t.width/i.width}({videoContentSize:n,slotSize:i}),{droppedVideoFrames:p,totalVideoFrames:A}=o;return{visibility:r,size:i,relativeSizeRatio:l,screenSize:s,devicePixelRatio:c,downlink:h,videoContentSize:n,videoPixelRatio:u,videoFramesInfo:Ji({},o,{droppedVideoFramesRatio:ot(A)&&Je(p)?p/A:void 0})}}function er(e){return Oc(e)}function tr(e,t,i){function r(){0!==s&&(clearTimeout(s),s=0)}let{threshold:n=Eh,delay:o=_h}=void 0===i?{}:i,s=0,d=0,l=0;const c=a(e,"click",(function(e){0!==s&&(r(),t(e))}),{passive:!0}),h=a(e,"touchstart",(function(e){1===e.touches.length&&(d=e.changedTouches[0].screenX,l=e.changedTouches[0].screenY,r(),s=window.setTimeout(r,o))}),{passive:!0}),u=a(e,"touchend",(function(e){0!==s&&(r(),t(e))}),{passive:!0}),p=a(e,"touchmove",(function(e){if(0===s||!Object(Mo.isObject)(e.touches)||1!==e.touches.length)return void r();const{screenX:t,screenY:i}=e.changedTouches[0];if(o=t,a=i,Math.abs(d-o)>n||Math.abs(l-a)>n)r();else var o,a}),{passive:!0});return()=>{c(),h(),u(),p()}}function ir(e,t){const i=function(e){void 0===e&&(e=window);const{document:t={}}=e;return Sh.filter(e=>{let{enabled:i}=e;return i in t})}(e);if(i.length>0)return i[0];const r=function(e,t){return void 0===e&&(e=window),void 0===t&&(t=e.HTMLVideoElement&&e.HTMLVideoElement.prototype||{}),Sh.filter(e=>{let{enabled:i}=e;return i in t})}(e,t);return r.length>0?r[0]:void 0}function rr(e,t){const{paused:i}=e;var r;t(),i||(r=e.play())&&"function"===typeof r.catch&&r.catch(e=>void 0)}function nr(e,t,i,r){"undefined"!==typeof i&&"undefined"!==typeof t&&(i+=!Wh.test(t)&&i>>>0?"px":"",e.style.setProperty?e.style.setProperty(t,i,r?"important":""):e.style.cssText+=";"+t+": "+i+(r?"!important":""))}function or(){return(or=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function sr(e){const{text:t,textColor:i,isVisible:r}=e||Au;return{text:t||Au.text,textColor:i||Au.textColor,isVisible:"boolean"===typeof r?r:Au.isVisible}}function ar(e,t){if(void 0===e)return[];if(!Array.isArray(e))return Js.error({error:new Cs({code:"INVALID_MEDIA_FILES_PARAMETER_IN_AD_PARAMETERS",details:{adParameters:t}})}),[];if(0===e.length)return Js.error({error:new Cs({code:"NO_MEDIA_FILES_IN_AD_PARAMETERS",details:{adParameters:t}})}),[];const i=e.filter(si);return i.length!==e.length&&Js.error({error:new Cs({code:"AD_PARAMETERS_CONTAINS_INVALID_MEDIA_FILES",details:{adParameters:t}})}),i}function dr(e,t,i,r){const n=e.ownerDocument.createElement("iframe");n.scrolling="no",n.setAttribute("allowfullscreen",""),n.style.display="block",e.appendChild(n);const s=(e,t)=>{e.open(),e.close(),e.body.style.margin="0",n.style.borderWidth="0",e.body.style.width="100%",e.body.style.height="100%",i(n,t)};if(n.contentDocument)return s(n.contentDocument,!1),o;{const{promise:e,clear:i}=go(t),o=a(n,"load",()=>{i(),s(n.contentDocument,!0)},{once:!0});return e.then(()=>{o(),r()}),()=>{o(),i()}}}function lr(e,t){const i={};return F(e).forEach(r=>{t(e[r],r)&&(i[r]=e[r])}),i}function cr(){return(cr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function hr(){return(hr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function ur(){return(ur=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function pr(){return(pr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function Ar(e){return Array.isArray(e)?e.filter(e=>"string"===typeof e):[]}function fr(e){return Object(Mo.isObject)(e)?te(Mu,(t,i)=>Ar(e[i])):Zc(Mu)}function mr(e){if(!Object(Mo.isObject)(e))return;const{ids:t,partnerCode:i}=e;return"string"===typeof i?Object(Mo.isObject)(t)?{partnerCode:i,ids:lr(t,e=>"string"===typeof e)}:{partnerCode:i,ids:{}}:void 0}function gr(e){if(!e)return{parameters:void 0,errors:[new Ru({code:"AD_PARAMETERS_ABSENT_IN_MEASURER",details:{adParametersString:e}})]};let t={};try{t=JSON.parse(e)}catch(p){return{parameters:void 0,errors:[new Ru({code:"INVALID_AD_PARAMETERS_JSON_IN_MEASURER",details:{adParametersString:e}})]}}const{viewability:i,encounters:r,dwell:n,start:o,trackingEvents:s,viewedComplete:a,measurers:d,weborama:l,moat:c}=t,{measurers:h,errors:u}=function(e){const t=[];return Object(Mo.isObject)(e)?{measurers:lr(e,(i,r)=>Object(Mo.isObject)(i)?-1!==Lu.indexOf(r)||(t.push(new Ru({code:"UNSUPPORTED_MEASURER",details:{measurerName:r,measurersParameters:e}})),!1):(t.push(new Ru({code:"MEASURER_PARAMS_IN_NOT_AN_OBJECT",details:{measurerName:r,measurersParameters:e}})),!1)),errors:t}:(void 0!==e&&t.push(new Ru({code:"INVALID_MEASURERS_PARAMETERS",details:{measurersParameters:e}})),{measurers:{},errors:t})}(d);return{parameters:{measurers:h,viewability:fr(i),dwell:fr(n),trackingEvents:ji(Hi(s),{encounters:Ar(r),viewedComplete:Ar(a),start:Ar(o)}),weborama:l,moat:mr(c)},errors:u}}function vr(e){return e<2?1e3:2===e?3e3:5e3}function yr(e,t,i){return void 0===t&&(t={}),void 0===i&&(i={}),()=>{const r=e(),{onStop:n=o,onInitMeasurer:s=o,onTrackEvent:a=o,onExecutionError:d=o,onAdError:l=o,onPlayingStateChange:c=o,onSlotHoverStateChange:h=o,onSlotVisibilityStateChange:u=o,onSlotSizeChange:p=o}=i,{getAdditionalTrackingParameters:A=o}=t;return function(e,t){let{vpaidWillCallMethod:i,vpaidWillSetProperty:r,measurableVpaidDidCreate:n}=t;const o=cr({},te(gu,(e,t)=>{return function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return i(t,r)}}),{},te(lr(bu,(t,i)=>"function"===typeof e[i]),(t,i)=>()=>e[i]()));return F(vu).forEach(t=>{Object.defineProperty(o,t,{configurable:!0,enumerable:!0,get:()=>e[t],set:e=>{r(t,e)}})}),n(o),o}(r,new Bu(r,{getAdditionalTrackingParameters:A},{onStop:n,onInitMeasurer:s,onTrackEvent:a,onExecutionError:d,onAdError:l,onPlayingStateChange:c,onSlotVisibilityStateChange:u,onSlotHoverStateChange:h,onSlotSizeChange:p}))}}function wr(e){const t=new Wu(e),i=(r=t,F(yu).forEach(e=>{const t=yu[e];Object.defineProperty(r,e,{configurable:!0,enumerable:!0,get:()=>{if("function"===typeof r[t])try{return r[t]()}catch(i){Js.error({error:new Cs({code:"VPAID_METHOD_FOR_GETTER_ERROR",details:{propertyName:e}})})}else Js.error({error:new Cs({code:"VPAID_HAS_NO_METHOD_FOR_GETTER",details:{propertyName:e}})})}})}),F(wu).forEach(e=>{const t=wu[e];Object.defineProperty(r,e,{configurable:!0,enumerable:!0,set:i=>{if("function"===typeof r[t])try{return r[t](i)}catch(n){Js.error({error:new Cs({code:"VPAID_METHOD_FOR_SETTER_ERROR",details:{propertyName:e,value:i}})})}else Js.error({error:new Cs({code:"VPAID_HAS_NO_METHOD_FOR_SETTER",details:{propertyName:e,value:i}})})}})}),r);var r;return yr(()=>i,{},{onStop:e=>{let{error:t,reason:i}=e;t?Js.errorToStats(t):Js.event({name:"AdCreativeMeasured",probability:ws,data:{stopReason:i}})},onInitMeasurer:e=>{Js.event({name:"AdCreativeInitMeasurer",probability:ws,data:{measurerData:e}})},onTrackEvent:e=>{pi(e)},onExecutionError:e=>{Js.errorToStats(e)},onAdError:e=>{let{error:t}=e;Js.errorToStats(t)}})()}function br(e){if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;const t=e.ownerDocument.defaultView,i=function(e,t){try{if(Object(Sn.checkNativeCode)(e.attachShadow))return e.attachShadow(t);if(Object(Sn.checkNativeCode)(e.createShadowRoot))return e.createShadowRoot();if(Object(Sn.checkNativeCode)(e.webkitCreateShadowRoot))return e.webkitCreateShadowRoot()}catch(i){}return null}(e,{mode:"open"});if(!i)return null;const r=t.document.createElement("div");return i.appendChild(r),r}function Er(){return(Er=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function _r(e){let{creative:t,isYandexCreative:i,mediaFile:r,adParameters:n}=e;return function(e,t){let{methodCallError:i,methodAbsent:r,workaroundMethodCallError:n,getterError:o,setterError:s}=t;const a=Er({},te(gu,(t,n)=>(function(){for(var t=arguments.length,o=new Array(t),s=0;s<t;s++)o[s]=arguments[s];if("function"===typeof e[n])try{return e[n](...o)}catch(a){i({methodName:n,args:o,error:a})}else r({methodName:n,args:o})})),{},te(lr(bu,(t,i)=>"function"===typeof e[i]),(t,i)=>(function(){try{return e[i]()}catch(s){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];n({methodName:i,args:r,error:s})}})));return k(vu,(t,i)=>{Object.defineProperty(a,i,{configurable:!0,enumerable:!0,get:()=>{try{return e[i]}catch(t){o({propertyName:i,error:t,value:void 0})}},set:t=>{try{e[i]=t}catch(r){s({propertyName:i,error:r,value:t})}}})}),a}(t,{methodCallError:e=>{let{methodName:t,args:o,error:s}=e;Js.error({error:new Cs(s,{code:i?"YANDEX_VPAID_METHOD_CALL_ERROR":"VPAID_METHOD_CALL_ERROR",details:{methodName:t,mediaFile:r,args:o,adParameters:n}})}),j(s)},methodAbsent:e=>{let{methodName:t,args:o}=e;Js.error({error:new Cs({code:i?"YANDEX_VPAID_METHOD_ABSENT":"VPAID_METHOD_ABSENT",details:{methodName:t,mediaFile:r,args:o,adParameters:n}})})},workaroundMethodCallError:e=>{let{methodName:t,args:o,error:s}=e;Js.error({error:new Cs(s,{code:i?"YANDEX_VPAID_WORKAROUND_METHOD_CALL_ERROR":"VPAID_WORKAROUND_METHOD_CALL_ERROR",details:{methodName:t,mediaFile:r,args:o,adParameters:n}})}),j(s)},getterError:e=>{let{propertyName:t,error:o,value:s}=e;Js.error({error:new Cs(o,{code:i?"YANDEX_VPAID_GETTER_ERROR":"VPAID_GETTER_ERROR",details:{propertyName:t,mediaFile:r,value:s,adParameters:n}})}),j(o)},setterError:e=>{let{propertyName:t,value:o,error:s}=e;Js.error({error:new Cs(s,{code:i?"YANDEX_VPAID_SETTER_ERROR":"VPAID_SETTER_ERROR",details:{propertyName:t,mediaFile:r,value:o,adParameters:n}})}),j(s)}})}function Sr(e,t){return function(e,t){const i=[];return i.push(a(e,"unhandledrejection",e=>{t(new Fn(e.reason,{code:"UNHANDLED_PROMISE_REJECTION"}),"UNHANDLED_PROMISE_REJECTION",{})})),i.push(a(e,"error",(e,i,r,n,o)=>{t(new Fn(e.error||o,{code:"UNHANDLED_GLOBAL_ERROR",details:{event:e,src:i,line:r,column:n,error:o,filename:e&&e.filename},message:e&&e.message}),"UNHANDLED_GLOBAL_ERROR",{})})),i.push(a(window,"securitypolicyviolation",e=>{let{blockedURI:i,columnNumber:r,documentURI:n,effectiveDirective:o,lineNumber:s,originalPolicy:a,referrer:d,sourceFile:l,statusCode:c,violatedDirective:h}=e;const u={blockedURI:i,columnNumber:r,documentURI:n,effectiveDirective:o,lineNumber:s,originalPolicy:a,referrer:d,sourceFile:l,statusCode:c,violatedDirective:h};t(new Fn({code:"SECURITY_POLICY_VIOLATION",details:u}),"SECURITY_POLICY_VIOLATION",{securityPolicyViolationEventData:u})})),()=>{u(i)}}(e,(e,i,r)=>{if("SECURITY_POLICY_VIOLATION"===i){const{securityPolicyViolationEventData:e}=r;if(e){const{blockedURI:t}=e;if(t&&t.indexOf(Zs)>-1)return}}t(e,i,r)})}function Tr(e,t,i){return e.subscribe(i,t),()=>{e.unsubscribe(i,t)}}function Cr(e){if(!Ve(e)&&!De(e)||!Ko)return e;const t=Wo[Wo.length-1];return function(e,t,i){if(void 0===i)return e;const r=O(e),n=R(r.search);return n[t]=i,I(P({},r,{search:D(n)}))}(e,"target_ref",(t&&t.ownerDocument||document).referrer)}function kr(){return(kr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function Pr(e){const{ownerDocument:t}=e;return t?"false"===e.getAttribute("pip")?o:function(e,t){const{pictureInPictureElement:i}=e;if(i)return i;if(t){if(t.webkitPresentationMode===op.pictureInPicture)return t;if(t.broughtOut)return t}return null}(t,e)===e?o:xi(e,{pip:"false"}):o}function Or(e){const{hostname:t,pathname:i}=O(e);return!function(e){return Oe(e,"strm.yandex.ru")||Oe(e,"strm.yandex.net")}(t)&&(0===i.indexOf("/get")&&(Oe(t,".yandex.ru")||Oe(t,".yandex.net")))}function Ir(e){let{width:t,height:i,bitrate:r,type:n,url:o}=e;return{width:t,height:i,bitrate:r,type:n,delivery:"progressive",url:o,source:o,src:o,isVpaid:!1}}function Rr(){return(Rr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function Nr(e,t){if(null==e)return{};var i,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)i=o[r],t.indexOf(i)>=0||(n[i]=e[i]);return n}function Dr(){return(Dr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function Vr(e,t){const i=t.querySelector('Extension[type="'+e+'"]');return i?Ge(i):void 0}function xr(e,t){return"true"===Vr(e,t)}function Lr(){return(Lr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function Mr(){return(Mr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function Br(e,t,i){const r=[],n=[],o=i.querySelector("AdSource");if(!o)throw new Cs({code:"VMAP_AD_BREAK_WITHOUT_AD_SOURCE",details:t});const s=i.querySelector("Extensions");if(!s)throw new Cs({code:"NO_AD_BREAK_EXTENSIONS",details:t});const a=o.querySelector("AdTagURI"),d=Ge(a);if(!a||!d)throw new Cs({code:"VMAP_AD_SOURCE_WITHOUT_AD_TAG_URI",details:t});const l={adTagURI:d,adFoxParameters:void 0},c=i.getAttribute("breakType"),h=Ye(i,"breakId"),u=Ye(i,"timeOffset","start"),p=()=>new Cs({code:"VMAP_INCORRECT_TIME_OFFSET",details:Mr({},t,{timeOffset:u,breakIdAttribute:h})});if(-1===F($d).indexOf(h))throw new Cs({code:"VMAP_UNSUPPORTED_AD_BREAK_TYPE",details:Mr({},t,{breakIdAttribute:h})});const A=c===Op,f=function(e,t){switch(e){case kp:return[new Cs({code:"LINEAR_AND_NON_LINEAR_ALLOWED_IN_AD_BREAK",details:t})];case Pp:case Op:return[];default:throw new Cs({code:"INVALID_BREAK_TYPE_ATTRIBUTE",details:t})}}(c,t);let m;if(r.push(...f),A!==(h===$d.overlay)&&n.push({name:"IncorrectBreakTypeAttribute",data:{adBreakType:h,adBreakTypeAttribute:c||""}}),h===$d.inpage)m=function(e){const t=Vr("Stick",e),i=Gi({stickTo:Vr("StickTo",e),stickyColorScheme:Vr("ColorScheme",e)});return Lr({stick:"true"===t,adType:$d.inpage,replayMode:Dp(e),preload:xr("Preload",e)},i)}(s);else if(h===$d.inroll)m={adType:$d.inroll};else if(u===Tp.start){if(Cp[u]!==h)throw p();m={adType:$d.preroll}}else if(u===Tp.end){if(Cp[u]!==h)throw p();m={adType:$d.postroll}}else{if(!/^\d{2}:\d{2}:\d{2}(\.\d+)?/.test(u))throw p();{if([$d.midroll,$d.overlay].indexOf(h)<0)throw p();const e=function(e,t){return Number(Vr(e,t))}("MaxRepeatCount",s),t=$e(Ye(i,"repeatAfter")),r={timeOffset:$e(u),repeatAfter:isNaN(t)?Rp:t,maxRepeatCount:isNaN(e)?Ip:e,repeatNumber:0};m=h===$d.midroll?Mr({adType:$d.midroll,broadcastReplace:xr("BroadcastReplace",s)},r):Mr({adType:$d.overlay},r)}}return{adBreak:Mr({},m,{},e,{},l),errors:r,events:n}}function Fr(){return(Fr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function Ur(){return(Ur=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function Hr(){return(Hr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function jr(){return(jr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function zr(){return(zr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function Wr(){return(Wr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function Yr(){return(Yr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function Gr(e){return!!Object(Ed.isString)(e)&&Wp.indexOf(e)>-1}function qr(){return(qr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function Xr(e,t,i){const{vastBase64:r,adBreakType:n}=e,o=function(e,t){if(null==e)return{};var i,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)i=o[r],t.indexOf(i)>=0||(n[i]=e[i]);return n}(e,["vastBase64","adBreakType"]),s=[];let a,d;if(r&&(o.vast=yd.decode(r)),Gr(n)?d=n:t&&(s.push(new Cs({code:"USING_SYNTHETIC_VMAP_TYPE_PARAMETER",details:{adLoaderConfig:e,useDefaultAdPlaybackParameters:t,syntheticVMAPType:i}})),Gr(i)&&(d=i)),d){const t=Ki(e);a=qr({},zp[d],{},t)}return{adConfig:o,adBreak:a,warnings:s}}function Kr(e,t){e[Gp]=t}function Qr(e){return e[Gp]}function Zr(){return(Zr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function Jr(e){return["position","left","top","bottom","width","height","background","display","zIndex"].reduce((t,i)=>(t[i]=e.style[i]||"",t),{})}function $r(e){e.offsetLeft}function en(e){return e.getBoundingClientRect().bottom>e.ownerDocument.body.getBoundingClientRect().bottom}function tn(e){if(!e)return!1;const t=(e.ownerDocument||document).defaultView||window;return Boolean(t.Element)&&e instanceof t.Element}function rn(e,t){void 0===t&&(t=IA);const i=e.ownerDocument,{body:r}=i,n=i.documentElement,o=i.defaultView,s=Math.max(r.scrollHeight,r.offsetHeight,n.clientHeight,n.scrollHeight,n.offsetHeight);if(e===n||e===r){return s-((o.pageYOffset||n.scrollTop)-(n.clientTop||0)+o.innerHeight)<t}return!(e.clientHeight>0&&e.scrollHeight>e.clientHeight&&e.scrollHeight-(e.scrollTop+e.clientHeight)>t)}function nn(e){const{parentElement:t}=e;if(!t)return!1;const i=t.parentElement;if(!i)return!1;let r=i;for(;Boolean(r);){if(tn(r)&&!rn(r))return!1;r=r.parentNode||r.host}return!0}function on(e,t){return!!n(e.ownerDocument)&&_(e)>=t}function sn(){return(sn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function an(e){if(e.qualityLevel=1,e.controlsSettings=Yi(e.controlsSettings),e.controlsSettings.controlsVisibility[ql.skip]=!1,e.controlsSettings.controlsVisibility[ql.title]=!1,e.vastUrl&&De(e.vastUrl)&&(e.vastUrl=DA(e.vastUrl)),e.adFoxUrl){const t=e.adFoxUrl.replace(Qp,encodeURIComponent(function(){let e;try{e=top.location.href}catch(t){e=location.href}return e}()));e.adFoxUrl=DA(t)}e.backgroundBlur=!0}function dn(e,t,i){if(t&&"undefined"!==t){const i=document.querySelectorAll(t);if(0!==i.length){let t="string"===typeof e?parseInt(e,10):e||0;t=e?"string"===typeof e&&e.indexOf("%")>-1?Math.round(t*(i.length-1)/100):Math.max(0,t-1):0;const r=i[Math.min(i.length-1,t)],n=Ne();n.id="yaAdSdkContainer_"+Math.floor(1e6*Math.random()),n.className="yaAdSdkContainer";const{parentNode:o}=r;if(o&&(o.insertBefore(n,r.nextSibling),n))return n}}return"string"===typeof(r=i)?document.getElementById(r):r;var r}let ln,cn,hn,un,pn,An;i.r(t),function(e){e.AdSDKLoader="AdSDKLoader",e.InteractiveViewerLoader="InteractiveViewerLoader"}(ln||(ln={})),function(e){e.AdSDK="AdSDK",e.InPage="InPage",e.BannerAd="BannerAd",e.VideoPlayer="VideoPlayer",e.AdLoader="AdLoader",e.VideoBannerAd="VideoBannerAd",e.Multiroll="Multiroll",e.InteractiveViewer="InteractiveViewer"}(cn||(cn={})),function(e){e.Examples="Examples",e.Dashboard="Dashboard"}(hn||(hn={})),function(e){e.Test="Test"}(un||(un={})),function(e){e.TestVpaid="TestVpaid",e.CaptureScriptRunner="CaptureScriptRunner"}(pn||(pn={}));const fn=i(18),mn=(void 0===(gn=window)&&(gn=window),An||(An=gn.document.createElement("div")),An);var gn;const vn=(e,t)=>{const i="undefined"!==typeof mn.style[e];if(i&&t&&fn(t))try{mn.style.cssText=e+": "+t+";";const i=Boolean(mn.style.cssText);return mn.style.cssText="",i}catch(r){return!1}return i},yn=["","webkit","moz","o","ms"],wn=["","-webkit-","-ms-","-moz-","-o-"],bn={},En=function(e){return void 0===e&&(e=""),bn[e]||function(e){const t=""+e[0].toUpperCase()+e.slice(1);for(let i=0;i<yn.length;i++){const r=yn[i],n=r?""+r+t:e;if(vn(n))return bn[e]=n}return bn[e]=e}(e)},_n=e=>"hidden"in e?"hidden":"webkitHidden"in e?"webkitHidden":void 0;var Sn=i(1);let Tn=function(e,t,i){e.attachEvent("on"+t,i)},Cn=function(e,t,i){e.detachEvent("on"+t,i)};s(document,"addEventListener")&&s(document,"removeEventListener")&&(Tn=function(e,t,i,r){const n=e&&s(e,"addEventListener");n&&n.call(e,t,i,r)},Cn=function(e,t,i,r){const n=e&&s(e,"removeEventListener");n&&n.call(e,t,i,r)});let kn=!1,Pn=!1,On=!1;try{if(function(e){void 0===e&&(e=window);const t=e.Object;try{const e={};return t.defineProperty(e,"sentinel",{}),"sentinel"in e}catch(i){return!1}}()){const e=document.createElement("div"),t={};Object.defineProperty(t,"once",{get:()=>kn=!0}),Object.defineProperty(t,"passive",{get:()=>Pn=!0}),Object.defineProperty(t,"capture",{get:()=>On=!0}),Tn(e,"click",o,t)}}catch(xA){}const In=e=>{try{const{left:t,right:i,top:r,bottom:n}=e.getBoundingClientRect();return{left:t,right:i,top:r,bottom:n,width:i-t,height:n-r}}catch(t){return{left:0,width:0,top:0,height:0,right:0,bottom:0}}},Rn=1e3/60,Nn=function(e){const t=e.requestAnimationFrame||e.mozRequestAnimationFrame||e.webkitRequestAnimationFrame||e.msRequestAnimationFrame||(t=>e.setTimeout(t,Rn)),i=e.cancelAnimationFrame||e.mozCancelAnimationFrame||e.webkitCancelAnimationFrame||e.msCancelAnimationFrame||(t=>e.clearTimeout(t));return{requestAnimationFrame:t.bind(e),cancelAnimationFrame:i.bind(e)}}(window),Dn=Nn.requestAnimationFrame,Vn=Nn.cancelAnimationFrame,xn=(e,t,i)=>{const r=[];for(let n=0;n<e.length;n++){const o=e[n];t.call(i,o,n,e)&&r.push(o)}return r},Ln={message:"DEFAULT_ERROR_MESSAGE",code:0,details:"",stack:"?:?:?",isFatal:!0},Mn=i(11),Bn=i(19);class Fn extends Error{constructor(e,t){void 0===t&&(t={});const i="object"===typeof e?e:{message:String(e||Ln.message)};super(),this.message=void 0,this.code=void 0,this.isFatal=void 0,this.details=void 0,this.stack=void 0,this.toString=void 0,this.toJSON=void 0,Bn(this,Fn.prototype),this.message=t.message||i.message||Ln.message,this.code=t.code||i.code||i.id||Ln.code,this.isFatal=Boolean(function(e){const[t]=xn(e,e=>void 0!==e);return t}([t.isFatal,i.isFatal,Ln.isFatal])),this.details=t.details||i.details||Ln.details;const r=t.stack||i.stack||function(e){const{url:t,line:i,col:r,fileName:n,columnNumber:o,lineNumber:s}=e;return(t||n||"?")+":"+(i||s||"?")+":"+(r||o||"?")}(i);let n=r===Ln.stack?this.stack:r;if(n&&n!==Ln.stack)this.stack=n;else if(!this.stack)try{throw new Error(this.message)}catch(o){this.stack=n=o.stack||Ln.stack}this.toString=()=>Mn(this.toJSON()),this.toJSON=()=>({message:this.message,code:this.code,isFatal:this.isFatal,details:this.details,stack:n})}}const Un=function(e,t){void 0===e&&(e=document);const i=e.currentScript;if(i)return i;{const i=e.getElementsByTagName("script"),r=[];for(let e=0;e<i.length;e++)r.push(i[e]);if("function"===typeof t){const e=r.filter(t);return e[e.length-1]}return r[r.length-1]}}(),Hn=Un?Un.src:"",jn=!Object(Sn.checkNativeCode)(Math.random)||Math.random()===Math.random(),zn={}.toString,Wn=/\[object (\w+)\]/,Yn=e=>{const t=zn.call(e);if(!t)return null;const i=t.match(Wn);if(!i)return null;const r=i[1];return r||null},Gn=Date&&l(Date.now)?()=>Date.now():()=>(new Date).getTime(),qn="undefined"===typeof window?void 0:window.performance,Xn=qn&&l(qn.now),Kn=qn&&qn.timing&&qn.timing.navigationStart?qn.timing.navigationStart:Gn(),Qn=Xn?()=>qn.now():()=>(()=>Gn()-Kn)(),Zn=2147483647,Jn=16807;let $n=Date.now()*Qn()%Zn;const eo=Zn-1,to=jn?function(){return(($n=$n*Jn%Zn)-1)/eo}:function(){return Math.random()},io=e=>{const t=[];for(;e;)try{if(h(e),t.push(e),e.parent===e)break;e=e.parent}catch(i){break}return t},ro=s(Array,"isArray"),no=Boolean(ro)?e=>ro.call(Array,e):e=>"Array"===Yn(e),oo=o,so=o,ao=o,lo=e=>{let{win:t,propertyName:i}=e;return{call:e=>oo(p({win:t,propertyName:i},e)),subscribe:e=>ao(p({win:t,propertyName:i},e)),wait:e=>(e=>{let{propertyName:t,win:i}=e;return new Promise(e=>{ao({callback:function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return e(i)},propertyName:t,win:i})})})(p({win:t,propertyName:i},e)),waitUntil:e=>(e=>{let{propertyName:t,win:i,comparator:r}=e;return new Promise(e=>{ao({propertyName:t,win:i,callback:function(){r(...arguments)&&e()}})})})(p({win:t,propertyName:i},e)),clear:e=>so(p({win:t,propertyName:i},e))}};lo({propertyName:"YANDEX_DESTROYABLE_GLOBAL_CALLBACK_PROPERTY_NAME",win:window});class co{constructor(){this._isDestroyed=!1,this.destroyHandlers=[],this._destroyReason=void 0}onDestroy(e){this._addDestroyHandler(e)}addDestroyListener(e){this._addDestroyHandler(e)}addDestroyHandler(e){this._addDestroyHandler(e)}destroy(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const[r]=t;this._isDestroyed||(this._isDestroyed=!0,this._destroyReason=r,this.destroyHandlers.forEach(e=>e(...t)),this.destroyHandlers.length=0)}getIsDestroyed(){return this._isDestroyed}get destroyReason(){return this._destroyReason}get isDestroyed(){return this._isDestroyed}ignoreAfterDestroy(e){var t=this;let i=e;return function(){t.isDestroyed&&(i=o);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];i.apply(t,r)}}_addDestroyHandler(e){this._isDestroyed?e(this._destroyReason):this.destroyHandlers.push(e)}}class ho{constructor(){this.on=[],this.once=[]}add(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.on.push(...t),()=>this.remove(...t)}addOne(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.once.push(...t),()=>this.remove(...t)}promise(){return new Promise(e=>this.addOne(e))}dispatch(e){const{once:t}=this;this.once=[],A(this.on,e),A(t,e)}removeAll(){this.on.length=0,this.once.length=0}remove(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.on=this.on.filter(e=>t.indexOf(e)<0),this.once=this.once.filter(e=>t.indexOf(e)<0)}}class uo extends ho{constructor(e,t){void 0===t&&(t=(e,t)=>e===t),super(),this.checkToEqualFunction=t,this.value=void 0,this.value=e}getValue(){return this.value}dispatch(e){this.checkToEqualFunction(this.value,e)||(this.value=e,super.dispatch(e))}}const po=250;let Ao=0;const fo=[];class mo extends co{constructor(e,t){let{lazy:i=!1}=void 0===t?{}:t;super(),this.onResize=void 0,this.resizeObserverCallback=e=>{let[{contentRect:{width:t,height:i}}]=e;this.onResize.dispatch({width:t,height:i})};const r=i?{width:NaN,height:NaN}:In(e);if(this.onResize=new uo({width:r.width,height:r.height},(e,t)=>{let{width:i,height:r}=t;return e.width===i&&e.height===r}),i){const t=Dn(()=>{const{width:t,height:i}=In(e);this.onResize.dispatch({width:t,height:i})});this.addDestroyHandler(()=>{Vn(t)})}if(this.addDestroyHandler(()=>{this.onResize.removeAll()}),"undefined"!==typeof ResizeObserver&&Object(Sn.checkNativeCode)(ResizeObserver))try{const t=new ResizeObserver(this.resizeObserverCallback);t.observe(e),this.addDestroyHandler(()=>{t.disconnect()})}catch(xA){this.fallbackToCustomDetectionMethods(e)}else this.fallbackToCustomDetectionMethods(e)}getSize(){return m({},this.onResize.getValue())}fallbackToCustomDetectionMethods(e){const{ownerDocument:t}=e;if(!t)return;const{defaultView:i}=t;if(!i)return;const r=()=>{const t=In(e);this.onResize.dispatch({width:t.width,height:t.height})};this.addDestroyHandler(a(i,"resize",r,{passive:!0})),this.addDestroyHandler(f(r))}}const go=e=>{let t=0;return{promise:new Promise(i=>{t=window.setTimeout(i,e)}),clear(){clearTimeout(t)},timeoutId:t}},vo=async(e,t)=>{let i;try{await new Promise((r,n)=>{t&&t.then(r,n),i=window.setTimeout(r,e)})}finally{window.clearTimeout(i)}},yo=function(e){return void 0===e&&(e=window),v(e).toLowerCase().indexOf("tizen")>-1},wo=function(e){void 0===e&&(e=window);const t=v(e).toLowerCase();return-1!==t.indexOf("safari")&&-1===t.indexOf("chrome")&&-1===t.indexOf("android")&&-1===t.indexOf("phantomjs")&&!yo(e)},bo=wo(),Eo=[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].some(e=>null!==navigator.userAgent.match(e)),_o=!0,So=!0,To=!1,Co=.5,ko=2;class Po extends co{constructor(e,t){let{initialVisibility:i=To,threshold:r=Co,considerDocumentVisibility:n=_o,numberOfMeasurementSteps:o=ko}=void 0===t?{}:t;super(),this.element=e,this.totalVisibilityValueSignal=void 0,this.totalVisibilityRatioValueSignal=void 0,this.elementVisibilityRatioValueSignal=void 0,this.documentVisibilityValueSignal=new uo(So),this.threshold=void 0,this.recalculateVisibility=()=>{if(this.isDestroyed)return;const e=_(this.element);this.elementVisibilityRatioValueSignal.dispatch(e)},this.refreshTotalVisibility=()=>{const e=this.elementVisibilityRatioValueSignal.getValue(),t=this.documentVisibilityValueSignal.getValue()?e:0;this.totalVisibilityValueSignal.dispatch(t>=this.threshold),this.totalVisibilityRatioValueSignal.dispatch(t)};const s=i?1:0,a=Math.max(o,ko);this.threshold=r,this.totalVisibilityValueSignal=new uo(i),this.totalVisibilityRatioValueSignal=new uo(s),this.elementVisibilityRatioValueSignal=new uo(s);const d=e.ownerDocument.defaultView.IntersectionObserver;d?this.startIntersectionObserver(d,a):this.startVisibilityCheckInterval(),n&&this.startObservingDocumentVisibility(e.ownerDocument),this.elementVisibilityRatioValueSignal.add(this.refreshTotalVisibility),this.documentVisibilityValueSignal.add(this.refreshTotalVisibility),this.addDestroyHandler(()=>{this.totalVisibilityValueSignal.removeAll(),this.totalVisibilityRatioValueSignal.removeAll(),this.elementVisibilityRatioValueSignal.removeAll(),this.documentVisibilityValueSignal.removeAll()})}getVisibility(){return this.totalVisibilityValueSignal.getValue()}getVisibilityRatio(){return this.totalVisibilityRatioValueSignal.getValue()}getDocumentVisibility(){return this.documentVisibilityValueSignal.getValue()}getElementVisibilityRatio(){return this.elementVisibilityRatioValueSignal.getValue()}onChangeVisibility(e){return this.totalVisibilityValueSignal.add(e)}onChangeVisibilityRatio(e){return this.totalVisibilityRatioValueSignal.add(e)}startIntersectionObserver(e,t){const i=[this.threshold],r=1/t;for(let o=1;o<t;o++)i.push(o*r);const n=new e(e=>{let[{intersectionRatio:t}]=e;this.elementVisibilityRatioValueSignal.dispatch(t)},{threshold:i});n.observe(this.element),this.addDestroyHandler(()=>{n.disconnect()})}startVisibilityCheckInterval(){const e=f(this.recalculateVisibility);this.addDestroyHandler(e);const{promise:t,clear:i}=go(0);t.then(this.recalculateVisibility),this.addDestroyHandler(i)}async startObservingDocumentVisibility(e){await vo(0);const t=n(e);this.documentVisibilityValueSignal.dispatch(t);const i=d(e,e=>{this.documentVisibilityValueSignal.dispatch(e)});this.addDestroyHandler(i)}}class Oo{constructor(e){this.cache=e}get(e){return this.cache[e]}has(e){return e in this.cache}set(e,t){this.cache[e]=t}}const Io=function(e,t,i){return void 0===t&&(t=e=>e),void 0===i&&(i=new Oo({})),function(){const r=t.apply(this,arguments);if(i.has(r))return i.get(r);const n=e.apply(this,arguments);return i.set(r,n),n}},Ro=document.createElement("a"),No=(Io(e=>{return P({},O(e))}),e=>{try{return decodeURIComponent(e)}catch(t){return e}}),Do=(e,t)=>t.map(t=>e+"[]="+encodeURIComponent(t)).join("&"),Vo=function e(t){return function(e,t,i){let r=0;for(arguments.length<3&&(r=1,i=e[0]);r<e.length;r++)i=t(i,e[r],r,e);return i}(t,(t,i)=>t.concat(no(i)?e(i):i),[])},xo=(e,t,i)=>{const r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=t.call(i,e[n],n,e);return r},Lo=to();var Mo=i(0);const Bo=(e,t)=>{for(const i of t.split(".")){if(!Object(Mo.isObject)(e)){e=void 0;break}e=e[i]}return e},Fo="__ADB_CONFIG__",Uo=Object(Mo.isObject)(Fo)&&Fo.fn&&l(Fo.fn.encodeUrl)?Fo.fn.encodeUrl:void 0,Ho=void 0!==Uo?e=>Uo(e):void 0,jo=function(e){if(void 0===e&&(e=window),Ho)return Ho;const t=io(e);for(;t.length;){const e=t.pop();if(!e)continue;const i=Bo(e,"ya.videoAd.encodeUrl");if(l(i))return i}return null},zo=jo(window),Wo=y(document.documentElement),{length:Yo}=Wo,Go=Yo>0?Wo[Yo-1].contentWindow:window,qo=Boolean(window.location.ancestorOrigins),Xo=W(window),Ko=function(){const e=xo(Wo,e=>e.ownerDocument),{length:t}=e,i=(t?e[t-1]:document).defaultView;return!!i&&i.self!==i.parent}(),{topAncestor:Qo,isTrusted:Zo}=function(e){void 0===e&&(e=window);const t=W(e);if(t.length>0)return{topAncestor:t[t.length-1],isTrusted:!0};const{location:i,referrer:r}=G(e.document),n=Ko?r:i,o=!Ko||Y(Go).length<2,{protocol:s,hostname:a,host:d,port:l}=O(n);return{topAncestor:I({protocol:s,hostname:a,host:d,port:l,originalPath:"",href:"",pathname:"",search:"",hash:""}),isTrusted:o}}(),Jo=Qo,$o=Zo,es=200,ts=4,is=(e=>Object(Sn.checkNativeCode)(e.navigator.sendBeacon))(window),rs=64,ns="https://an.yandex.ru/jstracer",os="https://jstracer.yandex.ru/jstracer",ss="https://strm.yandex.ru/log",as="_$".split("").reverse().join(""),ds=e=>"_$invalid_"+e+as,ls={sensorName:ds("sensor_name"),labelKey:ds("label_key"),labelValue:ds("label_value")};let cs;!function(e){e.event="event",e.error="error",e.deprecated="deprecated",e.warning="warning",e.value="value",e.values="values"}(cs||(cs={}));lo({propertyName:"YANDEX_STATS_GLOBAL_CALLBACK_PROPERTY_NAME",win:window});const hs=i(11),us=e=>{let{eventType:t,eventName:i,value:r,values:n}=e;const o={};return k(n,(e,r)=>{o[t+"_"+i+"_"+r]=e}),Q({[t+"_"+i]:r},o)},ps=/^\w(\-|_|:|\s|\.|\w){1,20}$/,As=/^\w(\-|_|:|\s|\.|\w){0,70}$/,fs=/^\w(\-|_|:|\s|\.|\w){1,70}$/;class ms{static getLogUrl(e){return e.logUrl?e.logUrl:!0===e.useAlias?os:ns}constructor(e){this.rootFields={},this.labels={},this.params=void 0,this.logUrl=void 0,this.isStrmLogUrl=void 0,this.event=e=>{let{name:t,data:i,labels:r,probability:n,extraRootFields:o}=e;this.push({eventType:cs.event,eventName:t,data:i,additionalStatsLabels:r,probability:n,extraRootFields:o})},this.error=e=>{let{error:t,labels:i,probability:r,extraRootFields:n}=e;const o=new Fn(t);this.push({eventName:String(o.code),eventType:cs.error,data:o,additionalStatsLabels:i,probability:r,extraRootFields:n})},this.value=e=>{let{name:t,value:i,data:r,labels:n,probability:o,extraRootFields:s}=e;this.push({eventName:t,value:i,eventType:cs.value,data:r,additionalStatsLabels:n,probability:o,extraRootFields:s})},this.values=e=>{let{name:t,values:i,data:r,labels:n,probability:o,extraRootFields:s}=e;this.push({eventName:t,eventType:cs.values,data:r,additionalStatsLabels:n,probability:o,values:i,extraRootFields:s})},this.warning=e=>{let{name:t,message:i,probability:r,extraRootFields:n}=e;Object(Mo.isObject)(console)&&l(console.warn)&&console.warn(i),this.push({eventName:t,eventType:cs.warning,data:{message:i},probability:r,extraRootFields:n})},this.getParams=()=>{return function(e,t){if(null==e)return{};var i,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)i=o[r],t.indexOf(i)>=0||(n[i]=e[i]);return n}(this.params,["onLogError"])},this.setRootFields=e=>{U(e).forEach(e=>{let[t,i]=e;void 0===i?delete this.rootFields[t]:this.rootFields[t]=i})},this.setLabels=e=>{U(e).forEach(e=>{let[t,i]=e;void 0===i?delete this.labels[t]:this.labels[t]=i})},this.eventToStats=(e,t,i,r)=>{this.push({eventType:cs.event,eventName:e,data:t,additionalStatsLabels:i,extraRootFields:r})},this.errorToStats=(e,t,i)=>{const r=new Fn(e);this.push({eventName:String(r.code),eventType:cs.error,data:r,additionalStatsLabels:t,extraRootFields:i})},this.deprecated=(e,t)=>{Object(Mo.isObject)(console)&&l(console.warn)&&console.warn(t),this.push({eventName:e,eventType:cs.deprecated,data:{message:t}})},this.valueToStats=(e,t,i,r)=>{this.push({eventName:e,value:t,eventType:cs.value,data:i,additionalStatsLabels:r})};const{onLogError:t}=e;this.params=Q({},e,{sid:e.sid||c(rs),onLogError:t?e=>{try{t(e)}catch(e){j(e)}}:j}),this.logUrl=ms.getLogUrl(e),this.isStrmLogUrl=this.logUrl===ss}push(e){let{eventName:t,eventType:i,data:r={},additionalStatsLabels:n,value:o=1,probability:s=1,values:a={},extraRootFields:d}=e;if(!M(s))return;const{service:l,version:c}=this.params,h={service:l,version:c,data:r,eventName:t,eventType:i,additionalStatsLabels:n,value:o,values:a};if(ms.isSendingData)throw new Fn({message:"RecursiveStatsRequests",details:{service:l,version:c,eventType:i,eventName:t}});ms.isSendingData=!0;try{let e=this.logUrl;this.params.sendOnlyPrimaryParams||(e=V(this.logUrl,Q({[l]:c,[i]:t},n)));const r=this.createFullStatsObject(h,d);this.isStrmLogUrl&&(r.routeToJSTracer=!0),this.sendData(e,hs(r))}catch(u){ms.isSendingData=!1,this.params.onLogError(new Fn(u,{details:{service:l,version:c,eventType:i,eventName:t}}))}ms.isSendingData=!1}sendData(e,t){if(this.params.useSendBeacon){if(function(e,t){return!!is&&window.navigator.sendBeacon(e,t)}(e,t))return}X({url:e,data:t,method:"POST",onBeforeSend:this.params.onBeforeSend})}createFullStatsObject(e,t){const{service:i,version:r,eventName:o,eventType:s,data:a,additionalStatsLabels:d,value:c}=e,u=(this.params.createTagsFunction||us)(e),p=Q({},this.labels,{},d,{version:this.params.version}),A={service:i,tags:K(U(u).map(e=>{let[t,i]=e;return fs.test(t)?[t,i]:[ls.sensorName,i]})),labels:K(U(p).map(e=>{let[t,i]=e,r=t,n=i;return ps.test(r)||(r=ls.labelKey),As.test(n)||(n=ls.labelValue),[r,n]}))},{location:f,referrer:m}=G(document);return Q({},t,{},this.rootFields,{},A,{timestamp:Date.now(),eventType:s,eventName:o,data:a,sid:this.params.sid,version:r,location:h(window),topLocation:f,topAncestor:Jo,isTopAncestorUndetermined:!$o||void 0,ancestorOrigins:Xo,documentIsVisible:n(document),referrer:window.document.referrer,topReferrer:m,currentScriptSrc:Hn,secureIFrame:Ko,isVideoADB:l(zo),value:c,rnd:Lo,topDocumentFocus:H()})}}ms.isSendingData=!1;const gs=new ms({service:"CommonPcode",version:"0",sid:c(rs)}),vs=J(window,"adsdkdebug"),ys=Boolean(vs),ws=ys?1:.05,bs=ys?1:.001,Es=M(ws),_s=["nobanner","noad"],Ss="\x3c!-- Bad partner/domain --\x3e",Ts={NO_APPROPRIATE_VIDEO_SOURCE:52,MEDIA_ERR_ABORTED:101,MEDIA_ERR_NETWORK:102,MEDIA_ERR_SRC_NOT_SUPPORTED:104,VIDEO_ERROR:10,INVALID_VAST_XML:40,YANDEX_INVALID_VAST_XML:40,INCORRECT_SKIPOFFSET_FORMAT:46,YANDEX_INCORRECT_SKIPOFFSET_FORMAT:46,ADFOX_VAST_LOAD_ERROR:47,VAST_LOAD_ERROR:48,NO_AD_SECTION:53,VAST_LOAD_TIMEOUT:60,YANDEX_VAST_LOAD_TIMEOUT:60,NO_INLINE_OR_WRAPPER_NODE:58,YANDEX_NO_INLINE_OR_WRAPPER_NODE:58,INLINE_AND_WRAPPER_NODE_IN_ONE_AD_SECTION:59,YANDEX_INLINE_AND_WRAPPER_NODE_IN_ONE_AD_SECTION:59,VIDEO_TIMEOUT:62,BUFFER_FULL_TIMEOUT:63,BUFFER_EMPTY_LIMIT:64,VPAID_START_TIMEOUT:65,EXPECTED_PREROLL_AD_BREAK:66,VMAP_CONFIG_WITHOUT_PARTNER_ID:1003,NO_AD_TO_DISPLAY:51,VPAIDLoadingError:68,VPAIDPlayingError:67,InteractiveViewerInitAdParamsError:69,VpaidEventBusCallbackError:81,CANNOT_LOAD_VPAID_MEDIA_FILE:82,CANNOT_LOAD_MODULE:91,CANNOT_INIT_MODULE:92,TOO_MANY_CREATE_AD_DISPLAY_CONTROLLER_REQUESTS:21002,TOO_MANY_BANNER_AD_REPLAY_REQUESTS:21003,PUBLIC_CONTROLLER_PLAY_ERROR:21010,NO_AD_CUSTOM_MARKER:21101};class Cs extends Fn{constructor(e,t){void 0===e&&(e={}),void 0===t&&(t={});const i=t.message||e.message||String(e);super(e,$({},t,{message:"AdSDK Error ["+(t.code||e.code)+"]"+(i?"["+i+"]":"")})),this.id=void 0,this.id=function(e){return Ts[e]||0}(this.code)}}const ks=(e=>{try{if("noModule"in e.HTMLScriptElement.prototype)return!0}catch(t){}return!1})(window),Ps=c(64),Os="",Is="InPage",Rs=1579600885086,Ns=[ln.InteractiveViewerLoader,cn.InteractiveViewer].indexOf(Is)>-1?"interactive-viewer-test-tag":"adsdk-test-tag";let Ds;try{Ds={build:2609,code:[{id:2609,percent:100}]}}catch(LA){Ds={}}const{build:Vs,code:xs}=Ds,Ls=Vs,Ms=function(e,t,i){const r=J(e,t);return r?Number(r):function(e){const t=100*to();let i=0;for(let r=0;r<e.length;r++)if(t<(i+=e[r].percent))return e[r].id;return e[0].id}(i)}(window,"adsdkver",xs),Bs=(""+J(window,"adsdkecmaver")).toUpperCase(),Fs="ES2017"===Bs||"ES5"===Bs?Bs:void 0,Us=function(e){if(void 0===e&&(e=Ms),"ES2017"===Fs)return!0;if("ES5"===Fs)return!1;if(!ks)return!1;return!!Hs(e)},Hs=e=>2305!==e&&e>2237,js=io,zs=function(e){const t=js(e);for(const i of t){const{BANNER_TYPE_FROM_NANPU:e}=i;if("string"===typeof e&&e.length>0)return e}}(window),Ws=te({digit:[0,1,2,3,4,5,6,7,8,9],overlayBundleName:["OverlayTGO","OverlayTGOSquareTitle","OverlayTGOSquareBody"]},ee),Ys=(e,t,i)=>{for(let r=0;r<e.length;r++)t.call(i,e[r],r,e)};class Gs{static sliceBits(e,t,i){return function(e,t,i){const r=t+i,n=oe(e.toString(2),r).substr(-r,i);return parseInt(n,2)}(e,t,i)}constructor(e){void 0===e&&(e={}),this.props={},this.setProps(se({},this.defaults(),{},e))}defaults(){return{}}toString(){return this.serialize().toString()}setProps(e){return Object(Mo.isObject)(e)&&Ys(this.getTemplate(),t=>{let[,i]=t;i&&e.hasOwnProperty(i)&&(this.props[i]=e[i])},this),this}getProps(){return se({},this.props)}clone(){return new(0,this.constructor)(this.props)}serialize(){var e,t;return re((e=this.getTemplate(),t=this.props,xo(e,e=>{let[i,r]=e;return[i,r&&t[r]||null]})))}slice(e,t){return Gs.sliceBits(this.serialize(),e,t)}}let qs;!function(e){e.VERSION="VERSION",e.BUNDLE="BUNDLE",e.UNUSED="UNUSED",e.ADBLOCK="ADBLOCK"}(qs||(qs={}));const Xs={[ln.AdSDKLoader]:0,[ln.InteractiveViewerLoader]:1,[cn.AdSDK]:10,[cn.AdLoader]:11,[cn.BannerAd]:12,[cn.InPage]:13,[cn.InteractiveViewer]:14,[cn.VideoPlayer]:15,[cn.Multiroll]:16,[cn.VideoBannerAd]:17,OverlayTGO:18,OverlayTGOSquareTitle:19,OverlayTGOSquareBody:20,[hn.Examples]:30,[hn.Dashboard]:30,[un.Test]:31,[pn.TestVpaid]:31,[pn.CaptureScriptRunner]:31};const Ks=new class extends Gs{getTemplate(){return[[10,qs.VERSION],[5,qs.BUNDLE],[34,qs.UNUSED],[1,qs.ADBLOCK]]}defaults(){return{[qs.VERSION]:Ls,[qs.BUNDLE]:Xs[Is],[qs.UNUSED]:0,[qs.ADBLOCK]:l(zo)}}},Qs=os,Zs=O(Qs).hostname,Js=new ms({service:"AdSDKJS",version:String(Ls),sid:Ps,useSendBeacon:!0,logUrl:Qs,onLogError:e=>{Js.error({error:new Cs({code:"STATS_LOG_ERROR",details:{error:e}})})}});Js.setRootFields({[Ns]:String(Ks.serialize()),isTrusted:Math.random()!==Math.random(),bannerTypeFromNanpu:zs,bundleName:Is,supportsScriptNoModule:ks,isAbleToLoadES2017:Us(),sampleSpace:Ws});const $s="function"===typeof IntersectionObserver&&Object(Sn.checkNativeCode)(IntersectionObserver)||!Ko,ea="adsdk-ts",ta="adsdk-bundle-version",ia="adsdk-bundle-name",ra="adsdk-container-visibility",na="adsdk-container-width",oa="adsdk-container-height",sa="ad-session-id",aa="sid",da="viewability-undetermined",la="top-ancestor",ca="top-ancestor-undetermined",ha=(e,t,i)=>{let r=e.getItem(t);return r||(r=i(t),e.setItem(t,r)),r},ua=(e,t,i)=>{if(!Object(Mo.isObject)(e))return e;const r=e,n=t.split("."),o=n.pop();for(const s of n){const t=e[s];e=Object(Mo.isObject)(t)?t:e[s]={}}return e[o]=i,r},pa=e=>{try{return e()}catch(LA){return}},Aa=(e,t,i,r)=>(function(){try{return t.apply(i||this,arguments)}catch(LA){if(l(r)&&r(LA),!0===LA.preventProtect)throw LA;Aa.log(LA,e)}});Aa.log=function(e,t){console.log("LOG:"+t+":"+e)},Aa.setTimeout=(e,t,i,r)=>window.setTimeout(Aa("timeout",e,i,r),t);class fa{}fa.YaContextCallbacks=de("Ya.C","ontext._callbacks"),fa.YaContextCallbacksCalls=de("Ya.C","ontext._callbacks_call"),fa.AdvManager=de("A","dvManager"),fa.AdvBlock=de("A","dvBlock"),fa.RTB=de("R","TB"),fa.Rtb=de("R","tb"),fa.MetrikaAdtune=de("metrika_a","dtune");class ma{constructor(e){this.obj=e}getItem(e){return this.obj[e]}setItem(e,t){this.obj[e]=t}}const ga=ae(()=>((e,t,i)=>{let r;return((e,t)=>{const i=e.slice();for(;i.length;){const e=t(i.shift());if(!e)return;i.push(...e)}})([e.top],e=>{if(!(r=pa(()=>Bo(e,t))))return pa(()=>z(e.frames))||[]}),r||(r=i()),ua(e,t,r),r})(self,"Ya.pcodeCrossFrameData",()=>new ma({}))),va=e=>ha(ga(),e,()=>new ma({})),wa=ae(()=>((e,t,i)=>{let r=Bo(e,t);return r||(r=i(),ua(e,t,r)),r})(self,"Ya.pcodeWindowData",()=>new ma({}))),ba=e=>ha(wa(),e,()=>new ma({})),Ea=Aa("metrika::pushEvent",(e,t)=>{const i=Bo(e,"Ya._metrika.dataLayer")||[];ua(e,"Ya._metrika.dataLayer",i),i.push({ymetrikaEvent:{type:"params",parent:1,data:{__ym:le({},t)}}})}),_a=Aa("sessionId::configureMetrika",(e,t)=>{Ea(e,{adSessionID:t})}),Sa=()=>(1e6*to()).toFixed(0)+(new Date).valueOf().toString();let Ta;const Ca=()=>(Ta||(Ta=((e,t,i,r)=>{let n=t.getItem("sessionId");return n||(n=i.getItem("sessionId")||e(),r(window,n)),t.setItem("sessionId",n),i.setItem("sessionId",n),n})(Sa,ba("common"),va("common"),_a)),Ta),ka=()=>Z(Ca)||void 0,Pa=function(e){return void 0===e&&(e=window),e.navigator.userAgent.indexOf("UCBrowser")>-1},Oa=function(e){if(void 0===e&&(e=window),ce(e)&&e.navigator){const{platform:t}=e.navigator;if(t&&/iP(hone|od|ad)/.test(t)){const t=e.navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);if(t)return parseInt(t[1],10)}}return-1}(),Ia=function(e){return void 0===e&&(e=window),/Windows Phone/i.test(e.navigator.userAgent)},Ra=function(e){void 0===e&&(e=window);const{userAgent:t=""}=e.navigator,i=/Android/.test(t),r=Ia(e),n=/com\.yandex\.mobile\.metrica\.ads\.sdk.*?Android/.test(t);return i&&!r||n}(),Na=ce();i(20);const Da=ue(ln).indexOf(Is)>-1,Va="1.0-"+Ls,xa="yastatic.net",La=1e3,Ma=60,Ba=24*(60*Ma)*La,Fa={AdSDKLoader:"adsdk",InteractiveViewerLoader:"interactive_viewer"},Ua="https://yastatic.net/awaps-ad-sdk-js/1_0/",{currentScript:Ha}=document,ja=30*Ba,za=2e3,Wa={ES5:"bundles",ES2017:"bundles-es2017"},Ga={[cn.AdSDK]:"adsdk",[cn.InPage]:"inpage",[cn.BannerAd]:"banner_ad",[cn.VideoPlayer]:"video_player",[cn.AdLoader]:"loader",[cn.VideoBannerAd]:"videobannerad",[cn.Multiroll]:"multiroll",[cn.InteractiveViewer]:"interactive_viewer",OverlayTGO:"overlay_tgo",OverlayTGOSquareTitle:"overlay_tgo_square_title",OverlayTGOSquareBody:"overlay_tgo_square_body"};let qa;!function(e){e.LOAD_SCRIPT_ERROR="LOAD_SCRIPT_ERROR",e.STATS_SENSOR_NAME_ERROR="STATS_SENSOR_NAME_ERROR",e.STATS_LABEL_KEY_ERROR="STATS_LABEL_KEY_ERROR",e.STATS_LABEL_VALUE_ERROR="STATS_LABEL_VALUE_ERROR"}(qa||(qa={}));const Xa="utf-8",Ka=e=>!0,Qa={retries:0,dropCacheOnRetry:!0},Za={VAST_URL:"vastUrl",VAST:"vast",AD_FOX_URL:"adFoxUrl",AD_FOX_URL_VAST:"adFoxUrlVast",PARTNER_ID:"partnerId",CATEGORY:"category",TAGS_LIST:"tagsList",CHARSET:"charset",VIDEO_CONTENT_ID:"videoContentId",VIDEO_CONTENT_NAME:"videoContentName",VIDEO_PUBLISHER_ID:"videoPublisherId",VIDEO_PUBLISHER_NAME:"videoPublisherName",VIDEO_GENRE_ID:"videoGenreId",VIDEO_GENRE_NAME:"videoGenreName",EXT_PARAM:"extParam",PLAYER_INFO:"playerInfo",DURATION:"duration"};const Ja=new class{constructor(){this.DEFAULT_CSS=void 0}};ke({videoAd:{AdConfigParams:Za,encodeUrl:Ho,loadModule:function(e){return new Promise((t,i)=>{Ce({moduleName:e,version:void 0,onSuccess:t,onError:i})})},skipTokens:[],modules:{},play:e=>new Promise((t,i)=>{Ce({moduleName:cn.AdLoader,version:void 0,onSuccess:r=>{let{play:n}=r;n(e).then(t).catch(i)},onError:i})})},mediaAd:{DOMAIN:xa,SDK_VERSION:Va,AdType:{PREROLL:"preroll",MIDROLL:"midroll",PAUSEROLL:"pauseroll",OVERLAY:"overlay",POSTROLL:"postroll"},TrackingEventType:{ERROR:"error",IMPRESSION:"impression",CREATIVE_VIEW:"creativeView",START:"start",FIRST_QUARTILE:"firstQuartile",MIDPOINT:"midpoint",THIRD_QUARTILE:"thirdQuartile",COMPLETE:"complete",MUTE:"mute",UNMUTE:"unmute",PAUSE:"pause",RESUME:"resume",FULLSCREEN:"fullscreen",EXIT_FULLSCREEN:"exitFullscreen",CLOSE:"close",SKIP:"skip",CLICK_THROUGH:"clickThrough",PROGRESS:"progress",REWIND:"rewind",EXPAND:"expand",COLLAPSE:"collapse",ACCEPT_INVITATION:"acceptInvitation"},AdConfigParams:Za,bannerAd:{initVideo:(e,t,i)=>{Js.event({name:"UsingDeprecatedGlobalMethodInitVideo",probability:ws,data:void 0}),Ce({moduleName:cn.BannerAd,version:void 0,onSuccess:r=>{r.initVideo(e,t,i)},onError:i})}},inPage:{addInPageVideo:(e,t,i)=>{Js.event({name:"UsingDeprecatedGlobalMethodAddInPageVideo",probability:ws,data:void 0}),Ce({moduleName:cn.InPage,version:void 0,onSuccess:r=>{r.addInPageVideo(e,t,i)},onError:i})}},initPlacement:(e,t,i)=>{Js.event({name:"UsingDeprecatedGlobalMethodInitPlacement",probability:ws,data:void 0}),Ce({moduleName:cn.AdSDK,version:void 0,onSuccess:r=>{r.initPlacement(e,t,i)},onError:i})}},video:{addVideoPlayer:(e,t,i,r)=>{Js.warning({name:"UsingDeprecatedGlobalMethodAddVideoPlayer",message:"You are using deprecated HTML5VideoPlayer. Use Yandex StreamPlayer https://yandex.ru/support/video-hosting/index.html."}),Ce({moduleName:cn.VideoPlayer,version:void 0,onSuccess:n=>{n.addVideoPlayer(e,t,i,r)},onError:o})}}},"ya");const $a=ya,{statsRootParams:ed}=$a.videoAd;Object(Mo.isObject)(ed)&&(Js.setRootFields(ed),Js.event({name:"UsingGlobalStatsRootField",probability:bs,data:{statsRootParams:ed}})),Da&&Js.values({name:"CreateLoader",data:{statsRootParams:ed},labels:{moduleVersion:String(Ms),bundleName:Is},values:{liveTime:Date.now()-Rs}}),function(){if(!Da)return;if(!Ha)return;const{src:e}=Ha;if("string"!==typeof e)return;const t=Fa[Is],i=""+Ua+t+".js";e.split("?")[0]!==i&&Js.event({name:"UnexpectedLoaderScripsSrc",probability:bs,data:{src:e,expectedSrc:i}}),Date.now()-Rs<ja||vo(za).then(()=>Ae({url:Ua+"build_info.json",method:"GET"})).then(e=>{let{responseText:t}=e;const{version:i}=JSON.parse(t);i!==Ls&&Js.warning({name:"UsingDeprecatedLoaderVersion",message:"AdSDK version you are using ("+Ls+") is out of date. Actual version is "+i+"."})}).catch(e=>{Js.error({error:new Cs(e,{code:"REQUEST_BUILD_INFO_ERROR"})})})}();const td="adfox.ru",id=["localhost","127.0.0.1"],rd=["yandex.ru","yandex.com","yandex.net","yandex.com.tr","yandex.ua","yandex.by","yandex.kz","yastatic.net","yandex.st","yandex-team.ru","yandex-team.com","yandex-team.com.ua","yandex-team.net.ua","yandex-team.com.tr","ya.ru"],nd=["kinopoisk.ru","kinopoisk.ua","kinopoisk.by","kinopoisk.tel","vidigital.ru","tns-counter.ru","adfox.ru"];class od extends Error{constructor(){super(...arguments),this.isTimeoutError=void 0}}let sd;!function(e){e.InLine="InLine",e.Wrapper="Wrapper"}(sd||(sd={}));const ad={droppedVideoFrames:0,corruptedVideoFrames:0,totalVideoFrames:0},dd={width:0,height:0},ld={visibility:0,size:dd,relativeSizeRatio:0,screenSize:dd,devicePixelRatio:0,downlink:0,videoContentSize:dd,videoPixelRatio:0,videoFramesInfo:ad},cd=["application/javascript","application/x-javascript"];class hd{constructor(){this.randomBackgrounds=[]}static fromXML(e){const t=new hd,i=e.querySelector("RandomBackgrounds");if(i){const e=i.querySelectorAll("Background");for(let i=0;i<e.length;i++){const r=Ye(e[i],"src");r&&t.randomBackgrounds.push(r)}}return t}merge(e){this.randomBackgrounds.push(...e.randomBackgrounds)}}class ud{constructor(){this.resetSkipDelay=!1,this.showCountDown=!0,this.showSoundButton=!0,this.showLabel=!0}static fromXML(e){const t=new ud,i=e.querySelector('control[id="skipbtn"]');i&&(t.resetSkipDelay="0"===Ye(i,"layout"));const r=e.querySelector('control[id="countdown"]');r&&(t.showCountDown="0"!==Ye(r,"layout"));const n=e.querySelector('control[id="soundbtn"]');n&&(t.showSoundButton="0"!==Ye(n,"layout"));const o=e.querySelector('control[id="adlabel"]');return o&&(t.showLabel="0"!==Ye(o,"layout")),t}}let pd;!function(e){e.portion="portion",e.seconds="seconds"}(pd||(pd={}));const Ad=ue(pd);class fd{constructor(){this.src=void 0,this.program=void 0,this.xPosition=void 0,this.yPosition=void 0,this.width=void 0,this.height=void 0}static fromXml(e){const t=e.querySelector("StaticResource"),i=new fd;return i.src=Ge(t),i.program=Ye(e,"program"),i.xPosition=parseInt(Ye(e,"xPosition",0),10),i.yPosition=parseInt(Ye(e,"yPosition",0),10),i.width=parseInt(Ye(e,"width",0),10),i.height=parseInt(Ye(e,"height",0),10),i}}class md{constructor(){this.vast=void 0,this.sequence=void 0,this.adParameters="",this.mediaFiles=[],this.icons=[],this.isNonLinear=!1,this.progressTrackings=[],this.trackingEvents={},this.clickThrough="",this.skipOffset=NaN,this.skipTime=NaN,this.backgroundBlur=void 0,this.vastAdTagUri=void 0,this.type=void 0,this.isIndependentOnVideoElement=void 0,this.duration=NaN,this.isClickable=!0,this.description=void 0,this.imhoParams=void 0,this.endScreenParams=void 0,this.adSystem=void 0,this.isNotReplacedBroadcastAd=!1}static fromXml(e,t){let{isYandexVastUrl:i}=void 0===t?{}:t;const r=e.getAttribute("sequence"),n=null===r?Number.MAX_VALUE:parseInt(r,10),o=e.querySelector("VideoClicks"),s=e.querySelectorAll("MediaFile"),a=e.querySelector("Linear"),d=e.querySelector("NonLinear"),l=e.querySelector("NonLinearClickThrough"),c=e.querySelector("TrackingEvents"),h=c?c.querySelectorAll("Tracking"):[],u=z(e.querySelectorAll("Impression")),p=e.querySelectorAll("Error"),A=e.querySelector("Extensions"),f=e.querySelector("Description"),m=e.querySelectorAll("Icons Icon"),g=e.querySelector("AdParameters"),v=e.querySelector("AdSystem"),y=new md,w=e.querySelector("InLine, Inline"),b=e.querySelector("Wrapper");if(w&&b)throw new Cs({code:i?"YANDEX_INLINE_AND_WRAPPER_NODE_IN_ONE_AD_SECTION":"INLINE_AND_WRAPPER_NODE_IN_ONE_AD_SECTION",details:void 0});if(w)y.type=sd.InLine;else{if(!b)throw new Cs({code:i?"YANDEX_NO_INLINE_OR_WRAPPER_NODE":"NO_INLINE_OR_WRAPPER_NODE",details:void 0});y.type=sd.Wrapper}y.sequence=n,y.adParameters=g?Ge(g):"";const E=e.querySelector("VASTAdTagURI");if(qe(E)&&(y.vastAdTagUri=Ge(E)),s)for(let _=0;_<s.length;_++){const e=Ke(s[_]),{minBitrate:t,maxBitrate:r}=e;t>r&&Js.error({error:new Cs({code:i?"YANDEX_MIN_BITRATE_GREATER_THAN_MAX_BITRATE":"MIN_BITRATE_GREATER_THAN_MAX_BITRATE",details:{adMediaFile:Ze(e)}})}),e.url?(e.type||Js.error({error:new Cs({code:i?"YANDEX_INVALID_MEDIA_FILE_TYPE":"INVALID_MEDIA_FILE_TYPE",details:{adMediaFile:Ze(e)}})}),y.mediaFiles.push(e)):Js.error({error:new Cs({code:i?"YANDEX_INVALID_MEDIA_FILE_URL":"INVALID_MEDIA_FILE_URL",details:{adMediaFile:Ze(e)}})})}if(o){const e=Ge(o.querySelector("ClickThrough"));e&&(y.clickThrough=e)}if(o){const e=o.querySelectorAll("ClickTracking");for(let t=0;t<e.length;t++)y.addEventUrl("clickThrough",Ge(e[t]))}for(let _=0;_<h.length;_++){const e=Ye(h[_],"event"),t=Ge(h[_]);if("progress"===e){const e=Ye(h[_],"offset",""),r=et(e);void 0!==r?y.progressTrackings.push({urls:[t],offset:r}):Js.error({error:new Cs({code:i?"YANDEX_VAST_INCORRECT_PROGRESS_OFFSET":"VAST_INCORRECT_PROGRESS_OFFSET",details:{url:t,offsetString:e}})})}else y.addEventUrl(e,t)}u.forEach(e=>{y.addEventUrl("impression",Ge(e))});for(let _=0;_<p.length;_++)y.addEventUrl("error",Ge(p[_]));for(let _=0;_<m.length;_++)y.icons.push(fd.fromXml(m[_]));if(A){const e=A.querySelectorAll('Extension[type="skipAd"]');for(let l=0;l<e.length;l++)y.addEventUrl("skip",Ge(e[l]));const t=A.querySelector('Extension[type="skipTime"]');if(qe(t)){const e=$e(Ge(t));Js.event({name:"UsingSkipTimeExtensionInVast",probability:ws,data:{skipTime:e}}),y.skipTime=$e(Ge(t)),y.skipTime>180&&(y.skipTime=0)}const i=A.querySelector('Extension[type="controls"]');i&&(y.imhoParams=ud.fromXML(i));const r=A.querySelector('Extension[type="isClickable"]');qe(r)&&(y.isClickable="0"!==Ge(r)),A.querySelector('Extension[type="broadcastAdNotReplaced"]')&&(y.isNotReplacedBroadcastAd=!0);const n=A.querySelector('Extension[type="backgroundBlur"]');qe(n)&&(y.backgroundBlur="1"===Ge(n));const o=A.querySelector('Extension[type="OutstreamEndScreen"]');o&&(y.endScreenParams=hd.fromXML(o));const s=A.querySelector('Extension[type="CustomTracking"]'),a=s?s.querySelectorAll("Tracking"):[];for(let l=0;l<a.length;l++){const e=Ye(a[l],"event");y.addEventUrl(e,Ge(a[l]))}const d=A.querySelector('Extension[type="isIndependentOnVideoElement"]');qe(d)&&(y.isIndependentOnVideoElement="1"===Ge(d))}if(qe(f)&&(y.description=Ge(f)),qe(v)&&(y.adSystem=Ge(v)),a){const e=Ye(a,"skipoffset","").trim();if(""!==e){const t=$e(e);isNaN(t)?We(new Cs({code:i?"YANDEX_INCORRECT_SKIPOFFSET_FORMAT":"INCORRECT_SKIPOFFSET_FORMAT",details:{nodeValue:e}}),y.trackingEvents.error):y.skipOffset=t}const t=a.querySelector("Duration");t&&(y.duration=$e(Ge(t)))}if(d){if(y.isNonLinear=!0,l){const e=Ge(l);e&&(y.clickThrough=e)}y.mediaFiles=[Qe(d)].filter(Boolean)}return y}addEventUrl(e,t){t&&e&&(this.trackingEvents[e]=[...this.trackingEvents[e]||[],t])}merge(e){e.mediaFiles.length&&(this.mediaFiles=[...this.mediaFiles,...e.mediaFiles]),F(e.trackingEvents).forEach(t=>{this.trackingEvents[t]=[...this.trackingEvents[t]||[],...e.trackingEvents[t]||[]]}),this.clickThrough||(this.clickThrough=e.clickThrough),isNaN(this.skipTime)&&(this.skipTime=e.skipTime),isNaN(this.skipOffset)&&(this.skipOffset=e.skipOffset),this.isClickable=this.isClickable||e.isClickable,this.progressTrackings.push(...e.progressTrackings),this.adParameters||(this.adParameters=e.adParameters),isNaN(this.duration)&&(this.duration=e.duration),this.sequence===Number.MAX_VALUE&&(this.sequence=e.sequence),e.isNotReplacedBroadcastAd&&(this.isNotReplacedBroadcastAd=!0),!1!==this.backgroundBlur&&"boolean"===typeof e.backgroundBlur&&(this.backgroundBlur=e.backgroundBlur),e.endScreenParams&&(this.endScreenParams?this.endScreenParams.merge(e.endScreenParams):this.endScreenParams=e.endScreenParams),this.adSystem||(this.adSystem=e.adSystem),e.isIndependentOnVideoElement&&(this.isIndependentOnVideoElement=!0)}hasMedia(){return Boolean(this.mediaFiles&&this.mediaFiles.length)}toXML(){const e=(new DOMParser).parseFromString("<VAST></VAST>","application/xml"),t=e.querySelector("VAST");t.setAttribute("version","2.0");const i=Xe("Ad",t),r=Xe("InLine",i);this.trackingEvents.impression&&this.trackingEvents.impression.forEach(e=>Xe("Impression",i,e)),this.trackingEvents.error&&this.trackingEvents.error.forEach(e=>Xe("Error",i,e));const n=Xe("Creatives",r),o=Xe("Creative",n),s=Xe("Linear",o);this.duration&&Xe("Duration",s,tt(this.duration));const a=Xe("TrackingEvents",s);F(this.trackingEvents).forEach(e=>{(this.trackingEvents[e]||[]).forEach(t=>{Xe("Tracking",a,t,{event:e})})}),this.progressTrackings.forEach(e=>{let{urls:t,offset:i}=e;t.forEach(e=>{Xe("Tracking",a,e,{event:"progress",offset:it(i)})})});const d=Xe("MediaFiles",s);this.mediaFiles.forEach(e=>Xe("MediaFile",d,e.url,{width:e.width,height:e.height,bitrate:e.bitrate,type:e.type,delivery:e.delivery})),this.adParameters&&Xe("AdParameters",s,this.adParameters);const l=Xe("VideoClicks",s);this.clickThrough&&Xe("ClickThrough",l,this.clickThrough),this.trackingEvents.clickThrough&&this.trackingEvents.clickThrough.forEach(e=>Xe("ClickTracking",l,e));const c=Xe("Extensions",r);if(this.skipTime&&Xe("Extension",c,tt(this.skipTime),{type:"skipTime"}),this.isClickable&&Xe("Extension",c,"1",{type:"isClickable"}),void 0!==this.isIndependentOnVideoElement){Xe("Extension",c,this.isIndependentOnVideoElement?"1":"0",{type:"isIndependentOnVideoElement"})}return e}toXMLString(){return(new XMLSerializer).serializeToString(this.toXML())}clone(){const e=new md;return e.merge(this),e.vast=this.vast,e.icons=this.icons,e.vastAdTagUri=this.vastAdTagUri,e.type=this.type,e.description=this.description,e.imhoParams=this.imhoParams,e}}const gd=["2.0","3.0"];class vd{static load(e,t){return e?vd.loadInternal(e,rt({},t)):Promise.reject(new Cs({code:"VAST_URL_IS_NOT_DEFINED",details:void 0}))}static async fromXMLString(e,t){const i=function(e){if(!e)return null;try{const t=(new DOMParser).parseFromString(e,"application/xml");return null===t.querySelector("parsererror")?t:null}catch(xA){return null}}(e);return vd.fromXml(i,e,rt({},t))}static loadInternal(e,t){const{vastTimeout:i}=t,r=Ve(e);return Js.event({name:"VastLoadStart",probability:ws,data:{url:e,parsingParameters:t,timeout:i}}),Be(e,null,i).then(n=>{let{xml:o,responseText:s,responseStatus:a}=n;if(s===Ss)throw new Cs({code:r?"YANDEX_BAD_PARTNER_OR_DOMAIN_FOR_VAST_REQUEST":"BAD_PARTNER_OR_DOMAIN_FOR_VAST_REQUEST",details:{url:e,responseText:s,responseStatus:a}});if(200!==a)throw new Cs({code:r?"YANDEX_INVALID_VAST_RESPONSE_STATUS":"INVALID_VAST_RESPONSE_STATUS",details:{url:e,responseText:s,responseStatus:a}});return Js.event({name:"VastLoadSuccess",probability:ws,data:{url:e,xml:o?(new XMLSerializer).serializeToString(o):o,timeout:i}}),vd.fromXml(o,s,rt({},t))}).catch(n=>{if(n.isTimeoutError){const t=new Cs({code:r?"YANDEX_VAST_LOAD_TIMEOUT":"VAST_LOAD_TIMEOUT",details:{vastTimeout:i,url:e}});return Promise.reject(t)}return n.code?Promise.reject(n):"AD_FOX"===t.vastSourceType?Promise.reject(rt({},n,{code:"ADFOX_VAST_LOAD_ERROR"})):r?Promise.reject(rt({},n,{code:"YANDEX_VAST_LOAD_ERROR"})):Promise.reject(rt({},n,{code:"VAST_LOAD_ERROR"}))})}static async fromXml(e,t,i){const r="YANDEX"===i.vastSourceType;if(!e)throw new Cs({code:r?"YANDEX_INVALID_VAST_XML":"INVALID_VAST_XML",details:{xmlString:t}});const n=e.querySelector("VAST");if(!n){const i=r?"YANDEX_NO_AD_CUSTOM_MARKER":"NO_AD_CUSTOM_MARKER",n=r?"YANDEX_VAST_TAG_NOT_FOUND":"VAST_TAG_NOT_FOUND";throw new Cs({code:_s.indexOf(Me(e))>-1?i:n,details:{xmlString:t}})}const o=n.getAttribute("version");if(!i.ignoreVastVersion&&o&&-1===gd.indexOf(o))throw new Cs({code:r?"YANDEX_INCOMPATIBLE_VAST_VERSION":"INCOMPATIBLE_VAST_VERSION",details:{xmlString:t,version:o}});const s=Array.prototype.slice.call(e.querySelectorAll("VAST Ad"));if(0===s.length)return new vd([],{isYandexVastUrl:r});const a=[],d=L(await Promise.all(s.map(e=>{const t=md.fromXml(e,{isYandexVastUrl:r}),{type:n}=t;if("InLine"===n)return[t];if("Wrapper"!==n)throw new Cs({code:r?"YANDEX_INVALID_VAST_AD_TYPE":"INVALID_VAST_AD_TYPE",details:void 0});if(i.wrapperMaxCount<=1)return Js.error({error:new Cs({code:r?"YANDEX_WRAPPER_MAX_COUNT_LIMIT":"WRAPPER_MAX_COUNT_LIMIT",details:void 0})}),[];const{vastAdTagUri:o}=t;if(!o)return Js.error({error:new Cs({code:r?"YANDEX_NO_VAST_AD_TAG_URI":"NO_VAST_AD_TAG_URI",details:void 0})}),[];const{adPlacementOptions:s,wrapperTimeout:d}=i,l=go(d),c=l.promise.then(()=>(Js.error({error:new Cs({code:r?"YANDEX_WRAPPER_LOAD_TIMEOUT":"WRAPPER_LOAD_TIMEOUT",details:{wrapperTimeout:d,vastAdTagUri:o,parsingParameters:i}})}),[])),h=vd.loadInternal(Le({url:o,options:s}),rt({},i,{wrapperMaxCount:i.wrapperMaxCount-1})).then(e=>(l.clear(),a.push(e),e.ads.map(e=>(e.merge(t),e)))).catch(e=>(Js.error({error:new Cs({code:r?"YANDEX_WRAPPER_LOAD_ERROR":"WRAPPER_LOAD_ERROR",details:{error:e,vastAdTagUri:o,parsingParameters:i}})}),[]));return Promise.race([c,h])}))).reduce((e,t)=>(t.isNonLinear?e.nonLinear.push(t):e.linear.push(t),e),{linear:[],nonLinear:[]}),l=d.linear.length>0,c=d.nonLinear.length>0;l&&c&&Js.error({error:new Cs({code:r?"YANDEX_LINEAR_AND_NONLINEAR_IN_SINGLE_VAST":"LINEAR_AND_NONLINEAR_IN_SINGLE_VAST",details:void 0})});const h=new vd(l?d.linear:d.nonLinear,{isYandexVastUrl:r});return h.xml=e,h.childs=a,h}constructor(e,t){if(void 0===t&&(t={}),this.ads=e,this.xml=void 0,this.childs=[],!Array.isArray(e))throw new Cs({code:t.isYandexVastUrl?"YANDEX_INVALID_VAST_CONSTRUCTOR_PARAMS":"INVALID_VAST_CONSTRUCTOR_PARAMS",details:void 0})}toVastXMLTree(){return Js.event({name:"UsingToVastXMLTreeMethod",probability:ws,data:void 0}),{xml:this.xml||null,childs:this.childs.map(e=>e.toVastXMLTree())}}getUploadedVastList(){Js.event({name:"UsingGetUploadedVastListMethod",probability:ws,data:void 0});const e=this.toVastXMLTree(),t=[],i=e=>{e.xml&&t.push(e.xml),e.childs.forEach(i)};return i(e),t.filter(e=>null!==e)}}const yd=new class{constructor(){this.decode=void 0;const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=";this.decode=function(t){let i,r,n,o,s,a,d,l="",c=0;for(t=t.replace(/[^A-Za-z0-9\-\_\=]/g,"");c<t.length;)i=(o=e.indexOf(t.charAt(c++)))<<2|(s=e.indexOf(t.charAt(c++)))>>4,r=(15&s)<<4|(a=e.indexOf(t.charAt(c++)))>>2,n=(3&a)<<6|(d=e.indexOf(t.charAt(c++))),l+=String.fromCharCode(i),64!==a&&(l+=String.fromCharCode(r)),64!==d&&(l+=String.fromCharCode(n));return function(e){let t="",i=0,r=0,n=0;for(;i<e.length;)if((r=e.charCodeAt(i))<128)t+=String.fromCharCode(r),i++;else if(r>191&&r<224)n=e.charCodeAt(i+1),t+=String.fromCharCode((31&r)<<6|63&n),i+=2;else{n=e.charCodeAt(i+1);const o=e.charCodeAt(i+2);t+=String.fromCharCode((15&r)<<12|(63&n)<<6|63&o),i+=3}return t}(l)}}},wd={bids:[],creatives:{},creativeUrls:{}},bd=100;var Ed=i(2);class _d extends co{constructor(e,t,i){super(),this.adConfig=e,this.adBreak=t,this.win=i,this.requestPromise=void 0,this.onFetchBidsStart=new ho,this.postMessageRequestId=Ps+"_"+c(16),this.addDestroyHandler(()=>{this.onFetchBidsStart.removeAll()}),this.requestPromise=new Promise(e=>{this.addDestroyHandler(e)}),this.requestBids()}requestBids(){Js.event({name:"HBRequestStart",data:this.getDataForLogs()}),this.subscribeHBMessages(),this.sendBidsRequest().then(async e=>{let{timeout:t}=e;Js.event({name:"HBFetchBidsStart",data:lt({},this.getDataForLogs(),{timeout:t})});const{clear:i,promise:r}=go(t);throw this.addDestroyHandler(i),await r,new Cs({code:"HB_FETCH_BIDS_TIMEOUT",details:lt({},this.getDataForLogs(),{timeout:t})})}).catch(e=>{Js.errorToStats(e),this.destroy(wd)})}subscribeHBMessages(){this.addDestroyHandler(a(this.win,"message",e=>{const{data:t,source:i}=e;if(!Object(Mo.isObject)(t)||!Object(Mo.isObject)(i))return;const{id:r,methodName:n}=t;if(r===this.postMessageRequestId)switch(n){case"FetchBidsStart":this.handleFetchBidsStartEventData(t.data);break;case"FetchBidsComplete":this.handleFetchBidsCompleteEventData(t.data);break;case"FetchBids":break;default:Js.error({error:new Cs({code:"HB_MESSAGE_UNKNOWN_METHOD",details:lt({},this.getDataForLogs(),{methodName:n})})})}}))}handleFetchBidsStartEventData(e){if(!Object(Mo.isObject)(e))return void Js.error({error:new Cs({code:"HB_MESSAGE_NON_OBJECT_DATA",details:this.getDataForLogs()})});const{timeout:t}=e;ot(t)?this.onFetchBidsStart.dispatch({timeout:t}):Js.error({error:new Cs({code:"HB_MESSAGE_INVALID_START_TIMEOUT",details:lt({},this.getDataForLogs(),{timeout:t})})})}handleFetchBidsCompleteEventData(e){try{const{bids:t,creatives:i,creativeUrls:r,warnings:n}=function(e,t){const i=[];if(!Array.isArray(e))throw new Cs({code:"HB_NON_ARRAY_BIDS_DATA",details:dt({},t,{fetchedBids:e})});e.length>1&&i.push(new Cs({code:"HB_EXTRA_BIDS_DATA",details:dt({},t,{fetchedBids:e})}));const[r]=e;if(!Object(Mo.isObject)(r))throw new Cs({code:"HB_NON_OBJECT_BIDS_DATA",details:dt({},t,{fetchedBids:e})});const{bids:n,creatives:o,creativeUrls:s}=r;if(!Array.isArray(n)||!n.every(Mo.isObject))throw new Cs({code:"HB_INVALID_BIDS_OBJECTS",details:dt({},t,{fetchedBids:e})});if(!Object(Mo.isObject)(o)||!ue(o).every(Ed.isString))throw new Cs({code:"HB_BIDS_INVALID_CREATIVES",details:dt({},t,{fetchedBids:e})});if(!Object(Mo.isObject)(s)||!ue(s).every(Ed.isString))throw new Cs({code:"HB_BIDS_INVALID_CREATIVE_URLS",details:dt({},t,{fetchedBids:e})});return{bids:n,creatives:o,creativeUrls:s,warnings:i}}(e,this.getDataForLogs()),o={bids:t,creatives:i,creativeUrls:r};st(n),Js.event({name:"HBFetchBidsComplete",data:lt({},this.getDataForLogs(),{fetchedBidsObject:o})}),this.destroy(o)}catch(xA){Js.errorToStats(xA)}}sendBidsRequest(){const e=Y(this.win),t={id:this.postMessageRequestId,methodName:"FetchBids",data:[{containerId:this.adConfig.adFoxParameters.containerId,adBreakType:this.adBreak.adType}]};for(const n of e)at(lt({win:n},t));const{promise:i,clear:r}=go(bd);return this.addDestroyHandler(r),new Promise((e,t)=>{i.then(()=>{t(new Cs({code:"HB_HANDSHAKE_TIMEOUT",details:this.getDataForLogs()}))});const n=nt(t=>{r(),e(t)},e=>{Js.error({error:new Cs({code:"HB_START_MULTIPLE_TIMES",details:lt({},this.getDataForLogs(),{data:e})})})});this.addDestroyHandler(this.onFetchBidsStart.add(n))})}getDataForLogs(){return{adBreak:this.adBreak,adConfig:this.adConfig,postMessageRequestId:this.postMessageRequestId}}}const Sd=(e,t)=>{for(let i=0;i<e.length;i++)if(t(e[i],i,e))return!0;return!1},Td="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",Cd=i(21),kd=["script","style","noscript","yatag","template","iframe","svg"];class Pd{constructor(e,t,i){this.name=e,this.textContentLength=t,this.resultLength=i}}const Od=/[^\s\\]/,Id="yandex.ru yandex.com yandex.ua yandex.by yandex.kz yandex.com.tr",Rd=5e3;let Nd,Dd="";const Vd="yandex.ru yandex.com yandex.ua yandex.by yandex.kz yandex.com.tr",xd=(Ot(),.5),Ld=e=>Math.max(0,Math.round(e)),Md=e=>Math.round(e);class Bd{constructor(e,t){if(void 0===t&&(t={}),this.isFirstScreen=void 0,this.size=void 0,this.config=void 0,this.element=void 0,this.winSize=void 0,this.MIN_VISIBLE_AREA=void 0,this.MIN_VISIBLE_AREA=xd,e){this.config={};const t=function(){const e=window;let t=e.innerWidth,i=e.innerHeight;if(!t){const r=e.document.documentElement;t=r.clientWidth,i=r.clientHeight}return{width:t,height:i}}();this.set("win_width",Ld(t.width)),this.set("win_height",Ld(t.height));const i=In(e);this.setLayout(i),this.setVisible(i,t),this.element=e,this.size=i,this.winSize=t}else{if(!t)throw new Error("wrong LayoutConfig constructor params");this.config=t}}set(e,t){this.config[e]=t}toString(){return JSON.stringify(this.config)}setLayout(e){const t={left:void 0===window.pageXOffset?document.documentElement.scrollLeft:window.pageXOffset,top:void 0===window.pageYOffset?document.documentElement.scrollTop:window.pageYOffset};this.set("width",Ld(e.width)),this.set("height",Ld(e.height)),this.set("left",Md(e.left+t.left)),this.set("top",Md(e.top+t.top))}setVisible(e,t){const{width:i,height:r,top:n,left:o,right:s,bottom:a}=e;let d=1;const l=Math.max(Math.min(s,t.width)-Math.max(o,0),0),c=Math.max(Math.min(a,t.height)-Math.max(n,0),0);i?d*=l/i:(o<0||s>t.width)&&(d=0),r?d*=c/r:(n<0||a>t.height)&&(d=0),this.set("visible",d>=this.MIN_VISIBLE_AREA?1:0),this.isFirstScreen=0===i&&0===r&&0===n&&0===o&&0===s&&0===a||this.config.top<t.height}}let Fd=0;const Ud=()=>Fd,Hd=e=>e instanceof Date||"Date"===Yn(e),jd=(e,t)=>{let i=[];try{i=e.cookie?e.cookie.split("; "):[]}catch(LA){}const r=/(%[0-9A-Z]{2})+/g;let n;for(let o=0;o<i.length;o++){const e=i[o].split("="),s=e.slice(1).join("=");try{const i=e[0].replace(r,decodeURIComponent);if(s.replace(r,decodeURIComponent),t===i){n=decodeURIComponent(s);break}}catch(LA){return}}return n},zd=(e,t)=>{const i=e.toString();return"0000".substr(0,t-i.length)+i},Wd=e=>{return e.getFullYear()+"-"+zd(e.getMonth()+1,2)+"-"+zd(e.getDate(),2)+"T"+zd(e.getHours(),2)+":"+zd(e.getMinutes(),2)+":"+zd(e.getSeconds(),2)+"."+zd(e.getMilliseconds(),3)+(e=>{const t=-e.getTimezoneOffset();return""+(t>=0?"+":"-")+zd(Math.floor(Math.abs(t)/60),2)+":"+zd(Math.abs(t)%60,2)})(e)},Yd=()=>fe(1,4294967295);let Gd=0;const qd=e=>{let{win:t,date:i=new Date,pr1:r,pr:n,testtag:o,isTurbo:s=Pt(t),addsSsSkipToken:a=!1,layoutConfig:d=new Bd,cookies:l,loaderVer:c,bundleVer:h}=e;d.set("req_no",(()=>Gd++)()),d.set("ad_no",Rt());const u=Nt({},(e=>{let{win:t,pr:i,date:r=new Date,pr1:n=Yd()}=e;const o=Ot(t)&&t.context&&t.context.sourceUrl||void 0,s=o||t.document.referrer;return{dl:o||String(t.location),date:Wd(r),pd:r.getDate(),pdh:t.screen.height,pdw:t.screen.width,pr1:n,pr:i,prr:s,pv:r.getHours(),pw:r.getDay(),extid_loader:ct(jd(t.document,"_ym_uid")||""),extid_tag_loader:t.location.hostname}})({win:t,date:i,pr1:r,pr:n}),{ylv:"0."+(c||"1"),ybv:"0."+(h||"1"),ytt:o?o.toString():"","is-turbo":Number(s),"skip-token":It(),"ad-session-id":Ca(),"layout-config":String(d),"enable-flat-highlight":1},l);return a&&(u["ss-skip-token-length"]=20,u["allow-repeat-ads"]=0),u},Xd=2048,Kd=[/avito/],Qd=["slide","visibleAfterInit","insertAfter","insertPosition","stick","stickTo","stickyColorScheme"],Zd="ads.adfox.ru";class Jd extends co{constructor(e,t){super(),this.adConfig=e,this.adBreak=t,this.loadVastPromise=void 0,this.loadingTimeoutPromise=void 0;const{promise:i,clear:r}=go(t.vastTimeout);this.loadingTimeoutPromise=i,this.addDestroyHandler(r),this.loadVastPromise=this.processAdFoxVastLoading().catch(e=>{throw Js.errorToStats(e),this.destroy(),e})}async processAdFoxVastLoading(){let{adFoxParameters:e}=this.adConfig;if(!e.bids){let t;const i=new _d(this.adConfig,this.adBreak,window);this.addDestroyHandler(()=>{i.destroy(wd)}),t=await Promise.race([i.requestPromise,this.loadingTimeoutPromise.then(()=>{throw new Cs({code:"HB_VAST_LOAD_TIMEOUT",details:{adConfig:this.adConfig,adBreak:this.adBreak,timeout:this.adBreak.vastTimeout,fetchedBidsObject:t}})})]),e=Ht({},e,{},t)}const t=await Promise.race([Ut(e),this.loadingTimeoutPromise.then(()=>{throw new Cs({code:"ADFOX_AD_DATA_LOADING_TIMEOUT",details:{adConfig:this.adConfig,adBreak:this.adBreak,adFoxParameters:e}})})]),i=await this.processLoadingAdFoxCreative(e,t);return Js.event({name:"AdFoxVastLoaded",data:{adConfig:this.adConfig,adBreak:this.adBreak}}),this.destroy(),i}processLoadingAdFoxCreative(e,t){let{campaignId:i,vastBase64:r}=t;const{creatives:n={},creativeUrls:o={}}=e;if(r)return this.processBase64Vast(r).catch(e=>{throw new Cs({code:"ADFOX_VAST_BASE64_LOAD_ERROR",details:{adConfig:this.adConfig,adBreak:this.adBreak,vastBase64:r,error:e}})});const s=n[i],a=o[i];if(!s&&!a)throw new Cs({code:"HB_CREATIVE_IS_NOT_FOUND",details:{adConfig:this.adConfig,adBreak:this.adBreak,adFoxParameters:e,campaignId:i}});return s?this.processBase64Vast(s).catch(e=>{throw new Cs({code:"HB_VAST_BASE64_LOAD_ERROR",details:{adConfig:this.adConfig,adBreak:this.adBreak,vastBase64:s,error:e}})}):vd.load(a,wi({commonParameters:this.adBreak,isAdFox:!0,adPlacementOptions:ld})).catch(e=>{throw new Cs({code:"HB_VAST_URL_LOAD_ERROR",details:{adConfig:this.adConfig,adBreak:this.adBreak,vastUrl:a,error:e}})})}processBase64Vast(e){let t;try{t=yd.decode(e)}catch(xA){throw new Cs({code:"ADFOX_VAST_BASE64_PARSING_ERROR",details:{error:xA}})}return vd.fromXMLString(t,wi({commonParameters:this.adBreak,isAdFox:!0,adPlacementOptions:ld}))}}let $d,el;!function(e){e.inpage="inpage",e.preroll="preroll",e.midroll="midroll",e.pauseroll="pauseroll",e.overlay="overlay",e.postroll="postroll",e.replaced="replaced",e.notReplaced="notReplaced",e.inroll="inroll"}($d||($d={})),function(e){e.Unsafe="Unsafe",e.OnlyYandexCreatives="OnlyYandexCreatives"}(el||(el={}));const tl=ue(el),il=el.Unsafe,rl=e=>{if(!e||!Object(Mo.isObject)(e))return il;const{secureMode:t}=e;return t&&-1!==tl.indexOf(t)?t:il};class nl{static addUnit(e){Array.isArray($a.videoAd.skipTokens)?-1===$a.videoAd.skipTokens.indexOf(e)&&$a.videoAd.skipTokens.push(e):$a.videoAd.skipTokens=[e]}static toBase64(){const e=nl.getUnits();return e.length?ct(e.map(e=>"yabs."+e).join("\n")):void 0}static getUnits(){return Array.isArray($a.videoAd.skipTokens)?$a.videoAd.skipTokens:[]}}const ol=e=>{let{videoContentId:t,videoContentName:i,videoPublisherId:r,videoPublisherName:n,videoGenreId:o,videoGenreName:s,musicArtistId:a,musicGenreId:d,musicGenreName:l}=e;return{"video-content-id":t,"video-content-name":i,"video-publisher-id":r,"video-publisher-name":n,"video-genre-id":Xt(o),"video-genre-name":Xt(s),music_artist_id:a,"music-genre":d,"music-genre-name":l,"ad-session-id":ka()}},sl=(e,t,i)=>{const{targetRef:r,width:n,height:o,tagsList:s,extParam:a,charset:d,distrId:l,additionalParams:c}=e;return Qt({},Gt(c),{},ol(e),{"repeat-number":Kt(t)?String(t.repeatNumber):void 0,wtime:Kt(t)?String(Math.floor(t.timeOffset)):void 0,"target-ref":r||h(window),"page-ref":window.document.referrer,"video-width":n,"video-height":o,"tags-list":Xt(s),"ext-param":a,charset:d||"UTF-8","video-session-id":t.sessionId,"skip-token":nl.toBase64(),"distr-id":l,"enable-page-options":"65536",rnd:String(i)})};class al{constructor(e,t){void 0===t&&(t=function(e){return Promise.all(e.map(e=>{let{readyPromise:t}=e;return t}))}(e)),this.preloaders=e,this.readyPromise=t}isReady(){return this.preloaders.reduce((e,t)=>e&&t.isReady(),!0)}destroy(){this.preloaders.forEach(e=>e.destroy())}}const dl=document.createElement("video"),ll="function"===typeof dl.load,cl=ll?function(e,t){return void 0===t&&(t=dl),Boolean(t.canPlayType(e).replace(/no/,""))}:()=>!1,hl=["application/vnd.apple.mpegurl","application/x-mpegurl"],ul=window.URL||window.webkitURL||{},pl="function"===typeof ul.createObjectURL&&"function"===typeof ul.revokeObjectURL,Al=i(30),fl=function(e){void 0===e&&(e=window);const t=Al(e);return"boolean"===typeof t?-1:t},ml=fl(),gl=function(e){void 0===e&&(e=window);const t=ti(e);return 2===t.major&&3===t.minor},vl=yo(),yl=(gl(),function(e){void 0===e&&(e=window);const t=ti(e);2===t.major&&t.minor}(),!vl&&-1===ml&&!bo),wl=e=>ei(e)&&bo||yl,bl=e=>cl(e)&&(wl(e)||(e=>pl&&!ei(e))(e)),El=(lo({propertyName:"YANDEX_VIDEO_PRELOADER_GLOBAL_CALLBACK_PROPERTY_NAME",win:window}),window.URL||window.webkitURL||{});class _l{constructor(e){this.readyPromise=void 0,this.ready=!1,this.video=void 0,this.xhr=void 0,this.blobUrl=void 0;const{type:t}=e;if(!bl(t))return void(this.readyPromise=Promise.reject(new Error(t+" cannot be preloaded")));const i=wl(t)?this.preloadWithVideoTag(e):this.preloadToBlob(e);this.readyPromise=i.then(t=>(this.ready=!0,t||e))}isReady(){return this.ready}destroy(){void 0!==this.video&&(this.video.src="",this.video=void 0),void 0!==this.xhr&&(this.xhr.abort(),this.xhr=void 0),Object(Ed.isString)(this.blobUrl)&&El.revokeObjectURL(this.blobUrl)}preloadWithVideoTag(e){const t=document.createElement("video");return this.video=t,t.preload="auto",new Promise((i,r)=>{t.oncanplaythrough=()=>i(e),t.onerror=r,t.src=e.url,t.load()})}async preloadToBlob(e){const{response:t}=await Ae({method:"GET",url:e.url,responseType:"blob",onBeforeSend:e=>this.xhr=e});return{type:e.type,width:e.width,height:e.height,bitrate:e.bitrate,minBitrate:e.minBitrate,maxBitrate:e.maxBitrate,url:El.createObjectURL(t)}}}const Sl=Number.EPSILON||Math.pow(2,-52),Tl=Object(Sn.checkNativeCode)(Math.hypot)?function(){return Math.hypot(...arguments)}:function(){let e=0;for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];for(const n of i){if(n===1/0||n===-1/0)return 1/0;e+=n**2}return Math.sqrt(e)};var Cl,kl;!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.ETHERNET=1]="ETHERNET",e[e.WIFI=2]="WIFI",e[e.CELL_2G=3]="CELL_2G",e[e.CELL_3G=4]="CELL_3G"}(Cl||(Cl={})),function(e){e.BLUETOOTH="bluetooth",e.CELLULAR="cellular",e.ETHERNET="ethernet",e.MIXED="mixed",e.NONE="none",e.OTHER="other",e.UNKNOWN="unknown",e.WIFI="wifi",e.WIMAX="wimax"}(kl||(kl={}));const Pl=100,Ol=2e4,Il=.8,Rl=(e,t)=>{for(let i=0;i<e.length;i++)if(!t(e[i],i,e))return!1;return!0},Nl=["bitrate","minBitrate","maxBitrate","width","height"],Dl=(e,t)=>e.filter(e=>!!cl(e.type)&&(!!function(e){return ei(e.type)&&Rl(Nl,t=>!oi(e[t]))}(e)||!!(function(e){const{minBitrate:t,maxBitrate:i}=e;return oi(t)&&oi(i)}(e)&&e.minBitrate<=t&&t<=e.maxBitrate))),Vl=1.5,xl=1.25,Ll=50,Ml=2,Bl=!0,Fl=!0,Ul=!0,Hl="Yabs Ad Server",jl=[Hl,"AWAPS","Yandex Ad Server","Yandex Advertising Partner"],zl=Fa.InteractiveViewerLoader+".js",Wl=""+Ua+zl,Yl=async e=>{let{src:t,win:i=window}=e;x(t);if(!(t.split("?")[0].split("#")[0]===Wl))return await _e({src:t,win:i}),i.getVPAIDAd;const{getVPAIDAd:r}=await function(e){let{win:t=window}=void 0===e?{}:e;return new Promise((e,i)=>{Ce({moduleName:cn.InteractiveViewer,version:void 0,onSuccess:e,onError:i,win:t})})}({win:i});return i.getVPAIDAd=r,r};let Gl,ql;!function(e){e.js="js",e.video="video"}(Gl||(Gl={})),function(e){e.visitSite="visitSite",e.timeLeft="timeLeft",e.skip="skip",e.title="title",e.mute="mute",e.play="play",e.pause="pause"}(ql||(ql={}));const Xl=F(ql);let Kl,Ql;!function(e){e.EXTERNAL_CONFIG="EXTERNAL_CONFIG",e.INPAGE_OUT_OF_SIGHT="INPAGE_OUT_OF_SIGHT",e.BLOCKED_IS_DEPRECATED="BLOCKED_IS_DEPRECATED"}(Kl||(Kl={})),function(e){e.NORMAL="normal",e.THUMBNAIL="thumbnail",e.FULLSCREEN="fullscreen"}(Ql||(Ql={}));const Zl=2147483647,Jl=window.navigator;let $l=!1;if(Jl&&Jl.connection)try{o(Jl.connection.downlink)}catch(xA){$l=!0}const ec=$l;var tc,ic;ec&&Js.error({error:new Cs({code:"CONNECTION_DOWNLINK_PROPERTY_BROKEN",details:void 0})}),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.ETHERNET=1]="ETHERNET",e[e.WIFI=2]="WIFI",e[e.CELL_2G=3]="CELL_2G",e[e.CELL_3G=4]="CELL_3G"}(tc||(tc={})),function(e){e.BLUETOOTH="bluetooth",e.CELLULAR="cellular",e.ETHERNET="ethernet",e.MIXED="mixed",e.NONE="none",e.OTHER="other",e.UNKNOWN="unknown",e.WIFI="wifi",e.WIMAX="wimax"}(ic||(ic={}));const rc=100,nc=2e4,oc=.8,sc=(e=>{const t=fi(e);return!!t&&Boolean(Z(()=>t.isTypeSupported('video/webm; codecs="vorbis,vp8"')))})(window),ac=fi(),dc=cl("video/webm");const lc=sc&&dc,cc=ac&&Object(Sn.checkNativeCode)(ac),hc=l(zo),uc=window.AbortController&&window.fetch&&Object(Sn.checkNativeCode)(AbortController)&&Object(Sn.checkNativeCode)(fetch),pc=cc&&uc,Ac=e=>!!pc&&(-1!==e.type.toLowerCase().indexOf("video/webm")&&(!!lc&&!!hc)),fc=e=>{const{protocol:t}=O(e);return"blob:"===t?e:V(e,{[aa]:Ps})},mc=e=>Object.assign(Object.create(e),{url:fc(e.url)}),gc=0;class vc{constructor(){this.src=void 0,this.type=void 0,this.x=NaN,this.y=NaN,this.width=NaN,this.height=NaN}static fromVastIcon(e){const t=new vc;return t.src=e.src,t.type=e.program,t.x=e.xPosition,t.y=e.yPosition,t.width=e.width,t.height=e.height,t}}const yc=["image/jpeg","image/gif","image/png"];class wc{constructor(e,t,i){this.adBreak=e,this.vastAd=t,this.adConfig=i,this.duration=0,this.icons=void 0,this.imageSources=void 0,this.playbackParams=void 0,this.preloadVpaidWindow=void 0,this.preloaders=[],this.preloadPromise=void 0,this._isPreloaded=!1,this.isTrackingEventsEnabled=!0,this.imageSources=this.getMediaFiles().filter(e=>yc.indexOf(e.type)>-1).sort((e,t)=>yc.indexOf(e.type)-yc.indexOf(t.type)),this.icons=t.icons.map(e=>vc.fromVastIcon(e));const r=t.clickThrough,{imhoParams:n}=t,o=Boolean(n),s=n&&!n.showLabel?"":e.title,a={controlsVisibility:{[ql.timeLeft]:n?n.showCountDown:e.timeLeftShow,[ql.mute]:this.getMutedControlVisibility(),[ql.skip]:Fl,[ql.title]:Ul}};this.playbackParams={isClickable:t.isClickable&&Boolean(r),title:s,description:t.description,showGuiForVpaid:o,backgroundBlur:t.backgroundBlur,videoTimeout:e.videoTimeout,vpaidTimeout:e.vpaidTimeout,bufferFullTimeout:e.bufferFullTimeout,bufferEmptyLimit:e.bufferEmptyLimit,visitSiteShow:e.visitSiteShow,autoplay:!0,skipDelay:gi(t),pauseAllowed:!1,pauseOnClickThrough:!0,clickThroughUrl:r,clickThroughConfirmation:void 0,controlsSettings:a,trackingEvents:{}},isNaN(t.duration)||(this.duration=t.duration)}clone(){return new wc(this.adBreak,this.vastAd.clone(),this.adConfig)}trackError(e){We(e,this.vastAd.trackingEvents.error)}removeTrackingEvents(){this.isTrackingEventsEnabled=!1}trackEvent(e,t,i){if(!this.isTrackingEventsEnabled)return Fe("eventName ("+e+") was not tracked in MediaAd (disabled with method removeTrackingEvents)"),[];const r=!Object(Mo.isObject)(t);r&&(t=ld);let{visibility:n,size:o,screenSize:s,relativeSizeRatio:a,devicePixelRatio:d,downlink:l,videoContentSize:c,videoPixelRatio:h,videoFramesInfo:u}=t;!r&&"number"===typeof n&&Object(Mo.isObject)(o)&&"number"===typeof a&&Object(Mo.isObject)(s)&&"number"===typeof d&&"number"===typeof l&&Object(Mo.isObject)(c)&&"number"===typeof h&&Object(Mo.isObject)(u)||(Js.error({error:new Cs({code:"WRONG_ARGUMENTS_IN_MEDIA_AD_TRACK_EVENT",details:{visibility:n,stringVisibility:String(n),size:o,stringSize:String(o),screenSize:s,stringScreenSize:String(s),relativeSizeRatio:a,stringRelativeSizeRatio:String(a),devicePixelRatio:d,stringDevicePixelRatio:String(d),downlink:l,stringDownlink:String(l),videoContentSize:c,stringVideoContentSize:String(c),videoPixelRatio:h,stringVideoPixelRatio:String(h)}})}),"number"!==typeof n&&(n=ld.visibility),Object(Mo.isObject)(o)||(o=ld.size),"number"!==typeof a&&(a=ld.relativeSizeRatio),Object(Mo.isObject)(s)||(s=ld.screenSize),"number"!==typeof d&&(d=ld.devicePixelRatio),"number"!==typeof l&&(l=ld.downlink),Object(Mo.isObject)(c)||(c=ld.videoContentSize),"number"!==typeof h&&(h=ld.videoPixelRatio),Object(Mo.isObject)(u)||(u=ld.videoFramesInfo)),Fe("Track event ==> ",e);const p=this.vastAd.trackingEvents[e],A=te(o,e=>Math.round(e)),f=te(s,e=>Math.round(e)),m=te(c,e=>Math.round(e));return Ai({eventName:e,trackingEventDetails:i,trackingUrls:Array.isArray(p)?p:[],options:{visibility:n,size:A,relativeSizeRatio:a,screenSize:f,devicePixelRatio:d,downlink:l,videoContentSize:m,videoPixelRatio:h,videoFramesInfo:u}})}getMediaFiles(){let{mediaFiles:e}=this.vastAd;return this.adConfig.secureMode===el.OnlyYandexCreatives&&(e=e.filter(e=>mi(e)===Gl.video||xe(e.url))),e=e.map(e=>mi(e)!==Gl.video?e:mc(e))}hasMediaFiles(){const e=this.getMediaFiles();return Boolean(e&&e.length>0)}isNotReplacedBroadcastAd(){return this.vastAd.isNotReplacedBroadcastAd}getUploadedVastList(){return this.vastAd.vast?this.vastAd.vast.getUploadedVastList():[]}cancelPreloading(){this.preloadPromise=void 0,this.preloadVpaidWindow=void 0,this.preloaders.forEach(e=>e.destroy()),this.preloaders.length=0}isPreloaded(){return this._isPreloaded}preload(e){return void 0===this.preloadPromise&&(this.preloadPromise=this.preloadInternal(e).then(()=>{this._isPreloaded=!0})),this.preloadPromise}getIfIsRequiredHtmlControls(){const{isNonLinear:e,adSystem:t}=this.vastAd;return t===Hl||e}getJSMediaFile(){return this.getMediaFiles().find(e=>mi(e)===Gl.js)}getIsIndependentOnVideoElement(){const e=this.getJSMediaFile();if(!e)return!1;if("vpaid-motion.js"===x(e.url)&&xe(e.url)){if(void 0===this.vastAd.isIndependentOnVideoElement)return Js.event({name:"MotionWithoutExtensionIsIndependentOnVideoElement",probability:ws,data:void 0}),!0;if(!this.vastAd.isIndependentOnVideoElement)return Js.event({name:"MotionWithExtensionIsIndependentOnVideoElementFalseValue",probability:ws,data:void 0}),!0}return void 0!==this.vastAd.isIndependentOnVideoElement&&this.vastAd.isIndependentOnVideoElement}getIsYandexCreative(){return jl.indexOf(this.vastAd.adSystem)>-1}getPreloadVpaidWindow(){return this.preloadVpaidWindow}getMutedControlVisibility(){const{imhoParams:e,isNonLinear:t}=this.vastAd;return!t&&(e?e.showSoundButton:Bl)}async preloadInternal(e){const t=function(e){const{videoSlot:t,viewMode:i=Ql.NORMAL,preloadJS:r=!0,preloadVideo:n=!0}=e,{width:o=t.clientWidth,height:s=t.clientHeight}=e,a={clientWidth:o,clientHeight:s},{desiredBitrate:d=hi(a)}=e;let{preloadTimeout:l}=e;return("number"!==typeof l||l>Zl)&&(l=Zl),{preloadTimeout:l,width:o,height:s,desiredBitrate:d,viewMode:i,videoSlot:t,preloadJS:r,preloadVideo:n}}(e),{preloadJS:i,preloadVideo:r}=t;let n;try{i&&this.contentType===Gl.js?await this.preloadJS(t):r&&this.contentType===Gl.video&&await this.preloadVideo(t),n=new al(this.preloaders),await n.readyPromise}catch(xA){n&&n.destroy(),li(xA),Js.errorToStats(new Cs(xA,{code:"PRELOAD_ERROR"}))}}async preloadJS(e){const t=function(e,t){if(null==e)return{};var i,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)i=o[r],t.indexOf(i)>=0||(n[i]=e[i]);return n}(e,["preloadTimeout"]),i=this.getJSMediaFile();if(!i)return;const{url:r}=i,n=function(e){const t=Jt(e);return t.width="0",t.height="0",t.style.position="absolute",t}(document.body);if(!n)return;if(!n.contentWindow)return void $t(n);const o=n.contentWindow;if(this.preloaders.push({readyPromise:Promise.resolve(),isReady:()=>!0,destroy:()=>$t(n)}),await Yl({src:r,win:o}),!o.Ya||"function"!==typeof o.Ya.preloadVPAIDAd)return;this.preloadVpaidWindow=o;const s=o.Ya.preloadVPAIDAd(vi({},t,{creativeData:{AdParameters:this.vastAd.adParameters,VPAIDVersion:Ms}}));this.preloaders.push(s);const a=await s.readyPromise;this.vastAd.adParameters=a.AdParameters}async preloadVideo(e){let{width:t,height:i,desiredBitrate:r}=e,n=this.getMediaFiles();const o=n.filter(Ac);o.length&&(n=o);const s=di({mediaFiles:n,size:{clientWidth:t,clientHeight:i},desiredBitrate:r,forPreloading:!0});if(!s)return;const a=mc(s),d=new _l(a);this.preloaders.push(d);const l=await d.readyPromise;this.vastAd.mediaFiles=[l]}get sources(){return Js.warning({name:"UsingSourcesParameterOfMediaAd",message:"AdSDK Warning: MediaAd.sources parameter is deprecated. ad-sdk-js-dev@yandex-team.ru"}),this.getMediaFiles()}get clickThroughUrl(){return Js.warning({name:"UsingClickThroughUrlParameterOfMediaAd",message:"AdSDK Warning: MediaAd.clickThroughUrl parameter is deprecated. ad-sdk-js-dev@yandex-team.ru"}),this.playbackParams.clickThroughUrl}get contentType(){return this.getJSMediaFile()?Gl.js:Gl.video}}class bc{constructor(e){this.mediaAds=void 0,this.mediaAds=e.sort((e,t)=>e.vastAd.sequence-t.vastAd.sequence)}getDuration(){return this.mediaAds.reduce((e,t)=>e+t.duration,0)}getFirstMediaAd(){return this.mediaAds[0]}hasMedia(){return this.mediaAds.filter(e=>e.hasMediaFiles()).length>0}hasFilteredOutMediaFiles(){return this.mediaAds.some(e=>e.vastAd.mediaFiles.length!==e.getMediaFiles().length)}preload(e){return this.mediaAds.forEach(t=>{t.preload(e)}),()=>{this.mediaAds.forEach(e=>{e.cancelPreloading()})}}modify(e){return new bc(e(this.mediaAds))}}let Ec;!function(e){e.PLAY="play",e.PAUSE="pause",e.BUFFERING="buffering",e.END="end"}(Ec||(Ec={}));const _c=function(e,t,i,r){void 0===i&&(i=0),void 0===r&&(r=Sc);for(let n=i;n<e.length;n++)if(r(e[n],t))return n;return-1},Sc=(e,t)=>e===t,Tc=function(e){return void 0===e&&(e=window),fl(e)>11},Cc=xo(wn,e=>"("+e+"any-pointer:coarse)").join(","),kc=xo(wn,e=>"("+e+"touch-enabled)").join(","),Pc=ki(),Oc=e=>{try{return"display"in Oi(e)}catch(LA){return!1}},Ic="__yaMuffleVideoPlayPromiseOriginalPlay",Rc=dc?"data:video/webm;base64,GkXfowEAAAAAAAAfQoaBAUL3gQFC8oEEQvOBCEKChHdlYm1Ch4EEQoWBAhhTgGcBAAAAAAAByhFNm3RAHU27i1OrhBVJqWZTrIHlTbuMU6uEFlSua1OsggEj7AEAAAAAAAC5AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmAQAAAAAAADIq17GDD0JATYCNTGF2ZjU3Ljc2LjEwMFdBjUxhdmY1Ny43Ni4xMDBEiYhASwAAAAAAABZUrmsBAAAAAAAAYq4BAAAAAAAAWdeBAXPFgQGcgQAitZyDdW5khoZBX09QVVNWqoNjLqBWu4QExLQAg4EC4QEAAAAAAAARn4ECtYhA53AAAAAAAGJkgSBjopNPcHVzSGVhZAECOAGAuwAAAAAAH0O2dQEAAAAAAAAt54EAo4eBAACA/P/+o4eBABWA/P/+oAEAAAAAAAAPoYeBACkA/P/+daKDa3KD":"data:video/mp4;base64,AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAAMm1kYXTeBABMYXZjNTcuMTA3LjEwMABCIAjBGDghEARgjBwhEARgjBwhEARgjBwAAAMbbW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAAAEsAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAkV0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAAEsAAAAAAAAAAAAAAAEBAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAA1AAAEAAABAAAAAAG9bWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAC7gAAADgZVxAAAAAAALWhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAABTb3VuZEhhbmRsZXIAAAABaG1pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAABLHN0YmwAAABqc3RzZAAAAAAAAAABAAAAWm1wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAANmVzZHMAAAAAA4CAgCUAAQAEgICAF0AVAAAAAAH0AAAAEYwFgICABRGQVuUABoCAgAECAAAAMHN0dHMAAAAAAAAABAAAAAEAAAQAAAAAAQAABBgAAAABAAAEAAAAAAEAAAHuAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAAEAAAAAQAAACRzdHN6AAAAAAAAAAAAAAAEAAAAGAAAAAYAAAAGAAAABgAAABRzdGNvAAAAAAAAAAEAAAAsAAAAGnNncGQBAAAAcm9sbAAAAAIAAAAB//8AAAAcc2JncAAAAAByb2xsAAAAAQAAAAQAAAABAAAAYnVkdGEAAABabWV0YQAAAAAAAAAhaGRscgAAAAAAAAAAbWRpcmFwcGwAAAAAAAAAAAAAAAAtaWxzdAAAACWpdG9vAAAAHWRhdGEAAAABAAAAAExhdmY1Ny44My4xMDA=";let Nc,Dc;!function(e){e[e.MEDIA_ERR_CUSTOM=0]="MEDIA_ERR_CUSTOM",e[e.MEDIA_ERR_ABORTED=1]="MEDIA_ERR_ABORTED",e[e.MEDIA_ERR_NETWORK=2]="MEDIA_ERR_NETWORK",e[e.MEDIA_ERR_DECODE=3]="MEDIA_ERR_DECODE",e[e.MEDIA_ERR_SRC_NOT_SUPPORTED=4]="MEDIA_ERR_SRC_NOT_SUPPORTED",e[e.MEDIA_ERR_ENCRYPTED=5]="MEDIA_ERR_ENCRYPTED"}(Nc||(Nc={}));class Vc{constructor(e){this.code=0,this.message="","number"===typeof e?this.code=e:"string"===typeof e?this.message=e:Object(Mo.isObject)(e)&&("number"===typeof e.code&&(this.code=e.code),"string"===typeof e.message&&(this.message=e.message)),this.message||(this.message=Nc[this.code]||"")}}!function(e){e.AutomaticallyGenerated="AutomaticallyGenerated",e.HardcodedParams="HardcodedParams",e.IOS9OrLess="IOS9OrLess",e.HTML5VideoIsNotSupported="HTML5VideoIsNotSupported",e.WindowHasBeenActive="WindowHasBeenActive",e.RAAStopped="RAAStopped",e.OldIE="OldIE",e.MediaError="MediaError",e.NotRecognized="NotRecognized",e.YaBroAllowedToPlay="YaBroAllowedToPlay",e.TizenSmartTVModern="TizenSmartTVModern",e.Tizen23SmartTV="Tizen23SmartTV",e.WebOSSmartTV="WebOSSmartTV",e.TizenAVPlay="TizenAVPlay"}(Dc||(Dc={}));const xc=function(e){return void 0===e&&(e=window),v(e).toLowerCase().indexOf("web0s")>-1};let Lc;!function(e){e.VideoTagPaused="VideoTagPaused",e.VideoTagPausedAfterDurationChange="VideoTagPausedAfterDurationChange",e.VideoTagPausedAfterError="VideoTagPausedAfterError",e.PauseEvent="PauseEvent",e.ProgressEvent="ProgressEvent",e.PromiseResolve="PromiseResolve",e.PromiseReject="PromiseReject",e.PlayingEvent="PlayingEvent",e.Timeout="Timeout"}(Lc||(Lc={}));const Mc={once:!0,passive:!0},Bc=-1<ml&&ml<=16,Fc=Ui({canPlayUnMuted:!1,canPlayMuted:!1,detectionMethod:Dc.AutomaticallyGenerated}),Uc=Ui({canPlayUnMuted:!0,canPlayMuted:!0,detectionMethod:Dc.AutomaticallyGenerated}),Hc=500;class jc{constructor(e,t){let{checkSoundEnabled:i}=t;if(this.video=e,this.promise=void 0,this.stop=o,this.isStopped=!1,this.revertVideoState=o,"boolean"===typeof e.allowedToPlay)return this.promise=Promise.resolve(function(e){const t=e.muted,i=e.volume,r=()=>{e.muted=t,e.volume=i};return e.muted=!1,e.volume=1,e.allowedToPlay?(r(),Ui({canPlayUnMuted:!0,canPlayMuted:!0,detectionMethod:Dc.YaBroAllowedToPlay})):(e.muted=!0,e.volume=0,e.allowedToPlay?(r(),Ui({canPlayUnMuted:!1,canPlayMuted:!0,detectionMethod:Dc.YaBroAllowedToPlay})):(r(),Ui({canPlayUnMuted:!1,canPlayMuted:!1,detectionMethod:Dc.YaBroAllowedToPlay})))}(e)),this;const r=function(e){if(void 0===e&&(e=window),xc(e))return Ui({canPlayUnMuted:!0,canPlayMuted:!0,detectionMethod:Dc.WebOSSmartTV})}();if(void 0!==r)return this.promise=Promise.resolve(r),this;if(e.isAVPlay)return this.promise=Promise.resolve(Fi({},Uc,{detectionMethod:Dc.TizenAVPlay})),this;const n=function(e){if(void 0===e&&(e=window),yo(e))return gl(e)?Ui({canPlayUnMuted:!1,canPlayMuted:!1,detectionMethod:Dc.Tizen23SmartTV}):Ui({canPlayUnMuted:!0,canPlayMuted:!0,detectionMethod:Dc.TizenSmartTVModern})}();if(void 0!==n)return this.promise=Promise.resolve(n),this;if(Na&&Oa<=9)return this.promise=Promise.resolve(Fi({},Fc,{detectionMethod:Dc.IOS9OrLess})),this;if(!ll)return this.promise=Promise.resolve(Fi({},Fc,{detectionMethod:Dc.HTML5VideoIsNotSupported})),this;if(Bc)return this.promise=Promise.resolve(Fi({},Uc,{detectionMethod:Dc.OldIE})),this;if(this.getIsActiveWindow())return this.promise=Promise.resolve(Fi({},Uc,{detectionMethod:Dc.WindowHasBeenActive})),this;const s=this.video.paused,a=document.createElement("div");a.style.display="none";const{muted:d,volume:l}=e,c=this.preventPause(()=>xi(e,{src:Rc}));let h;this.revertVideoState=ae(()=>{c(),e.load(),e.muted=d,e.volume=l,s&&this.video.pause(),!s&&e.paused&&Di(Mi(this.video)),C(a)}),this.promise=new Promise(async(e,t)=>{let r,n,o;if(h=t,i){const e=await this.requestAutoplayAbilityByMuted(!1);n=e.autoplayAbility,r=e.detectionMethod}else n=!1;if(!this.isStopped){if(n)o=!0;else{const e=await this.requestAutoplayAbilityByMuted(!0);o=e.autoplayAbility,r=r&&r!==e.detectionMethod?"DifferentDetectionMethods unmuted=["+r+"] muted=["+e.detectionMethod+"]":e.detectionMethod}this.isStopped||(this.revertVideoState(),this.isStopped=!0,e(Ui({canPlayUnMuted:n,canPlayMuted:o,detectionMethod:r||Dc.NotRecognized})))}}),this.stop=()=>{this.isStopped||(this.isStopped=!0,h(new Error("requestAutoplayAbility has been stopped")),this.revertVideoState())}}async requestAutoplayAbilityByMuted(e){const{video:t}=this;if(this.preventPause(()=>{t.load()}),await vo(0),this.isStopped)return{autoplayAbility:!1,detectionMethod:Dc.RAAStopped};t.muted=e,t.volume=e?0:1;const i=await new Promise(e=>{Bi(t,{useProgressEvent:!0,timeoutForNonPromisePlay:Hc}).then(t=>{e({autoplayAbility:!0,detectionMethod:t})}).catch(i=>{const r=function(e){const{error:t}=e;return new Vc(t)}(t);r&&r.code===Nc.MEDIA_ERR_DECODE?setTimeout(()=>{e({autoplayAbility:!0,detectionMethod:Dc.MediaError})},0):e({autoplayAbility:!1,detectionMethod:i})})});return this.isStopped?{autoplayAbility:!1,detectionMethod:Dc.RAAStopped}:i}preventPause(e){const{paused:t}=this.video,i=e();return t||Di(Mi(this.video)),i}getIsActiveWindow(){const e=function(e){const{ownerDocument:t}=e;if(!t)return;const{defaultView:i}=t;return i||void 0}(this.video);if(!e)return!1;const t=function(e){const t=e.navigator;if(!t)return;const{userActivation:i}=t;if(!Object(Mo.isObject)(i))return;const{isActive:r,hasBeenActive:n}=i;return{isActive:r,hasBeenActive:n}}(e);return Boolean(t&&t.hasBeenActive)}}const zc="ru",Wc="TranslatorError";class Yc extends Fn{constructor(){super(...arguments),this.name=Wc}}const Gc=function(e,t){void 0===t&&(t=!1);const i=(t,i,r)=>e[t][i][r],r=(t,i,r)=>e[t]&&e[t][i]&&e[t][i][r],n=e=>{let{keyset:t,key:n,lang:o=zc,onError:s,throwErr:a=!0}=e;if(r(o,t,n))return i(o,t,n);if(r(zc,t,n))return i(zc,t,n);{const e=new Yc("Tanker locale for lang="+o+", keyset="+t+", key="+n+" not found");return a&&j(e),"function"===typeof s&&s(e),""}};if(t){return Io(n,e=>{let{keyset:t,key:i,lang:r}=e;return t+"_"+i+"_"+r})}return n}(i(31)),qc=function(e,t){return void 0===t&&(t=zc),Gc({keyset:"adsdk",key:e,lang:t})};var Xc=i(5),Kc=i.n(Xc);const Qc=i(32),Zc=function e(t,i){void 0===i&&(i={preserveConstructors:!0});let r=t;if(no(t)){return t.map(t=>e(t,i))}return Hd(t)?new Date(t.getTime()):(!l(t)&&Object(Mo.isObject)(t)&&(r=i.preserveConstructors?Qc(t):{},k(t,(t,n)=>{r[n]=e(t,i)})),r)},Jc={controlsVisibility:{}};let $c,eh;!function(e){e.top="top",e.bottom="bottom",e.auto="auto",e["bottom-right"]="bottom-right"}($c||($c={})),function(e){e.dark="dark",e.light="light"}(eh||(eh={}));const th=.5,ih=!1,rh=0,nh=0,oh=!1,sh=0;class ah{constructor(e,t,i,r,n){void 0===n&&(n=!0),this.el=void 0,this.hideReasons=[],this.styleDisplay=void 0,this.el=Ne(t,r),this.el.addEventListener("click",e=>{n&&e.stopPropagation(),"function"===typeof i&&i()}),this.styleDisplay=this.el.style.display,this.el.style.display="none",e.appendChild(this.el)}setText(e){return this.el.innerHTML=e.trim()||"",this}setVisible(e){return 0===this.hideReasons.length&&this.isVisible!==Boolean(e)&&(this.el.style.display=e?this.styleDisplay:"none"),this}getClasses(){return this.el.className.split(/\s+/)}hasClass(e){return this.getClasses().indexOf(e)>-1}addClass(e){return this.hasClass(e)||(this.el.className+=" "+e),this}removeClass(e){if(this.hasClass(e)){const t=this.getClasses();t.splice(t.indexOf(e),1),this.el.className=t.join(" ")}return this}setClasses(e){return this.el.className=e,this}hide(){return this.setVisible(!1)}show(){return this.setVisible(!0)}addHideReason(e){return this.hideReasons.indexOf(e)<0&&(this.hide(),this.hideReasons.push(e)),this}removeHideReason(e){return this.hideReasons=this.hideReasons.filter(t=>t!==e),this}setBlocked(e){return e?this.addHideReason(Kl.BLOCKED_IS_DEPRECATED):this.removeHideReason(Kl.BLOCKED_IS_DEPRECATED),this}block(){return this.setBlocked(!0)}unBlock(){return this.setBlocked(!1)}isBlocked(){return this.hideReasons.length>0}appendChild(e){return this.el.appendChild(e),this}removeChild(e){return this.el.removeChild(e),this}get isVisible(){return"none"!==this.el.style.display}}class dh{static toEventsArr(e,t){const i=[];if("string"===typeof e){if(!t)throw new Error("AdSDK: EventBus: you MUST pass function with string param");i.push({name:e,callback:t})}else if(e instanceof Array){for(const r in e)if(e.hasOwnProperty(r)){if("function"!==typeof t)throw new Error("You MUST pass callback in the second parameter with eventsName array");e.hasOwnProperty(r)&&i.push({name:e[r],callback:t})}}else{if("object"!==typeof e)throw new Error("Event name MUST be a string");for(const t in e)e.hasOwnProperty(t)&&i.push({name:t,callback:e[t]})}return i}static addEvent(e,t){const{name:i,callback:r}=t;if("function"!==typeof r)throw new Error("Event listener MUST be a function");e[i]||(e[i]=[]),-1===e[i].indexOf(r)&&e[i].push(r)}static addEvents(e,t){for(const i in t)t.hasOwnProperty(i)&&dh.addEvent(e,t[i])}static offCallbackByCallbacks(e,t){if(!e)return;const i=e.indexOf(t);-1!==i&&e.splice(i,1)}constructor(){this._events=void 0,this.resetEventBus()}resetEventBus(){return this._events={on:{},once:{}},this}on(e,t){return dh.addEvents(this._events.on,dh.toEventsArr(e,t)),this}once(e,t){return dh.addEvents(this._events.once,dh.toEventsArr(e,t)),this}when(e){return new Promise(t=>{if("string"===typeof e)this.once(e,t);else{if(!(e instanceof Array))throw new Error('EventBus "when" method can take a string on string array parameter');for(const i in e)e.hasOwnProperty(i)&&this.once(e[i],t)}})}emit(e,t){if("string"===typeof e)this.emitEvent(e,t);else if(e instanceof Array)for(const i in e)e.hasOwnProperty(i)&&this.emitEvent(e[i],t);else if("object"===typeof e)for(const i in e)e.hasOwnProperty(i)&&this.emitEvent(i,e[i]);return this}emitEvent(e,t){this.emitEvents(this._events.on[e],t),this.emitEvents(this._events.once[e],t),this._events.once[e]=[]}emitEvents(e,t){if(e)for(const i in e)e.hasOwnProperty(i)&&e[i].apply(this,[t])}}const{locals:lh}=Kc.a,ch=640;class hh extends dh{constructor(e,t){super(),this.container=e,this.wrapper=void 0,this.topRightBlock=void 0,this.controls=void 0,this.onMuteButtonClick=new ho,this.sizeSensor=void 0,this.wrapper=new ah(e,lh.yaAdSdkGui,void 0,void 0,!1),this.sizeSensor=new mo(this.wrapper.el),this.sizeSensor.onResize.add(e=>{let{width:t}=e;t<=ch?this.wrapper.addClass(lh.yaAdSdkGui_small):this.wrapper.removeClass(lh.yaAdSdkGui_small)});const i=Oi(e).position;i&&"static"!==i||(e.style.position="relative");const r=this.topRightBlock=Ne(lh.topRightBlock),n=this.wrapper;7===Oa&&(n.el.style.display="none"),Pc&&n.addClass(lh.yaAdSdkGui_mobile),n.appendChild(r);const o=Ne(lh.visitSiteWrapper);n.appendChild(o),this.controls={timeLeft:new ah(n.el,lh.timeLeft,void 0,qc("TIME_LEFT",t.lang)+" 00"),visitSite:new ah(o,lh.visitSite+" "+lh.pointer,()=>this.emit("click"),qc("VISIT_SITE",t.lang),!1),play:new ah(n.el,lh.play,()=>this.emit("play")),pause:new ah(n.el,lh.pause,()=>this.emit("pause")),mute:new ah(r,lh.mute,()=>this.onMuteButtonClick.dispatch(void 0)),skip:new ah(n.el,lh.skip,()=>this.emit("skip"),qc("SKIP",t.lang)),title:new ah(n.el,lh.title,()=>this.emit("click"))}}applyControlsSettings(e){for(const t of F(this.controls)){const i=this.controls[t];i&&(e&&!1===e.controlsVisibility[t]?i.addHideReason(Kl.EXTERNAL_CONFIG):i.removeHideReason(Kl.EXTERNAL_CONFIG))}}addSkin(){Ja.DEFAULT_CSS?function(e){if(!document.querySelector("style[data-yamediaad]")&&Ja.DEFAULT_CSS){Pe(e,Ja.DEFAULT_CSS).setAttribute("data-yamediaad","")}}(this.container):Pe(this.wrapper.el,Kc.a.toString())}setMuted(e){this.controls.mute.setClasses(e?lh.unMute:lh.mute)}show(){this.wrapper.show()}hide(){this.wrapper.hide()}destroy(){C(this.wrapper.el),this.sizeSensor.destroy()}getBlockedControls(){return te(this.controls,e=>e.isBlocked())}setBlockedControls(e){k(e,(e,t)=>{this.controls[t].setBlocked(e)})}}const uh=140,ph=[ql.timeLeft,ql.mute,ql.skip,ql.title,ql.play,ql.pause],Ah=180,fh=320,mh=160,gh=300,vh=Boolean(zs),yh={height:0,width:0},wh=function(e){if(void 0===e&&(e=window),void 0===e.screen)return yh;const{width:t=yh.width,height:i=yh.height}=e.screen;return{width:t,height:i}},bh=function(e){return void 0===e&&(e=window),wo(e)||ce(e)||function(e){return void 0===e&&(e=window),/Apple/.test(e.navigator.vendor)&&ki(e)}(e)}(),Eh=15,_h=1e3,Sh=[{enabled:"webkitFullscreenEnabled",element:"webkitFullscreenElement",request:"webkitRequestFullscreen",exit:"webkitExitFullscreen",events:{change:"webkitfullscreenchange",error:"webkitfullscreenerror"}},{enabled:"fullscreenEnabled",element:"fullscreenElement",request:"requestFullscreen",exit:"exitFullscreen",events:{change:"fullscreenchange",error:"fullscreenerror"}},{enabled:"mozFullScreenEnabled",element:"mozFullScreenElement",request:"mozRequestFullScreen",exit:"mozCancelFullScreen",events:{change:"mozfullscreenchange",error:"mozfullscreenerror"}},{enabled:"msFullscreenEnabled",element:"msFullscreenElement",request:"msRequestFullscreen",exit:"msExitFullscreen",events:{change:"MSFullscreenChange",error:"MSFullscreenError"}},{enabled:"webkitSupportsFullscreen",element:"webkitDisplayingFullscreen",request:"webkitEnterFullscreen",exit:"webkitExitFullscreen",events:{change:"webkitfullscreenchange",error:"webkitfullscreenerror"}}],Th="Fullscreen is not supported";class Ch{constructor(e,t){void 0===e&&(e=window),this.handlers=[],this.names=void 0,this.onDestroy=new ho,this.win=void 0,this.video=void 0,this.fullscreenElement=null,this.setFullScreenElementFromAPI=()=>{const e=function(e,t){const i=ir(e,t);if(!i)return null;let r=e.document[i.element];return t&&t[i.element]&&(r=t),r||null}(this.win,this.video);this.setFullscreenElement(e)},this.win=e,this.video=t,t&&Na&&(this.onDestroy.addOne(a(t,"webkitbeginfullscreen",()=>{this.setFullscreenElement(t)})),this.onDestroy.addOne(a(t,"webkitendfullscreen",()=>{this.setFullscreenElement(null)}))),this.names=ir(e,t),this.names&&(this.onDestroy.addOne(a(this.win.document,this.names.events.change,this.setFullScreenElementFromAPI)),this.setFullScreenElementFromAPI())}requestFullscreenForElement(e,t){if(void 0===this.names)throw new this.win.Error(Th);{const{request:i}=this.names;if(!(i in e))throw new this.win.Error(Th);e[i](t)}}isFullscreen(){return null!==this.fullscreenElement}exit(){if(void 0===this.names)throw new Error(Th);this.video&&this.fullscreenElement===this.video?this.video[this.names.exit]():this.win.document[this.names.exit]()}getFullscreenElement(){return this.fullscreenElement}addHandler(e){if("function"!==typeof e)throw new this.win.Error("Fullscreen handler must be a function");this.handlers.push(e)}removeHandler(e){this.handlers=this.handlers.filter(t=>t!==e)}destroy(){this.handlers.length=0,this.onDestroy.dispatch(void 0)}setFullscreenElement(e){this.fullscreenElement=e,this.handlers.forEach(t=>t(e))}}const kh=null===dl.onwaiting,Ph=!kh||ml>0||bh?(e,t)=>{let i=0,r=!1;return f(()=>{const n=e.currentTime,o=e.duration,s=1/po;if(!e.paused){const e=i+s;r?n>e&&(t(!1),r=!1):n<e&&n!==o&&(t(!0),r=!0)}i=n})}:(e,t)=>{let i=!1;const r=a(e,"waiting",()=>{i||(i=!0,t(!0))},{passive:!0}),n=a(e,"playing",()=>{i&&(i=!1,t(!1))},{passive:!0}),o=a(e,"canplay",()=>{i&&(i=!1,t(!1))},{passive:!0});return()=>{r(),n(),o()}},Oh=2,Ih=50;class Rh{constructor(e){this.video=e,this.unsubscribeVideoTimeupdate=void 0,this.lastLegalCurrentTime=void 0,this.lastTimestamp=void 0,this.seekAllowed=!0,this.onVideoTimeUpdate=()=>{const{currentTime:e}=this.video;this.isSeekingIllegal()?this.video.currentTime=this.lastLegalCurrentTime:(this.lastLegalCurrentTime=e,this.lastTimestamp=Date.now())},this.lastLegalCurrentTime=e.currentTime,this.lastTimestamp=Date.now(),this.unsubscribeVideoTimeupdate=a(e,"timeupdate",this.onVideoTimeUpdate)}setSeekAllowed(e){this.seekAllowed=e}isSeekingIllegal(){return!this.seekAllowed&&this.isSeekingVideo()}destroy(){this.seekAllowed=!0,this.unsubscribeVideoTimeupdate()}isSeekingVideo(){const{currentTime:e,playbackRate:t}=this.video;if(this.lastLegalCurrentTime){const i=Date.now()-this.lastTimestamp;if(i>Ih){if((e-this.lastLegalCurrentTime)/(i/1e3)>(t||1)*Oh)return!0}}return!1}}class Nh{constructor(e){this.violatedSources=[],this.unsubscribeEvent=void 0,this.securityPolicyViolationCallback=e=>{let{blockedURI:t,violatedDirective:i,originalPolicy:r}=e;if("media-src"!==i)return;const n={blockedURI:t,violatedDirective:i,originalPolicy:r};this.violatedSources.push(n)},this.unsubscribeEvent=a(e,"securitypolicyviolation",this.securityPolicyViolationCallback)}getViolatedSourceBySrc(e){return this.violatedSources.find(t=>{let{blockedURI:i}=t;return 0===e.indexOf(i)})}destroy(){this.violatedSources=[],this.unsubscribeEvent()}}const Dh=async e=>{let{src:t,videoNode:i,addTeardownHandler:r}=e;if(!ac)throw new Error("No MSE");if(!pc)throw new Error("Environment is not supported");const n=new ac,o=URL.createObjectURL(n);i.src=o,r(()=>{(e=>{e.removeAttribute("src"),e.load()})(i)});const s=(e,t)=>new Promise(i=>{const n=a(e,t,()=>i(),{once:!0});r(n)});await s(n,"sourceopen");const d=n.addSourceBuffer('video/webm; codecs="vorbis,vp8"');r(()=>d.abort());const l=new AbortController;r(()=>l.abort());const c=await fetch(t,{signal:l.signal});if(!c.body)throw new ReferenceError("empty body");const h=c.body.getReader();let u;r(()=>h.cancel());const p=e=>{if(!u)return void(u=e);const t=new Uint8Array(u.length+e.length);t.set(u),t.set(e,u.length),u=t};let A;r(()=>{u=void 0});const f=await h.read();await async function e(t){if(t.done)return void(await async function(){for(;d.updating;)await s(d,"updateend");n.endOfStream()}());p(t.value),await async function e(){if(u){if(d.updating){if(A)return;return s(d,"updateend").then(()=>{A=!1,e()}),void(A=!0)}d.appendBuffer(u),u=void 0}}();const i=await h.read();await e(i)}(f)},Vh=e=>{let{src:t,videoNode:i,onError:r}=e;const n=[],o=()=>{Z(()=>u(n)),n.length=0},s=e=>{o(),r(e)},a=e=>n.push(()=>Z(e));return Z(()=>Dh({src:t,videoNode:i,addTeardownHandler:a}).catch(s),s),o},xh=1,Lh=Math.ceil(2/(po/1e3)),Mh=500,Bh=.25,Fh=1e3,Uh=1e3,Hh=.1,jh=bh;class zh extends co{constructor(e){super(),this.videoNode=e,this.onClick=new ho,this.onCurrentPositionChange=new ho,this.playingState=new uo(this.videoNode.paused?Ec.PAUSE:Ec.PLAY),this.onError=new ho,this.onEnd=new ho,this.onMuteChange=new ho,this.onPlay=new ho,this.onPlayAfterPause=new ho,this.onPause=new ho,this.onBufferingChange=new ho,this.onPlaying=new ho,this.fullscreenApi=void 0,this.seekController=void 0,this.cspErrorHandler=void 0,this.seekController=new Rh(e);const t=er(e)?e.ownerDocument.defaultView:window;this.fullscreenApi=new Ch(t,e),this.cspErrorHandler=new Nh(t);let i=e.paused,r=!1;this.playingState.add(e=>{switch(e){case Ec.PLAY:i&&(i=!1,this.onPlayAfterPause.dispatch(void 0)),this.onPlay.dispatch(void 0);break;case Ec.PAUSE:i=!0,this.onPause.dispatch(void 0);break;case Ec.END:i=!0,this.onEnd.dispatch(void 0)}const t=e===Ec.BUFFERING;r!==t&&(r=t,this.onBufferingChange.dispatch(r))});let n=!1;const o={error:()=>{const{src:e}=this.videoNode,t=()=>{const t=this.cspErrorHandler.getViolatedSourceBySrc(e);return t?new Cs({code:"MEDIA_SRC_VIOLATES_CSP_POLICY",details:{violatedSource:t}}):void 0},i=()=>{const e=t();e&&Js.error({error:e})};let r=t();if(!r){r=this.getVideoNodeError();const{promise:e,clear:t}=go(Fh);this.addDestroyHandler(()=>{t(),i()}),e.then(i)}this.onError.dispatch(r)},play:()=>{this.playingState.dispatch(Ec.PLAY)},playing:()=>{n=this.getMuted(),this.onPlaying.dispatch(void 0),this.playingState.dispatch(Ec.PLAY)},volumechange:()=>{const e=this.getMuted();n!==e&&(n=e,this.onMuteChange.dispatch(e))}};this.subscribeClick(),this.subscribeTimeupdate(),this.subscribePause(),this.subscribeEnded(),this.subscribeBuffering();for(const s in o)o.hasOwnProperty(s)&&e.addEventListener(s,o[s]);this.addDestroyHandler(()=>{for(const t in o)o.hasOwnProperty(t)&&e.removeEventListener(t,o[t]);this.fullscreenApi.destroy(),this.seekController.destroy(),this.cspErrorHandler.destroy()})}play(){const e=this.videoNode.play();e&&"function"===typeof e.catch&&e.catch(e=>{Js.error({error:new Cs(e,{code:"VIDEO_PLAY_REJECTED",details:{errorCode:e.code,errorName:e.name,errorMessage:e.message}})})})}pause(){this.videoNode.pause()}setMute(e){this.setVolume(e?0:1)}setSrc(e){const{url:t}=e,{videoNode:i}=this,r=()=>{i.src=t,i.load()};rr(i,()=>{Ac(e)?Vh({src:t,videoNode:i,onError:e=>{Js.error({error:new Cs(e,{code:"MSE_VIDEO_ATTACH_FAIL",details:{errorCode:e.code,errorName:e.name,errorMessage:e.message}})}),r()}}):r()})}getWidth(){return this.videoNode.clientWidth}getHeight(){return this.videoNode.clientHeight}getCurrentTime(){return function(e){const t=e.currentTime||0;return Math.max(0,t)}(this.videoNode)}getDuration(){return function(e){const t=e.duration||0;return Math.max(0,t)}(this.videoNode)}setCurrentTime(e){this.videoNode.currentTime=e}setVisibleControls(e){this.videoNode.controls=e}setPoster(e){this.videoNode.poster=e}isFullscreen(){return this.fullscreenApi.getFullscreenElement()===this.videoNode}getPaused(){return this.videoNode.paused}getMuted(){return 0===this.getVolume()}getVolume(){return(e=this.videoNode).muted?0:e.volume;var e}setVolume(e){!function(e,t){rr(e,()=>{e.volume=t,e.muted=0===t})}(this.videoNode,e)}setSeekAllowed(e){this.seekController.setSeekAllowed(e)}getVideoNodeError(){const{videoNode:e}=this,{src:t,currentSrc:i,currentTime:r,duration:n,error:o}=e,s=o&&o.code,a={code:s,message:o&&o.message||"",src:t,currentSrc:i,currentTime:r,duration:n};if(!o||"undefined"===typeof MediaError)return new Cs({code:"VIDEO_ERROR",details:a});switch(s){case MediaError.MEDIA_ERR_ABORTED:return new Cs({code:"MEDIA_ERR_ABORTED",details:a});case MediaError.MEDIA_ERR_NETWORK:return new Cs({code:"MEDIA_ERR_NETWORK",details:a});case MediaError.MEDIA_ERR_DECODE:return new Cs({code:r>0?"MEDIA_ERR_DECODE_DURING_PLAYBACK":"MEDIA_ERR_DECODE_ON_START",details:a});case MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:return new Cs({code:"MEDIA_ERR_SRC_NOT_SUPPORTED",details:a});default:return new Cs({code:"MEDIA_ERROR_UNRECOGNIZED",details:a})}}subscribeClick(){const e=()=>{this.onClick.dispatch(void 0)},t=Oa>=11?tr(this.videoNode,e):a(this.videoNode,"click",e);this.addDestroyHandler(t)}subscribeTimeupdate(){let e=0;const t=()=>{this.seekController.isSeekingIllegal()||(e=Date.now(),this.onCurrentPositionChange.dispatch({currentTime:this.getCurrentTime(),duration:this.getDuration()}))},i=a(this.videoNode,"timeupdate",t,{passive:!0}),r=f(()=>{const i=Date.now()-e;this.playingState.getValue()===Ec.PLAY&&i>Mh&&t()});this.addDestroyHandler(i),this.addDestroyHandler(r)}subscribePause(){const e=a(this.videoNode,"pause",()=>{this.getCurrentTime()>=this.getDuration()||this.playingState.dispatch(Ec.PAUSE)},{passive:!0}),t=f(()=>{this.playingState.getValue()===Ec.PLAY&&this.videoNode.paused&&(Js.event({name:"DetectVideoPauseByPausedProperty",data:void 0}),this.playingState.dispatch(Ec.PAUSE))});this.addDestroyHandler(e),this.addDestroyHandler(t)}subscribeEnded(){const e=a(this.videoNode,"ended",()=>{this.seekController.isSeekingIllegal()||(this.getCurrentTime()+Bh>=this.getDuration()?this.playingState.dispatch(Ec.END):Fe("video ended ignored with currentTime=["+this.getCurrentTime()+"] duration=["+this.getDuration()+"]"))},{passive:!0});let t=0,i=NaN;const r=f(()=>{const e=this.getDuration(),r=this.getCurrentTime(),{paused:n}=this.videoNode,o=this.playingState.getValue();if(e>0&&r>=e)return void(o!==Ec.END&&(Js.event({name:"DetectVideoEndByCurrentTime",data:void 0}),this.playingState.dispatch(Ec.END)));const s=!n&&e>0&&r===i&&e-r<xh&&this.playingState.getValue()===Ec.PLAY;i=r,s?t>=Lh?(t=0,o!==Ec.END&&(Js.event({name:"DetectVideoEndByStalledOffset",data:void 0}),this.playingState.dispatch(Ec.END))):t++:t=0});this.addDestroyHandler(e),this.addDestroyHandler(r)}subscribeBuffering(){let e=o;const t=Ph(this.videoNode,t=>{const i=t?Ec.BUFFERING:this.videoNode.paused?Ec.PAUSE:Ec.PLAY;if(e(),this.playingState.dispatch(i),t&&jh){const{clear:t,promise:i}=go(Uh);e=t,this.addDestroyHandler(t),i.then(()=>{if("buffering"!==this.playingState.getValue())return;const e=this.getCurrentTime()+Hh;this.setCurrentTime(e);const{currentSrc:t,src:i}=this.videoNode;Js.event({name:"RecoverSafariPlayingHangup",data:{currentSrc:t,src:i,currentTime:this.getCurrentTime(),duration:this.getDuration()}})})}});this.addDestroyHandler(t)}}const Wh=new RegExp(["box-flex","box-flex-group","column-count","fill-opacity","flex","flex-grow","flex-positive","flex-shrink","flex-negative","font-weight","line-height","opacity","order","z-index","zoom"].join("|"),"i"),Yh=(e,t,i,r)=>{Object(Mo.isObject)(t)?(r=Boolean(i),k(t,(t,i)=>{nr(e,i,t,r)})):nr(e,t,i,r)},Gh=.8,qh=1.6,Xh=1.2,Kh=50,Qh=5,Zh=2,Jh=100,$h=1.8,eu=3,tu=.1,iu=.3,ru=.1;class nu{constructor(e,t){this.container=e,this.videoNode=t,this.blurWrapper=void 0,this.canvas=void 0,this.context=void 0,this.isStarted=!1,this.isBlurRequired=void 0,this.framesInterval=Jh,this.lastTime=void 0,this.slowFramesCounter=0,this.slowDevice=!1,this.repaintTimeoutId=0,this.rafId=0,this.repaint=()=>{const{duration:e,currentTime:t,videoWidth:i,videoHeight:r}=this.videoNode,n=e-t<=iu;if(!this.isStarted||n)return this.clearRepaintTimeout(),void this.setVisibility(!1);if(!i)return void this.setRepaintTimeout();const{clientWidth:o,clientHeight:s}=this.container,a=i/r,d=a-o/s;if(void 0===this.isBlurRequired){if(this.isBlurRequired=Math.abs(d)>tu,!this.isBlurRequired)return void this.setVisibility(!1);this.prepareBlurCanvas(a,d),this.setVisibility(!0)}const{context:l,videoNode:c}=this,{width:h,height:u}=this.canvas;if(this.slowDevice){const e=Zh;l.drawImage(c,0,0,i,r,0,0,e,e),l.drawImage(this.canvas,0,0,e,e,0,0,h,u)}else l.drawImage(c,0,0,i,r,0,0,h,u);l.globalAlpha=ru,this.handleSlowDevices(),this.setRepaintTimeout()};const i=document.createElement("div"),r=document.createElement("canvas");this.context=r.getContext("2d"),i.appendChild(r),he(e,i),this.blurWrapper=i,this.canvas=r,this.appendStyles()}start(){this.isStarted||(this.isStarted=!0,this.isBlurRequired=void 0,this.repaint(),this.canvas.style.display="")}stop(){this.isStarted=!1,this.isBlurRequired=!1,this.clearRepaintTimeout(),this.setVisibility(!1)}destroy(){this.stop(),this.blurWrapper.style.display="none",C(this.blurWrapper)}appendBlurScale(e,t){const i=[qh,Math.max(e,qh)];t&&i.reverse(),Yh(this.canvas,{transform:"translate(-50%,-50%) scaleX("+i[0]+") scaleY("+i[1]+")"})}setCanvasOpacity(e){Yh(this.canvas,{opacity:e})}slimplifyBlur(){const e=2*Qh,{clientWidth:t,clientHeight:i}=this.container;this.setCanvasSize(t+e,i+e);const r="-"+Qh+"px";Yh(this.canvas,{left:r,top:r,bottom:r,right:r,transform:"",filter:"blur("+Qh+"px)"})}appendStyles(){const e={position:"absolute",margin:0,padding:0,top:0,bottom:0,left:0,right:0,overflow:"hidden"},t=Oi(this.videoNode).position;-1===_c(["fixed","absolute"],t)&&(e["z-index"]="-1"),Yh(this.blurWrapper,e),Yh(this.canvas,{position:"absolute",margin:0,padding:0,left:"50%",top:"50%",transform:"translate(-50%,-50%) scaleX("+Xh+") scaleY("+Xh+")",filter:"blur("+Kh+"px)",opacity:0,transition:"opacity 1s"})}setRepaintTimeout(){this.clearRepaintTimeout(),this.repaintTimeoutId=window.setTimeout(()=>this.rafId=Dn(this.repaint),this.framesInterval)}clearRepaintTimeout(){clearTimeout(this.repaintTimeoutId),Vn(this.rafId)}handleSlowDevices(){const e=Date.now();if(this.lastTime){const t=e-this.lastTime;t>this.framesInterval*$h?(this.slowFramesCounter++,this.slowFramesCounter>=eu&&(this.framesInterval+=t,this.slowFramesCounter=0,this.slowDevice||(this.slowDevice=!0,this.slimplifyBlur()))):this.slowFramesCounter=0}this.lastTime=e}prepareBlurCanvas(e,t){const{container:i,videoNode:r}=this,n=t<0,o=n?r.offsetHeight*e:r.offsetWidth/e,s=n?o:r.offsetWidth,a=n?r.offsetHeight:o,d=(n?i.offsetWidth:i.offsetHeight)/o*Gh;this.setCanvasSize(s,a),this.appendBlurScale(d*Gh,n)}setCanvasSize(e,t){const{canvas:i}=this;i.width=e,i.height=t}setVisibility(e){this.setCanvasOpacity(e?1:0)}}const ou=10;class su extends dh{constructor(e){super(),this.wrapperNode=e,this.slotVisibilitySensor=void 0,this.slotSizeSensor=void 0,this.onChangeHover=void 0,this.isHovered=void 0,this.onReady=new ho,this.onDestroy=new ho,this.onBeforeAdStart=new ho,this.onAdStart=new ho,this.onAdMediaStart=new ho,this.onAllAdPodComplete=new ho,this.onAdMediaEnd=new ho,this.onAdEnd=new ho,this.onAdSkipped=new ho,this.onClickThrough=new ho,this.isFinished=void 0,this.shouldHandleResize=!0,this.slotVisibilitySensor=new Po(e,{numberOfMeasurementSteps:ou});try{this.slotSizeSensor=new mo(e)}catch(xA){const{ownerDocument:i}=e,r=i&&i.defaultView,n=r&&r.Element,o=e instanceof n;throw Js.error({error:new Cs(xA,{code:"CREATE_SIZE_SENSOR_ERROR",details:{typeofElement:typeof e,stringElement:String(e),stringifiedElement:kt(e),element:e,elementConstructorName:e.constructor&&e.constructor.name,ownerDocument:String(e.ownerDocument),defaultView:String(r),GlobalElement:String(n),isInstanceof:o}})}),xA}this.slotSizeSensor.onResize.add(e=>{this.shouldHandleResize&&this.resizeAd(e.width,e.height)});const{signal:t,unsubscribe:i}=function(e){const t=new ho,i=()=>{t.dispatch(!0)},r=()=>{t.dispatch(!1)};return e.addEventListener("mouseenter",i),e.addEventListener("mouseleave",r),{signal:t,unsubscribe:()=>{e.removeEventListener("mouseenter",i),e.removeEventListener("mouseleave",r)}}}(e);t.add(e=>this.isHovered=e),this.onChangeHover=t,this.onDestroy.add(()=>{i(),this.slotVisibilitySensor.destroy(void 0),this.slotSizeSensor.destroy()})}disableResizeHandling(){this.shouldHandleResize=!1}enableResizeHandling(){const{width:e,height:t}=this.wrapperNode.getBoundingClientRect();this.resizeAd(e,t),this.shouldHandleResize=!0}destroy(e){this.resetEventBus(),this.onDestroy.dispatch(e),this.onDestroy.removeAll(),this.onBeforeAdStart.removeAll(),this.onAdStart.removeAll(),this.onAdMediaStart.removeAll(),this.onAdMediaEnd.removeAll(),this.onAdEnd.removeAll(),this.onChangeHover.removeAll(),this.onReady.removeAll(),this.onAllAdPodComplete.removeAll()}get currentContentType(){return this.getCurrentContentType()}}const au=or({},{position:"absolute",width:"100%",height:"100%",left:"0",top:"0"},{pointerEvents:"none"}),du=-1,lu=-2,cu=-1,hu=-2,uu=100,pu={color:null,resource:null},Au={text:"",textColor:"#FFFFFF",isVisible:!1},fu=e=>(e=>e instanceof Promise||"Promise"===Yn(e)&&Boolean(Z(()=>Object(Sn.checkNativeCode)(e.constructor))))(e)||(e=>Boolean(Z(()=>l(e.then)&&l(e.catch))))(e),mu=5e3,gu={handshakeVersion:0,initAd:0,startAd:0,stopAd:0,skipAd:0,resizeAd:0,pauseAd:0,resumeAd:0,expandAd:0,collapseAd:0,subscribe:0,unsubscribe:0,setAdVolume:0,getAdDuration:0,getAdRemainingTime:0,getAdVolume:0,getAdIcons:0,getAdExpanded:0,getAdHeight:0,getAdWidth:0,getAdLinear:0,getAdSkippableState:0},vu={adLinear:0,adWidth:0,adHeight:0,adExpanded:0,adSkippableState:0,adRemainingTime:0,adDuration:0,adVolume:0,adIcons:0},yu={adLinear:"getAdLinear",adWidth:"getAdWidth",adHeight:"getAdHeight",adExpanded:"getAdExpanded",adSkippableState:"getAdSkippableState",adRemainingTime:"getAdRemainingTime",adDuration:"getAdDuration",adVolume:"getAdVolume",adIcons:"getAdIcons"},wu={adVolume:"setAdVolume"},bu={getAdUnitId:0};class Eu{setTimeout(e,t){const i=window.setTimeout(e,t);return()=>window.clearTimeout(i)}now(){return Date.now()}}class _u{constructor(e,t){void 0===t&&(t=new Eu),this.distributionFunction=e,this.clock=t,this.stopped=!0,this.cancel=void 0,this.lastNow=0,this.lastKnockTime=void 0,this.lastTimeout=0,this.restTime=0,this.destroyed=!1,this.isFirstKnock=!0,this.count=0}setEnabled(e){return e?this.start():this.stop(),this}stop(){return this.stopped||(this.stopped=!0,this.cancelTimeout(),this.restTime=Math.max(this.restTime-(this.clock.now()-this.lastKnockTime),0)),this}start(){return this.stopped&&!this.destroyed&&(this.stopped=!1,this.lastKnockTime=this.clock.now(),this.cancel=this.clock.setTimeout(()=>{this.knock(this.lastNow+this.lastTimeout)},this.restTime)),this}destroy(){this.cancelTimeout(),this.stopped=!0,this.destroyed=!0}knock(e){this.lastNow=e,this.lastKnockTime=this.clock.now(),this.isFirstKnock?this.isFirstKnock=!1:this.count++;const t=this.restTime=this.lastTimeout=this.distributionFunction({time:e,count:this.count});this.stopped||this.destroyed||(this.cancel=this.clock.setTimeout(()=>{this.knock(e+t)},t))}cancelTimeout(){this.cancel&&this.cancel(),this.cancel=void 0}}const Su={AdSkipped:"skip",AdStarted:"creativeView",AdImpression:"impression",AdVideoFirstQuartile:"firstQuartile",AdVideoMidpoint:"midpoint",AdVideoThirdQuartile:"thirdQuartile",AdVideoComplete:"complete",AdClickThru:"clickThrough",AdUserAcceptInvitation:"acceptInvitation",AdUserMinimize:"collapse",AdUserClose:"close",AdPaused:"pause",AdPlaying:"resume"},{initMoatTracking:Tu}=i(36),Cu=F({AdLoaded:0,AdStarted:0,AdStopped:0,AdSkipped:0,AdSkippableStateChange:0,AdSizeChange:0,AdLinearChange:0,AdDurationChange:0,AdExpandedChange:0,AdRemainingTimeChange:0,AdVolumeChange:0,AdImpression:0,AdVideoStart:0,AdVideoFirstQuartile:0,AdVideoMidpoint:0,AdVideoThirdQuartile:0,AdVideoComplete:0,AdClickThru:0,AdInteraction:0,AdUserAcceptInvitation:0,AdUserMinimize:0,AdUserClose:0,AdPaused:0,AdPlaying:0,AdLog:0,AdError:0});class ku{constructor(){var e=this;this.events={},this.subscribe=(e,t,i)=>{if("string"!==typeof t)throw new Error("Event name MUST be a string");if("function"!==typeof e)throw new Error("Event listener MUST be a function");let r=this.events[t];r||(r=this.events[t]=[]),r.push({callback:e,context:i})},this.unsubscribe=(e,t)=>{if("string"!==typeof t)throw new Error("Event name MUST be a string");if("function"!==typeof e)throw new Error("Event listener MUST be a function");const i=this.events[t];i&&(this.events[t]=i.filter(t=>{let{callback:i}=t;return e!==i}))},this.dispatch=function(t){for(var i=arguments.length,r=new Array(i>1?i-1:0),n=1;n<i;n++)r[n-1]=arguments[n];if("string"!==typeof t)throw new Error("Event name MUST be a string");const o=e.events[t];o&&o.forEach(e=>{let{callback:i,context:n}=e;try{i.apply(n,r)}catch(LA){Js.errorToStats(new Cs(LA,{code:"VpaidEventBusCallbackError",details:{vpaidEventName:t,params:r}}))}})}}}i(37);const Pu=WBViewAbility;let Ou;!function(e){e.click="click",e.viewability="viewability"}(Ou||(Ou={}));const Iu=8;class Ru extends Fn{constructor(e,t){void 0===e&&(e={}),void 0===t&&(t={});const i=t.message||e.message||String(e);super(e,hr({},t,{message:"VPAIDMeasurer Error ["+(t.code||e.code)+"]"+(i?"["+i+"]":"")}))}}const Nu="https://yastatic.net/pcode-static/measurers/10/video/adloox.js",Du="https://verify.yandex.ru/verify?platformid=3",Vu=async e=>{let{vpaidCreative:t,slot:i,measurerParameters:r}=e;await be({src:"https://yastatic.net/pcode-static/measurers/1/main.js"}),verify(i,{vpaidCreative:t,measurerParameters:r})},xu={moat:Vu,adloox:async function(e){let{vpaidCreative:t,slot:i,measurerParameters:r,onMeasurerError:n}=e;var o;const s=U(ur({},r,{},{targetelt:((o=i).id||(o.id=c(Iu)),o.id),urli:Du,urlv:Du,urle:Du},{id8:Ps})).reduce((e,t,i)=>{let[r,n]=t;return"string"!==typeof n?e:e+(0===i?"#":"&")+r+"="+encodeURIComponent(n)},"");t.subscribe(()=>{const e=""+Nu+s;be({win:i.ownerDocument.defaultView,src:e}).catch(e=>{n(new Ru({code:"ADLOOX_SCRIPT_LOADING_ERROR",details:{error:e}}))})},"AdStarted")},admetrica:Vu,sizmek:Vu,weborama:async e=>{let{vpaidCreative:t,slot:i,measurerParameters:r}=e;await be({src:"https://yastatic.net/pcode-static/measurers/3/weborama.js"}),Fe("weborama measurer loaded",new WBMeasurerV(i,t,JSON.stringify(pr({},r,{siteid:Ps}))))}},Lu=F(xu),Mu={1:[],2:[],3:[],5:[]};class Bu extends co{constructor(e,t,i){var r;super(),r=this,this.vpaidCreative=e,this.parameters=t,this.callbacks=i,this.playingStateValueSignal=new uo(!1),this.slotVisibilityStateValueSignal=new uo(!1),this.slotHoverStateValueSignal=new uo(!1),this.vpaidInitParameters=void 0,this.measurerStartParameters=void 0,this.lastVolume=void 0,this.vpaidEventBus=new ku,this.isVisibilityConfirmed=!1,this.initMeasurableParameters=ae(e=>{const t=e[4];if(!Object(Mo.isObject)(t))return void this.destroy({error:new Ru({code:"VPAID_MEASURER_INVALID_CREATIVE_DATA",details:void 0})});const i=e[5];if(!Object(Mo.isObject)(i)||!Object(Mo.isObject)(i.slot))return void this.destroy({error:new Ru({code:"VPAID_MEASURER_INVALID_ENVIRONMENT_VARS",details:void 0})});const{slot:r,videoSlot:n}=i,{parameters:o,errors:s}=gr(t.AdParameters);s.forEach(this.callbacks.onExecutionError),o?(this.vpaidInitParameters={slot:r,videoSlot:n,adParameters:o},this.initMeasurers()):this.destroy({error:new Ru({code:"VPAID_MEASURER_AD_PARAMETERS_ERROR",details:{adParameters:t.AdParameters}})})}),this.initMeasurers=ae(()=>{const{vpaidInitParameters:e,measurableVpaidCreative:t}=this;if(!e||!t)return this.callbacks.onExecutionError(new Ru({code:"ATTEMPT_TO_INIT_MEASURERS_WITHOUT_PARAMETERS",details:{measurableVpaidExists:Boolean(t),vpaidInitParametersExist:Boolean(e)}})),Promise.resolve();const{adParameters:{measurers:i,weborama:r,moat:n},slot:o}=e;if(r&&"string"===typeof r.wbStatData)try{(new Pu).init(o,r.wbStatData,t)}catch(xA){Js.errorToStats(new Cs(xA,{code:"WEBORAMA_INIT_ERROR"}))}if(n){const{partnerCode:e,ids:i}=n;!function(e,t,i,r){try{Tu(e,t,i,r)}catch(xA){Js.error({error:new Cs(xA,{code:"INIT_MOAT_TRACKING_ERROR",details:{ids:i,partnerCode:r}})})}}(t,o,i,e)}return Promise.all(F(i).map(async e=>{const r=i[e],n=xu[e];try{await n({vpaidCreative:t,slot:o,measurerParameters:r,onMeasurerError:e=>{this.callbacks.onExecutionError(e)}}),this.callbacks.onInitMeasurer({measurerName:e,measurableVpaidCreative:t,slot:o,measurerParameters:r})}catch(xA){this.callbacks.onExecutionError(new Ru({code:"MEASURER_INIT_ERROR",details:{measurerName:e,measurerParameters:r,error:new Fn(xA)}}))}}))}),this.trackEncounters=ae(e=>{this.vpaidInitParameters?(this.isVisibilityConfirmed=!0,this.trackEvent("encounters",this.getTrackingUrlsByTrackingEventName("encounters"),{encountersReason:e}),this.vpaidEventBus.dispatch("AdImpression"),this.trackEvent("impression",this.getTrackingUrlsByTrackingEventName("impression"),void 0)):this.callbacks.onExecutionError(new Ru({code:"VPAID_MEASURER_CANNOT_TRACK_ENCOUNTERS_BEFORE_START",details:{eventName:"encounters"}}))}),this.startMeasurement=ae(()=>{const{vpaidInitParameters:e}=this;if(!e)return void this.destroy({error:new Ru({code:"VPAID_MEASURER_NO_PARAMS_ON_START",details:void 0})});const{slot:t,adParameters:i}=e,{viewability:r,dwell:n}=i;this.addDestroyHandler(function(e,t){let i=function(e){if(!e)return!1;const{parentElement:t}=e;return!(!t||"function"!==typeof t.querySelector)&&t.querySelector(":hover")===e}(e);i&&t(!0);const r=a(e,"mouseenter",()=>{i||(i=!0,t(!0))}),n=a(e,"mouseleave",()=>{i&&(i=!1,t(!1))});return()=>{r(),n()}}(t,e=>{this.slotHoverStateValueSignal.dispatch(e)}));const o=new mo(t),s=o.getSize();this.callbacks.onSlotSizeChange(s);const d=new uo(Zi(s));o.onResize.add(e=>{this.callbacks.onSlotSizeChange(e),d.dispatch(Zi(e))});const l=new Po(t,{numberOfMeasurementSteps:ou});this.measurerStartParameters={startTimestamp:Date.now(),slotSizeSensor:o,slotVisibilitySensor:l},this.addDestroyHandler(l.onChangeVisibility(e=>{this.slotVisibilityStateValueSignal.dispatch(e)})),this.addDestroyHandler(()=>{l.destroy(),o.destroy()});const c=new _u(e=>{let{count:t}=e;const i=function(e){return e>3?{eventName:"viewability5",intervalId:5}:1===e?{eventName:"viewability1",intervalId:1}:2===e?{eventName:"viewability2",intervalId:2}:3===e?{eventName:"viewability3",intervalId:3}:void 0}(t);return void 0!==i&&(this.trackEvent(i.eventName,r[i.intervalId],void 0),2===t&&this.trackEncounters(Ou.viewability)),vr(t)}),h=new _u(e=>{let{count:t}=e;const i=function(e){return e>3?{eventName:"dwell5",intervalId:5}:1===e?{eventName:"dwell1",intervalId:1}:2===e?{eventName:"dwell2",intervalId:2}:3===e?{eventName:"dwell3",intervalId:3}:void 0}(t);return void 0!==i&&this.trackEvent(i.eventName,n[i.intervalId],void 0),vr(t)});this.addDestroyHandler(()=>{c.destroy(),h.destroy()}),this.addDestroyHandler(Ni([this.playingStateValueSignal,this.slotVisibilityStateValueSignal,d],(e,t,i)=>e&&t&&i,e=>{c.setEnabled(e)})),this.addDestroyHandler(Ni([this.playingStateValueSignal,this.slotVisibilityStateValueSignal,this.slotHoverStateValueSignal,d],(e,t,i,r)=>e&&t&&i&&r,e=>{h.setEnabled(e)}))}),this.methodSniffers={subscribe:this.vpaidEventBus.subscribe,unsubscribe:this.vpaidEventBus.unsubscribe},this.eventSniffers={AdLoaded:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];r.initMeasurers().then(()=>{r.vpaidEventBus.dispatch("AdLoaded",...t)})}},this.measurableVpaidCreative=void 0,this.vpaidWillSetProperty=(e,t)=>{this.vpaidCreative[e]=t},this.vpaidWillCallMethod=(e,t)=>{switch(e){case"initAd":this.initMeasurableParameters(t);break;case"startAd":this.startMeasurement();break;case"stopAd":this.destroy({reason:e})}const i=this.methodSniffers[e];return i?i(...t):this.vpaidCreative[e](...t)},this.measurableVpaidDidCreate=e=>{this.measurableVpaidCreative=e},this.trackEvent=function(e,t,i){if(void 0===t&&(t=[]),Fe("Track VPAIDMeasurer event=["+e+"]"),!r.measurerStartParameters)return void r.callbacks.onExecutionError(new Ru({code:"VPAID_MEASURER_CANNOT_TRACK_EVENT_BEFORE_START",details:{eventName:e}}));const{slotSizeSensor:n,slotVisibilitySensor:o}=r.measurerStartParameters;let s=ld.videoContentSize,a=ld.videoFramesInfo;const{vpaidInitParameters:d}=r;if(d){const{videoWidth:e,videoHeight:t}=d.videoSlot;s={width:e,height:t},a=He(d.videoSlot)}const l={eventName:e,trackingEventDetails:i,trackingUrls:t,options:$i({slotSize:n.getSize(),slotVisibilityRatio:o.getVisibilityRatio(),videoContentSize:s,videoPlaybackQuality:a})};ui(l),r.callbacks.onTrackEvent(l)},this.playingStateValueSignal.add(i.onPlayingStateChange),this.slotVisibilityStateValueSignal.add(i.onSlotVisibilityStateChange),this.slotHoverStateValueSignal.add(i.onSlotHoverStateChange),this.addDestroyHandler(e=>{i.onStop(e),[this.playingStateValueSignal,this.slotVisibilityStateValueSignal,this.slotHoverStateValueSignal].forEach(e=>{e.dispatch(!1),e.removeAll()})}),this.subscribeVPAIDEvents()}subscribeVPAIDEvents(){var e=this;Cu.forEach(t=>{this.vpaidCreative.subscribe((function(){for(var i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];e.vpaidDidDispatchEvent(t,r)}),t)})}vpaidDidDispatchEvent(e,t){const i=Su[e];if(i&&this.trackEvent(i,this.getTrackingUrlsByTrackingEventName(i),void 0),"AdVideoStart"===e&&this.onAdVideoStart(),"AdVideoComplete"===e&&this.isVisibilityConfirmed&&this.trackEvent("viewedComplete",this.getTrackingUrlsByTrackingEventName("viewedComplete"),void 0),"AdError"===e){const e=this.getTrackingUrlsByTrackingEventName("error"),i={error:new Ru({code:"VPAID_MEASURER_AD_ERROR",details:{args:t}}),trackingUrls:e};Fe("Track VPAIDMeasurer event=[error]"),ze(i),this.callbacks.onAdError(i)}if("AdStarted"===e&&(this.lastVolume=this.vpaidCreative.getAdVolume()),"AdClickThru"===e&&this.trackEncounters(Ou.click),"AdVolumeChange"===e&&"number"===typeof this.lastVolume){const e=this.vpaidCreative.getAdVolume();0===e&&this.lastVolume>0&&this.trackEvent("mute",this.getTrackingUrlsByTrackingEventName("mute"),void 0),e>0&&0===this.lastVolume&&this.trackEvent("unmute",this.getTrackingUrlsByTrackingEventName("unmute"),void 0),this.lastVolume=e}switch(e){case"AdStarted":case"AdPlaying":this.playingStateValueSignal.dispatch(!0);break;case"AdPaused":this.playingStateValueSignal.dispatch(!1);break;case"AdStopped":case"AdError":case"AdSkipped":this.destroy({reason:e})}const r=this.eventSniffers[e];r?r(...t):this.vpaidEventBus.dispatch(e,...t)}getTrackingUrlsByTrackingEventName(e){if(!this.vpaidInitParameters)return[];const{adParameters:{trackingEvents:t}}=this.vpaidInitParameters,i=t[e];return Array.isArray(i)?i.map(t=>{const i=this.getConsumerAdditionalTrackingParams(e,t);return Object(Mo.isObject)(i)?V(t,i,{override:!1}):t}):[]}getConsumerAdditionalTrackingParams(e,t){const i=Z(()=>this.parameters.getAdditionalTrackingParameters({eventName:e,url:t}));return Object(Mo.isObject)(i)&&F(i).length?i:null}onAdVideoStart(){const{measurerStartParameters:e}=this;e?this.trackEvent("start",this.getTrackingUrlsByTrackingEventName("start"),{timeToStart:Date.now()-e.startTimestamp}):this.callbacks.onExecutionError(new Ru({code:"VPAID_AD_VIDEO_START_BEFORE_START_AD_CALL",details:void 0}))}}const Fu=!1,Uu=e=>"2.0",Hu=()=>!1,ju=15e4,zu={complete:"AdVideoComplete",skip:"AdSkipped",close:"AdUserClose"};class Wu extends co{constructor(e){super(),this.params=e,this.vpaidEventBus=new ku,this.handshakeVersion=Uu,this.subscribe=this.vpaidEventBus.subscribe,this.unsubscribe=this.vpaidEventBus.unsubscribe,this.skipAd=o,this.resizeAd=o,this.pauseAd=o,this.resumeAd=o,this.expandAd=o,this.collapseAd=o,this.setAdVolume=o,this.getAdIcons=Hu,this.initAd=ae((e,t,i,r,n,o)=>{this.slot=o.slot,this.vpaidEventBus.dispatch("AdLoaded")}),this.slot=void 0,this.getAdDuration=()=>du,this.getAdRemainingTime=()=>cu,this.getAdVolume=()=>rh,this.getAdExpanded=()=>Fu,this.getAdHeight=()=>nh,this.getAdWidth=()=>sh,this.getAdLinear=()=>!1,this.getAdSkippableState=()=>ih,this.addDestroyHandler(ae(()=>{this.vpaidEventBus.dispatch("AdStopped"),this.params.adCreative.stopAd()}))}startAd(){var e=this;this.vpaidEventBus.dispatch("AdStarted"),this.vpaidEventBus.dispatch("AdVideoStart");const{slot:t}=this;if(!t)throw new Cs({code:"AD_CREATIVE_START_WITHOUT_SLOT",details:void 0});const{adCreative:i,slotSizeSensor:r}=this.params,n=i.startAd({slot:t,callbacks:{AdClickThru:this.ignoreAfterDestroy((function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];e.vpaidEventBus.dispatch("AdClickThru",...i)})),AdVideoFirstQuartile:this.ignoreAfterDestroy(ae(()=>{this.vpaidEventBus.dispatch("AdVideoFirstQuartile")})),AdVideoMidpoint:this.ignoreAfterDestroy(ae(()=>{this.vpaidEventBus.dispatch("AdVideoMidpoint")})),AdVideoThirdQuartile:this.ignoreAfterDestroy(ae(()=>{this.vpaidEventBus.dispatch("AdVideoThirdQuartile")}))},size:r.getSize()});if(this.addDestroyHandler(r.onResize.add(e=>{l(i.resizeAd)&&i.resizeAd(e)})),!fu(n))throw new Cs({code:"OVERLAY_CREATIVE_START_AD_RETURNS_NON_PROMISE_RESULT",details:void 0});const{promise:o,clear:s}=go(ju);o.then(()=>{this.vpaidEventBus.dispatch("AdError",new Cs({code:"OVERLAY_MAX_PLAYING_DURATION_REACHED",details:void 0})),this.destroy()}),this.addDestroyHandler(s),n.then(this.ignoreAfterDestroy(e=>{let t="AdVideoComplete";Object(Mo.isObject)(e)&&e.reason&&zu[e.reason]&&(t=zu[e.reason]),this.vpaidEventBus.dispatch(t),this.destroy()})).catch(this.ignoreAfterDestroy(e=>{this.vpaidEventBus.dispatch("AdError",e),this.destroy()}))}stopAd(){this.destroy()}}const Yu="https://yastatic.net/awaps-ad-sdk-js/1_0/overlay_tgo.js";class Gu extends co{constructor(e){super(),this.params=e,this.promise=void 0,this.startTime=Date.now(),this.promise=this.loadAdCreativeVPAIDInternal().catch(e=>{throw this.destroy(),e})}async loadAdCreativeVPAIDInternal(){const{slotSizeSensor:e,adParameters:t,mediaFile:i,slot:r}=this.params,n=await this.createFriendlyIFrame();let o,s,a;try{o=await async function(e,t){return e===Yu?new Promise((e,i)=>{Ce({moduleName:Ws.overlayBundleName,version:void 0,onSuccess:t=>{e(t.initAdCreative)},onError:e=>{i(e)},win:t})}):_e({src:e,win:t}).then(()=>t.initAdCreative)}(i.url,n)}catch(xA){throw new Cs(xA,{code:"CANNOT_LOAD_OVERLAY_CREATIVE_MEDIA_FILE",details:{mediaFile:Ze(i),adParameters:t}})}if("function"!==typeof o)throw new Cs({code:"OVERLAY_INIT_AD_CREATIVE_IS_NOT_A_FUNCTION",details:{mediaFile:Ze(i),adParameters:t}});try{s=o({adParameters:t,slot:r})}catch(LA){throw new Cs(LA,{code:"OVERLAY_INIT_AD_CREATIVE_CALL_ERROR",details:{mediaFile:Ze(i),adParameters:t}})}if(!fu(s))throw new Cs({code:"OVERLAY_INIT_AD_CREATIVE_RETURNS_NON_PROMISE_RESULT",details:{mediaFile:Ze(i),adParameters:t}});try{a=await s}catch(LA){throw new Cs(LA,{code:"OVERLAY_INIT_AD_CREATIVE_ERROR",details:{mediaFile:Ze(i),adParameters:t}})}const d=wr({adCreative:a,slotSizeSensor:e});return this.destroy(),d}createFriendlyIFrame(){const{slot:e,mediaFile:t}=this.params;return new Promise((i,n)=>{const o=dr(e,mu,(e,n)=>{n&&Js.values({name:"AdCreativeFriendlyIFrameAsyncCreation",data:{creativeSrc:t.url,creativeType:"AdCreative"},values:{duration:Date.now()-this.startTime},labels:{}}),r(e,{position:"absolute",visibility:"hidden"});const o=e.contentWindow;i(o)},()=>{n(new Cs({code:"CREATE_IFRAME_ELEMENT_FOR_OVERLAY_TIMEOUT",details:void 0}))});this.addDestroyHandler(o)})}}const qu="https://yastatic.net/awaps-ad-sdk-js/1_0/overlay_creative.js",Xu="overlay-creative/javascript";class Ku{constructor(e){this.trackingUrls={portion:[],seconds:[]},e.forEach(e=>{let{urls:t,offset:{unit:i,value:r}}=e;this.trackingUrls[i].push({urls:[...t],offset:r})})}getTrackingUrlsByPosition(e){let{duration:t,remainingTime:i}=e;if(!t)return[];const r=t-i,n={portion:r/t,seconds:r},o=[];return Ad.forEach(e=>{const t=this.getTrackingUrlsByUnitAndOffset(e,n[e]);o.push(...t)}),o}getTrackingUrlsByUnitAndOffset(e,t){const[i,r]=Si(this.trackingUrls[e],e=>{let{urls:i,offset:r}=e;return t>=r});return this.trackingUrls[e]=r,L(i.map(e=>{let{urls:t}=e;return t}))}}class Qu extends co{constructor(e,t){super(),this.adDisplayController=e,this.mediaAd=t,this.onCurrentPositionChange=new ho,this.onPlayRequest=new ho,this.playRequestTime=void 0,this.preloadPromise=void 0,this.isStarted=!1,this.onReady=new ho,this.onStart=new ho,this.onResume=new ho,this.onPause=new ho,this.onVolumeChange=new ho,this.onComplete=new ho,this.onClose=new ho,this.onSkip=new ho,this.onImpression=new ho,this.onFirstQuartile=new ho,this.onMidpoint=new ho,this.onThirdQuartile=new ho,this.onClickThrough=new ho,this.onStop=new ho,this.addDestroyHandler(()=>{this.onStop.dispatch(void 0)}),this.onResume.add(()=>{this.trackEvent("resume",void 0)}),this.onPause.add(()=>{this.trackEvent("pause",void 0)}),this.onPlayRequest.addOne(()=>{this.playRequestTime=Date.now()});let i=0===this.getVolume();this.onVolumeChange.add(()=>{const e=0===this.getVolume();i!==e&&(this.trackEvent(e?"mute":"unmute",void 0),i=e)}),this.onImpression.addOne(()=>{this.trackEvent("impression",void 0)});const r=new Ku(t.vastAd.progressTrackings);this.onCurrentPositionChange.add(e=>{let{currentTime:t,duration:i}=e;const n=r.getTrackingUrlsByPosition({duration:i,remainingTime:i-t});n.length&&Ai({eventName:"progress",trackingEventDetails:void 0,trackingUrls:n,options:this.adDisplayController.getAdPlacementOptions()})}),this.onFirstQuartile.add(()=>{this.trackEvent("firstQuartile",void 0)}),this.onMidpoint.add(()=>{this.trackEvent("midpoint",void 0)}),this.onThirdQuartile.add(()=>{this.trackEvent("thirdQuartile",void 0)}),this.addDestroyHandler(()=>{this.onStart.removeAll(),this.onResume.removeAll(),this.onPause.removeAll(),this.onPlayRequest.removeAll(),this.onCurrentPositionChange.removeAll(),this.onFirstQuartile.removeAll(),this.onMidpoint.removeAll(),this.onThirdQuartile.removeAll(),this.onVolumeChange.removeAll()})}trackEvent(e,t){this.adDisplayController.emit("trackEvent",e),this.mediaAd.trackEvent(e,this.adDisplayController.getAdPlacementOptions(),t)}trackStartEvent(){const{playRequestTime:e=0}=this;0===e&&Js.error({error:new Cs({code:"TRACK_START_BEFORE_PLAY",details:{isVPAID:this.mediaAd.contentType===Gl.js}})}),this.trackEvent("start",{timeToStart:Date.now()-e})}trackError(e){this.mediaAd.trackError(e)}clickThrough(e){var t=this;void 0===e&&(e={});const{playerHandles:i=!0}=e,{clickThroughUrl:r}=this.mediaAd.playbackParams;let n;e.url?n=e.url:r&&(n=r);const{pauseOnClickThrough:o,clickThroughConfirmation:s}=this.playbackParams,{clickThroughCallback:a}=this.adDisplayController.config;if(!Boolean(a||n)||!i)return void this.trackEvent("clickThrough",void 0);n&&(n=Le({url:Cr(n),options:this.adDisplayController.getAdPlacementOptions()}));const l=ae((function(i){if(void 0===i&&(i=!1),o&&(t.pause(),i)){const e=d(window.document,i=>{i&&(t.resume(),e())});t.addDestroyHandler(e)}t.trackEvent("clickThrough",void 0),t.onClickThrough.dispatch({adWasPaused:Boolean(o)}),a&&Es&&Js.event({name:"ClickThroughCallbackHandle",probability:ws,data:{clickThroughParams:e,url:n,pauseOnClickThrough:o}})}));if(a)s||l(),a({url:n,onHandle:l}),Js.event({name:"ClickThroughCallbackCall",probability:ws,data:{clickThroughParams:e,url:n,pauseOnClickThrough:o}});else{null!==window.open(n,"_blank")&&l(!0)}}get playbackParams(){return this.mediaAd.playbackParams}get contentType(){return this.mediaAd.contentType}}const Zu={UNHANDLED_PROMISE_REJECTION:"VPAID_FRIENDLY_IFRAME_UNHANDLED_PROMISE_REJECTION",UNHANDLED_GLOBAL_ERROR:"VPAID_FRIENDLY_IFRAME_UNHANDLED_GLOBAL_ERROR",SECURITY_POLICY_VIOLATION:"VPAID_FRIENDLY_IFRAME_SECURITY_POLICY_VIOLATION"},Ju={UNHANDLED_PROMISE_REJECTION:"YANDEX_VPAID_FRIENDLY_IFRAME_UNHANDLED_PROMISE_REJECTION",UNHANDLED_GLOBAL_ERROR:"YANDEX_VPAID_FRIENDLY_IFRAME_UNHANDLED_GLOBAL_ERROR",SECURITY_POLICY_VIOLATION:"YANDEX_VPAID_FRIENDLY_IFRAME_SECURITY_POLICY_VIOLATION"};var $u=i(9),ep=i.n($u);const{locals:tp}=ep.a,ip="2.0";class rp extends Qu{static isVPAIDCreative(e){return e&&"function"===typeof e.handshakeVersion&&"function"===typeof e.initAd&&"function"===typeof e.startAd&&"function"===typeof e.stopAd&&"function"===typeof e.skipAd&&"function"===typeof e.resizeAd&&"function"===typeof e.pauseAd&&"function"===typeof e.resumeAd&&"function"===typeof e.expandAd&&"function"===typeof e.collapseAd&&"function"===typeof e.subscribe&&"function"===typeof e.unsubscribe}static isSupportedVersion(e){const t=ip.split(".").map(e=>parseInt(e,10)),i=e.split(".").map(e=>parseInt(e,10));for(let r=0;r<i.length;r++){const e=i[r],n=t[r],o="undefined"===typeof n?0:n;if(e>o)return!1;if(e<o)return!0}return!0}constructor(e,t){super(e,t),this.onAdSkippableStateChange=new ho,this.creative=void 0,this.stopAdCreative=o,this.containerNode=void 0,this.creativeSlot=void 0,this.isPaused=new uo(!0),this.adSkippableState=!1,this.startVpaidCreative=ae(e=>{this.isStarted=!0,e.startAd()}),this.creativeAdStartedCallback=nt(()=>{if(this.isDestroyed)return void Js.error({error:new Cs({code:"VPAID_STARTED_AFTER_AD_DESTROY",details:{mediaFile:Ze(this.getCurrentSource()),adParameters:this.mediaAd.vastAd.adParameters,playbackParams:this.playbackParams}})});this.isStarted||Js.error({error:new Cs({code:"VPAID_STARTED_BEFORE_START_AD_CALL",details:{mediaFile:Ze(this.getCurrentSource()),adParameters:this.mediaAd.vastAd.adParameters,playbackParams:this.playbackParams}})});const e=()=>{this.onStart.dispatch(void 0)};this.isPaused.getValue()?this.isPaused.addOne(e):e()},()=>{Js.error({error:new Cs({code:"VPAID_STARTED_MORE_THAN_ONCE",details:{mediaFile:Ze(this.getCurrentSource()),adParameters:this.mediaAd.vastAd.adParameters,playbackParams:this.playbackParams}})})}),this.onStart.add(()=>{this.isPaused.dispatch(!1)}),this.onPause.add(()=>{this.isPaused.dispatch(!0)}),this.onResume.add(()=>{this.isPaused.dispatch(!1)}),this.onStart.add(()=>this.trackEvent("creativeView",void 0)),this.onSkip.add(()=>this.trackEvent("skip",void 0)),this.onClose.add(()=>this.trackEvent("close",void 0)),this.onComplete.add(()=>this.trackEvent("complete",void 0)),this.onStart.addOne(()=>{this.addDestroyHandler(f(()=>{this.updatePosition()}))}),this.addDestroyHandler(()=>{this.isPaused.removeAll(),this.onAdSkippableStateChange.removeAll()})}async play(e){void 0===e&&(e=!0),e&&this.onPlayRequest.dispatch(void 0),this.isPaused.dispatch(!e),this.creative?this.resume():this.preload().then(()=>{this.resume()}).catch(e=>{this.onStop.dispatch(e)});const t=await this.onStop.promise();if(await go(uu).promise,this.removeControls(),this.isPaused.dispatch(!0),t)throw t}getCurrentTime(){const e=this.creative&&"function"===typeof this.creative.getAdRemainingTime&&this.creative.getAdRemainingTime()||hu;return this.getDuration()-e}pause(){this.isPaused.dispatch(!0),this.creative&&this.creative.pauseAd()}resume(){const{creative:e}=this;if(e){if(this.containerNode&&(this.containerNode.style.display="block"),this.isStarted)return this.isPaused.dispatch(!1),void e.resumeAd();this.isPaused.getValue()?this.startAndPauseVpaidCreative(e):this.startVpaidCreative(e),this.updateAdSkippableState()}else this.isPaused.dispatch(!1)}skipAd(){this.creative&&this.creative.skipAd()}getAdSkippableState(){return this.creative&&"function"===typeof this.creative.getAdSkippableState?this.creative.getAdSkippableState():ih}getDuration(){if(this.creative){const e=this.creative.getAdDuration();if(e>0)return e}return this.mediaAd.duration?this.mediaAd.duration:lu}getAdWidth(){if(this.creative){const{adWidth:e}=this.creative;if("number"===typeof e)return e;if("function"===typeof this.creative.getAdWidth)return this.creative.getAdWidth()}return sh}getAdHeight(){if(this.creative){const{adHeight:e}=this.creative;if("number"===typeof e)return e;if("function"===typeof this.creative.getAdHeight)return this.creative.getAdHeight()}return nh}resizeAd(e,t,i){void 0===i&&(i=Ql.NORMAL);const{creative:r}=this;r&&r.resizeAd(e,t,i)}getSrc(){return this.getScriptSrc()}getPaused(){return this.isPaused.getValue()}getVolume(){const{creative:e}=this;return e&&e.getAdVolume?e.getAdVolume():this.videoNodeController.getVolume()}setVolume(e){const{creative:t}=this;t&&t.setAdVolume&&t.setAdVolume(e)}preload(){return this.preloadPromise||(this.addDestroyHandler(this.videoNodeController.onMuteChange.add(()=>{this.onVolumeChange.dispatch(void 0)})),this.preloadPromise=this.initCreative().then(e=>{const t=Tr(e,"AdError",e=>{this.onStop.dispatch(this.parseVpaidError(e,"VPAIDPlayingError"))});if(this.onStop.addOne(t),"function"===typeof e.getAdUnitId){const t=e.getAdUnitId();t&&nl.addUnit(t)}return this.creative=e,this.addDestroyHandler(()=>{this.creative=void 0}),this.onReady.dispatch(void 0),e})),this.preloadPromise}startAndPauseVpaidCreative(e){this.isYandexCreative()&&(this.startVpaidCreative(e),Js.event({name:"PreloadVPAIDCreativeByStartAndPause",probability:ws,data:{vpaidSrc:this.getSrc()}}),e.pauseAd())}async initCreative(){const{vastAd:e}=this.mediaAd,{isNonLinear:t}=e;let i;if(t)i=await this.createOverlayVPAID(),this.stopAdCreative=ae(()=>{try{i.stopAd()}catch(xA){Js.error({error:new Cs(xA,{code:"STOP_OVERLAY_AD_ERROR",details:{mediaFile:r,adParameters:o}})})}});else{const e=await this.createVPAIDElements();i=this.createStandardVpaidCreative(e)}if(this.isDestroyed)throw this.removeControls(),new Cs({code:"VPAID_WAS_DESTROYED_DURING_INIT",details:void 0});const r=Ze(this.getCurrentSource()),n=this.isYandexCreative(),{adParameters:o}=this.mediaAd.vastAd,s=_r({creative:i,isYandexCreative:n,mediaFile:r,adParameters:o});return new Promise((e,t)=>{const n=()=>{a(),d()},a=Tr(s,"AdLoaded",()=>{n(),e(s)}),d=Tr(s,"AdError",e=>{n(),t(this.parseVpaidError(e,"VPAIDLoadingError"))}),{clientWidth:l,clientHeight:c}=this.videoNodeController.videoNode,h=this.adDisplayController.desiredBitrate||hi({clientWidth:l,clientHeight:c}),u={AdParameters:o,VPAIDVersion:Ms},{canPlayMuted:p,canPlayUnMuted:A}=this.adDisplayController.autoplayAbility,{gui:f}=this.adDisplayController,m=this.getScriptSrc(),g=xe(m)||!Lt(m);if(g){const e=f.getBlockedControls();this.onStop.addOne(()=>f.setBlockedControls(e))}const v={slot:this.creativeSlot,videoSlot:this.videoNodeController.videoNode,videoSlotCanAutoPlay:this.videoNodeController.videoNode.muted?p:A,isYandexAdPlayer:!0,yandexAdPlaybackParams:{lang:this.config.lang,skipDelay:this.config.skipDelay,controlsSettings:this.config.controlsSettings,pauseOnClickThrough:!1,description:this.playbackParams.description,getGui:()=>(Js.event({name:"VPAIDGetGuiCalled",probability:ws,data:{vpaidSrc:m}}),g?f:void 0)}};this.subscribeCreativeEvents(s);try{i.initAd(l,c,Ql.NORMAL,h,u,v)}catch(xA){throw this.stopAdCreative(),new Cs(xA,{code:"INIT_AD_ERROR",details:{mediaFile:r,adParameters:o}})}this.onStop.addOne(()=>{n(),this.stopAdCreative()})})}createOverlaySlotElement(){const e=this.videoWrapperNode;this.containerNode=document.createElement("div"),this.containerNode.style.display="none",r(this.containerNode,kr({},au,{overflow:"hidden"})),e.appendChild(this.containerNode),this.addDestroyHandler(()=>{C(this.containerNode)});const t=br(this.containerNode)||this.containerNode;return r(t,au),t}createOverlayVPAID(){const{adParameters:e,mediaFiles:t}=this.mediaAd.vastAd;if(t[0].url!==qu)throw new Cs({code:"CANNOT_PLAY_NON_YANDEX_OVERLAY",details:{mediaFile:Ze(this.getCurrentSource()),adParameters:e}});const i=this.createOverlaySlotElement();this.creativeSlot=i;const{parsed:{adMediaFiles:r,adParameters:n}}=function(e){let t={};if(e)try{t=JSON.parse(e)}catch(xA){Js.errorToStats(new Cs(xA,{code:"INVALID_INTERACTIVE_AD_PARAMETERS",details:{AdParameters:e}}))}else Js.errorToStats(new Cs({code:"NO_INTERACTIVE_AD_PARAMETERS",details:{}}));const{playbackParameters:i,tickerData:r,mediaFiles:n,adParameters:o,interactiveElements:s=[],background:a=pu}=t;return t.videoStates&&Js.event({name:"IVAdParametersContainsVideoStates",probability:ws,data:{adParameters:e}}),{raw:t,parsed:{adDisplayConfig:i||{},tickerData:sr(r),adMediaFiles:ar(n,e),adParameters:(d=o,"string"===typeof d?d:Object(Mo.isObject)(d)?kt(d):void 0),interactiveElements:s,background:a}};var d}(e);if(0===r.length)throw new Cs({code:"NO_OVERLAY_MEDIA_FILES_IN_AD_PARAMETERS",details:{mediaFile:Ze(this.getCurrentSource()),adParameters:e}});if(r.length>1)throw new Cs({code:"EXTRA_OVERLAY_MEDIA_FILES_IN_AD_PARAMETERS",details:{mediaFile:Ze(this.getCurrentSource()),adParameters:e}});const[o]=r;if(o.type!==Xu)throw new Cs({code:"UNEXPECTED_OVERLAY_CREATIVE_MEDIA_FILE_TYPE",details:{mediaFile:Ze(this.getCurrentSource()),adParameters:e}});const s=new Gu({slot:i,slotSizeSensor:this.adDisplayController.slotSizeSensor,adParameters:n,mediaFile:o});return this.addDestroyHandler(()=>{s.destroy()}),s.promise}createIframeContainer(){const e=this.videoWrapperNode;this.containerNode=document.createElement("div"),this.containerNode.className=tp.yaAdSdkVpaidContainer,this.containerNode.style.display="none",e.style.position="relative",Pe(this.containerNode,ep.a.toString());const t=this.adDisplayController.gui.wrapper.el;t.parentElement===e?e.insertBefore(this.containerNode,t):e.appendChild(this.containerNode)}createVPAIDElements(){this.createIframeContainer();const e=Date.now(),t=this.isYandexCreative()?Ju:Zu,i=Ze(this.getCurrentSource()),{adParameters:r}=this.mediaAd.vastAd;return new Promise((n,o)=>{const s=dr(this.containerNode,mu,async(s,a)=>{a&&Js.values({name:"VPAIDCreativeFriendlyIFrameAsyncCreation",data:{creativeSrc:this.getSrc(),creativeType:"VPAID"},values:{duration:Date.now()-e},labels:{}});const d=s.contentWindow;this.creativeSlot=s.contentDocument.body,this.addDestroyHandler(Sr(d,(e,n,o)=>{Js.error({error:new Cs({code:t[n],details:{error:e,mediaFile:i,adParameters:r,data:o}})})}));const l=this.mediaAd.getPreloadVpaidWindow();if(l){const e=l.getVPAIDAd;n(e)}else try{const e=await Yl({src:this.getScriptSrc(),win:d});n(e)}catch(xA){o(new Cs(xA,{code:"CANNOT_LOAD_VPAID_MEDIA_FILE",details:void 0}))}},()=>{o(new Cs({code:"CREATE_IFRAME_ELEMENT_FOR_VPAID_TIMEOUT",details:void 0}))});this.addDestroyHandler(s)})}createStandardVpaidCreative(e){const t=this.isYandexCreative(),i=Ze(this.getCurrentSource()),{adParameters:r}=this.mediaAd.vastAd;if("function"!==typeof e)throw new Cs({code:t?"YANDEX_NO_GET_VPAID_AD_FUNC":"NO_GET_VPAID_AD_FUNC",details:{mediaFile:i,typeOfGetVPAIDAd:typeof e,adParameters:r}});let n;try{n=e()}catch(xA){throw new Cs(xA,{code:"GET_VPAID_AD_ERROR",details:{mediaFile:i,adParameters:r}})}if(this.stopAdCreative=ae(()=>{try{n.stopAd()}catch(xA){Js.error({error:new Cs(xA,{code:"STOP_AD_ERROR",details:{mediaFile:i,adParameters:r}})})}}),!rp.isVPAIDCreative(n))throw new Cs({code:"INVALID_VPAID_API",details:{mediaFile:i,adParameters:r}});const o=n.handshakeVersion(ip);if(!rp.isSupportedVersion(o))throw this.stopAdCreative(),new Cs({code:"VPAID_VERSION_ERROR",details:{mediaFile:Ze(this.getCurrentSource()),playerSupportedVersion:ip,creativeVersion:o,adParameters:this.mediaAd.vastAd.adParameters}});return n}removeControls(){C(this.containerNode),this.containerNode=void 0}getScriptSrc(){return this.getCurrentSource().url}getCurrentSource(){return this.mediaAd.getJSMediaFile()}subscribeCreativeEvents(e){e.subscribe(()=>{this.onStop.dispatch(void 0)},"AdStopped"),e.subscribe((e,t,i)=>{this.clickThrough({url:e,id:t,playerHandles:Boolean(i)})},"AdClickThru"),e.subscribe(()=>{this.updateAdSkippableState()},"AdSkippableStateChange"),e.subscribe(this.creativeAdStartedCallback,"AdStarted"),e.subscribe(()=>{this.onPause.dispatch(void 0)},"AdPaused"),e.subscribe(()=>{this.onResume.dispatch(void 0)},"AdPlaying"),e.subscribe(()=>{this.trackStartEvent()},"AdVideoStart"),e.subscribe(()=>{this.onImpression.dispatch(void 0)},"AdImpression"),e.subscribe(()=>{this.onFirstQuartile.dispatch(void 0)},"AdVideoFirstQuartile"),e.subscribe(()=>{this.onMidpoint.dispatch(void 0)},"AdVideoMidpoint"),e.subscribe(()=>{this.onThirdQuartile.dispatch(void 0)},"AdVideoThirdQuartile"),e.subscribe(()=>{this.onVolumeChange.dispatch(void 0)},"AdVolumeChange"),e.subscribe(()=>{this.onSkip.dispatch(void 0)},"AdSkipped"),e.subscribe(()=>{this.onComplete.dispatch(void 0)},"AdVideoComplete"),e.subscribe(()=>{this.onClose.dispatch(void 0)},"AdUserClose")}updatePosition(){this.onCurrentPositionChange.dispatch({currentTime:this.getCurrentTime(),duration:this.getDuration()})}parseVpaidError(e,t){const i={mediaFile:Ze(this.getCurrentSource()),adParameters:this.mediaAd.vastAd.adParameters,playbackParams:this.mediaAd.playbackParams};return"string"===typeof e?new Cs({code:t,message:"String error from vpaid ["+e+"]",details:i}):e?new Cs(e,{code:t,details:i}):new Cs({code:t,message:"unknown error from VPAID creative",details:i})}updateAdSkippableState(){const e=this.getAdSkippableState();this.adSkippableState!==e&&(this.adSkippableState=e,this.onAdSkippableStateChange.dispatch(e))}isYandexCreative(){return Ve(this.getSrc())}get videoWrapperNode(){return this.adDisplayController.wrapperNode}get videoNodeController(){return this.adDisplayController.videoNodeController}get config(){return this.adDisplayController.config}}const np=function(){const{volume:e}=dl;dl.volume=0===e?1:0;const t=dl.volume!==e;return dl.volume=e,t}();let op;!function(e){e.inline="inline",e.pictureInPicture="picture-in-picture"}(op||(op={}));class sp{constructor(e,t){void 0===t&&(t=!1),this.videoTagAttributes=void 0,this.videoTagProps=void 0,this.sources=[],this.videoNode=void 0,this.restoreVideoPiP=o,this.revertVideoNodePosition=()=>!1,this.videoNode=e;const i=er(e),r=Boolean(e.parentElement);if(this.videoTagProps={controls:e.controls,loop:e.loop,currentTime:t?e.currentTime:NaN},!i)return;const n=e.getAttribute("poster"),s=e.getAttribute("src")||e.src;if(this.videoTagAttributes={autoplay:e.getAttribute("autoplay"),controls:e.getAttribute("controls"),height:e.getAttribute("height"),loop:e.getAttribute("loop"),poster:""===n?null:n,preload:e.getAttribute("preload"),src:s||null,width:e.getAttribute("width"),style:e.getAttribute("style")},this.sources=z(e.getElementsByTagName("source")).map(e=>({src:e.getAttribute("src"),type:e.getAttribute("type")})),this.restoreVideoPiP=Pr(e),r)try{this.revertVideoNodePosition=function(e){const{parentElement:t}=e;let i;return t?(i=document.createComment(c(16)),t.insertBefore(i,e),()=>{const{parentElement:r,previousSibling:n}=e;let o=!1;return t===r&&n===i||(t.insertBefore(e,i),o=!0),t.removeChild(i),o}):()=>!1}(e)}catch(xA){Js.errorToStats(new Cs(xA,{code:"CANNOT_SAVE_VIDEO_NODE_DOM_POSITION"}))}else Js.event({name:"NoVideoNodeParentElement",probability:ws,data:void 0})}hasMedia(){return Boolean(this.videoTagAttributes&&this.videoTagAttributes.src||this.sources.filter(e=>e.src).length)}revert(){const{videoNode:e}=this;e&&(this.hasMedia()&&!isNaN(this.videoTagProps.currentTime)&&a(e,"canplay",()=>{e.currentTime=this.videoTagProps.currentTime},{once:!0}),this.videoTagAttributes&&Vi(e,this.videoTagAttributes),function(e,t){const i=["controls","loop"];F(t).forEach(r=>{-1!==i.indexOf(r)&&(e[r]=t[r])})}(e,this.videoTagProps),function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}(e),this.sources.forEach(t=>{Xe("source",e,"",t)}),this.restoreVideoPiP(),np&&(0===e.volume||e.muted)?(e.volume=0===e.volume?th:e.volume,e.muted=!0):e.muted&&Na&&Oa<=10&&(e.muted=!1,e.dispatchEvent(new Event("volumechange"))),rr(e,()=>{e.load()}),this.revertVideoNodePosition()&&Js.event({name:"MovedVideoNode",probability:ws,data:{}}),this.destroy())}destroy(){this.videoNode=void 0,this.revertVideoNodePosition=()=>!1}}const{locals:ap}=Kc.a,dp=640,lp=480;class cp extends Qu{constructor(e,t){super(e,t),this.preferredSource=void 0,this.onBufferingChangeCallback=void 0,this.videoNodeController=void 0,this.curtain=void 0,this.startTracked=!1,this.videoNodeController=e.videoNodeController,this.onSkip.add(()=>{this.trackEvent("skip",void 0)}),this.videoNodeController.isFullscreen()&&this.trackEvent("fullscreen",void 0);const i=()=>{this.videoNodeController.isFullscreen()?this.trackEvent("fullscreen",void 0):this.trackEvent("exitFullscreen",void 0)};this.videoNodeController.fullscreenApi.addHandler(i),this.addDestroyHandler(()=>{this.videoNodeController.onBufferingChange.remove(this.onBufferingChangeCallback),this.videoNodeController.fullscreenApi.removeHandler(i),this.curtain&&C(this.curtain)})}resume(){this.videoNodeController.play()}play(e){return void 0===e&&(e=!0),e&&this.onPlayRequest.dispatch(void 0),this.preload().catch(e=>this.onStop.dispatch(e)),e?this.isStarted?this.resume():this.start():this.videoNodeController.onPlay.addOne(()=>{if(this.isStarted)return;this.videoNodeController.videoNode.currentSrc===this.preferredSource.url&&(Js.event({name:"StartVideoAdByVideoPlay",data:void 0}),this.start())}),this.onStop.promise().then(e=>e?Promise.reject(e):Promise.resolve())}pause(){this.videoNodeController.pause()}skipAd(){this.onSkip.dispatch(void 0),this.onStop.dispatch(void 0)}getAdSkippableState(){return this.playbackParams.skipDelay>0&&this.getCurrentTime()>this.playbackParams.skipDelay}getAdWidth(){const e=this.videoNodeController.videoNode;return e.videoWidth>0?e.videoWidth:this.preferredSource?this.preferredSource.width:sh}getAdHeight(){const e=this.videoNodeController.videoNode;return e.videoHeight>0?e.videoHeight:this.preferredSource?this.preferredSource.height:nh}getCurrentTime(){return this.videoNodeController.getCurrentTime()}getDuration(){return this.videoNodeController.getDuration()||this.mediaAd.duration}getSrc(){return this.preferredSource?this.preferredSource.url:""}getPaused(){return this.videoNodeController.getPaused()}getVolume(){return this.adDisplayController.videoNodeController.getVolume()}setVolume(e){this.videoNodeController.setVolume(e)}resizeAd(e,t,i){void 0===i&&(i=Ql.NORMAL)}setCurtain(){if(!Re()||!/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(window.navigator.userAgent))return;this.curtain=Ne(ap.yaAdSdk_iosVideoCurtain_wrapper);const e=Ne(ap.yaAdSdk_iosVideoCurtain);this.curtain.appendChild(e),this.curtain.addEventListener("click",()=>this.clickThrough());const{videoNode:t,wrapperNode:i}=this.adDisplayController,{nextSibling:r,parentNode:n}=t,o=n===i&&r?r:i.firstChild;i.insertBefore(this.curtain,o)}getPreferredSource(e){const{width:t,height:i}=this.getVideoSize(),{desiredBitrate:r}=this.adDisplayController,n="number"===typeof r&&r>0,o=n?r:hi({clientWidth:t,clientHeight:i});let s=e;const a=e.filter(Ac);if(a.length)s=a;else{const t=Dl(e,o);if(t.length>0)return t[0]}const d=[];let l;const c=this.videoNodeController.videoNode;for(let p=0;p<s.length;p++){const e=s[p];"probably"===c.canPlayType(e.type)&&d.push(e)}if(0===d.length)for(let p=0;p<s.length;p++){const e=s[p];"maybe"===c.canPlayType(e.type)&&d.push(e)}if(0===d.length)for(let p=0;p<s.length;p++){const e=s[p];mi(e)===Gl.video&&"video/mp4"!==e.type&&e.url.indexOf(".mp4")>-1&&(Js.event({name:"ChooseMediaFileByExtension",probability:ws,data:{sourceList:s.map(Ir)}}),d.push(e))}if(0===d.length)return 1===s.length?Promise.reject(new Cs({code:"CANNOT_PLAY_SINGLE_VIDEO_MEDIA_FILE",details:{sourceList:s.map(Ir)}})):Promise.reject(new Cs({code:"NO_APPROPRIATE_VIDEO_SOURCE",details:{sourceList:s.map(Ir)}}));if(d.sort((e,t)=>e.bitrate&&t.bitrate?e.bitrate-t.bitrate:e.width&&t.width?e.width-t.width:e.height&&t.height?e.height-t.height:0),n){const e=d.filter(e=>!!e.bitrate);if(e.length)return e.reduce((e,t)=>Math.abs(r-e.bitrate)<Math.abs(r-t.bitrate)?e:t)}for(let p=0;p<this.adDisplayController.qualityLevel&&d.length>1;p++)d.shift();let h=Number.MAX_VALUE;for(let p=0;p<d.length;p++){const e=d[p],r=Math.max(Math.abs(t-e.width),Math.abs(i-e.height));r<h&&(h=r,l=e)}const u=l;if(u){const{url:e}=u;return Or(e)?function(e,t){return void 0===t&&(t=!0),void 0===(new XMLHttpRequest).responseURL?(t&&Es&&Js.eventToStats("LoadSourceRedirectWithoutResponseUrl",{src:e}),Promise.resolve(e)):new Promise(i=>{const r=new XMLHttpRequest;r.open("HEAD",e),r.timeout=2e3,r.onload=()=>{200===r.status?(t&&Js.event({name:"LoadSourceRedirectOnStatus200",probability:ws,data:{src:e,responseURL:r.responseURL}}),i(r.responseURL)):(t&&Js.event({name:"LoadSourceRedirectOnOtherStatus",probability:ws,data:{src:e}}),i(e))},r.onerror=()=>{t&&Js.event({name:"LoadSourceRedirectOnXhrError",probability:ws,data:{src:e}}),i(e)},r.ontimeout=()=>{t&&Js.event({name:"LoadSourceRedirectOnXhrTimeout",probability:ws,data:{src:e}}),i(e)},r.send()}).catch(()=>(t&&Js.event({name:"LoadSourceRedirectOnCaughtException",probability:ws,data:{src:e}}),e))}(e).then(e=>({type:u.type,bitrate:u.bitrate,width:u.width,height:u.height,delivery:u.delivery,url:e,src:e,source:e,isVpaid:!1})):u}return Promise.reject(new Cs({code:"GET_PREFERRED_SOURCE_ERROR",details:{sourceList:s.map(Ir)}}))}preload(){if(!this.preloadPromise){const e=this.getPreferredSource(this.mediaAd.getMediaFiles()),[t]=this.mediaAd.imageSources;if(t&&this.videoNodeController.setPoster(t.url),fu(e))this.preloadPromise=e.then(e=>{this.setAdMediaFile(e)});else try{this.preloadPromise=Promise.resolve(),this.setAdMediaFile(e)}catch(xA){this.preloadPromise=Promise.reject(xA)}}return this.preloadPromise}setAdMediaFile(e){this.preferredSource=e,this.videoNodeController.setSrc(e),this.onReady.dispatch(void 0)}subscribeEvents(){function e(e){let{currentTime:t,duration:i}=e;const r=(t-c)/i;r>=.25&&h(),r>=.5&&u(),r>=.75&&p()}const t=this.mediaAd,i=this.videoNodeController;this.addDestroyHandler(this.videoNodeController.onMuteChange.add(e=>{this.onVolumeChange.dispatch(void 0)}));const r=()=>{this.startTracked&&this.onResume.dispatch(void 0)};this.videoNodeController.onPlayAfterPause.add(r),this.addDestroyHandler(()=>this.videoNodeController.onPlayAfterPause.remove(r));const n=()=>{this.onPause.dispatch(void 0)};this.videoNodeController.onPause.add(n),this.addDestroyHandler(()=>this.videoNodeController.onPause.remove(n));const{bufferFullTimeout:o,bufferEmptyLimit:s}=this.mediaAd.playbackParams;let d=0,l=0;this.onBufferingChangeCallback=e=>{0===d?d++:e&&++d>s&&this.onStop.dispatch(new Cs({code:"BUFFER_EMPTY_LIMIT",details:{bufferEmptyLimit:s}})),clearTimeout(l),e&&(l=window.setTimeout(()=>{this.onStop.dispatch(new Cs({code:"BUFFER_FULL_TIMEOUT",details:{bufferFullTimeout:o}}))},o),this.onStop.addOne(()=>clearTimeout(l)),this.addDestroyHandler(()=>clearTimeout(l)))},this.videoNodeController.onBufferingChange.add(this.onBufferingChangeCallback),i.onError.add(e=>{this.onStop.dispatch(e)});let c=0;const h=ae(()=>this.onFirstQuartile.dispatch(void 0)),u=ae(()=>this.onMidpoint.dispatch(void 0)),p=ae(()=>this.onThirdQuartile.dispatch(void 0));this.onCurrentPositionChange.add(e),this.onComplete.add(()=>{e({currentTime:this.getCurrentTime(),duration:this.getDuration()}),this.trackEvent("complete",void 0)});const A=i.onCurrentPositionChange.add(e=>{let{currentTime:i,duration:r}=e;if(!r){if(!t.duration)return;r=t.duration}this.onCurrentPositionChange.dispatch({currentTime:i,duration:r})}),f=()=>{this.onComplete.dispatch(void 0),this.onStop.dispatch(void 0)};this.videoNodeController.onEnd.add(f);const m=()=>{this.mediaAd.playbackParams.clickThroughUrl&&this.clickThrough({})};this.videoNodeController.onClick.add(m);const g=function(e,t){const i=a(e,"timeupdate",()=>{e.currentTime>0&&!e.paused&&(n(),t())}),r=a(e,"playing",()=>{e.duration>0&&(n(),t())}),n=()=>{i(),r()};return n}(this.videoNodeController.videoNode,()=>{this.startTracked=!0,c=this.videoNodeController.getCurrentTime(),this.onStart.dispatch(void 0),this.trackEvent("creativeView",void 0),this.trackStartEvent(),this.onImpression.dispatch(void 0),g()});this.addDestroyHandler(()=>{this.videoNodeController.onClick.remove(m),this.videoNodeController.onEnd.remove(f),A(),g(),this.onComplete.removeAll()})}start(){this.isStarted=!0,this.subscribeEvents(),this.setCurtain(),this.videoNodeController.setSeekAllowed(!1),this.onStop.addOne(()=>{this.videoNodeController.setSeekAllowed(!0)}),this.videoNodeController.play(),this.videoNodeController.setVisibleControls(!1)}getVideoSize(){const e=this.videoNodeController.getWidth(),t=this.videoNodeController.getHeight();if(e&&t)return{width:e,height:t};const{width:i,height:r}=this.adDisplayController.slotSizeSensor.getSize();return i&&r?{width:i,height:r}:{width:dp,height:lp}}}const{locals:hp}=Kc.a;let up=0;const pp=100,Ap=(fp=[cn.AdSDK,cn.VideoPlayer,cn.Multiroll],!(-1!==_c(fp,Is)));var fp;class mp extends su{constructor(e,t,i){var r;super(i),this.config=void 0,this.videoNodeController=void 0,this.videoNode=void 0,this.gui=void 0,this.qualityLevel=0,this.desiredBitrate=void 0,this.autoplayAbility=Rr({},Fc),this.onDetectAutoplayAbility=new ho,this.onAdPodImpression=new ho,this.onAdPodFirstQuartile=new ho,this.onAdPodMidpoint=new ho,this.onAdPodThirdQuartile=new ho,this.onAdPodError=new ho,this.adVolume=new uo(rh),this.adVolumeAvailability=new uo(oh),this.onCurrentPositionChange=new ho,this.onAdSkippableStateChange=new ho,this.blur=void 0,this.emitAdEnd=void 0,this.viewersList=[],this.currentViewer=void 0,this.nativeControlsHidder=void 0,this.initialVideoState=void 0,this.savedVolume=void 0,this.adSkippableState=ih,this.adType=void 0,this.apiPlayingStateBeforeCreateViewer=void 0,this.shouldGuiBeVisible=new uo(!1),this.showAdCounter=0,this.startBlur=e=>{let{viewer:t}=e;const{playbackParams:i}=t;i.backgroundBlur&&(this.tryAppendBlur(),this.blur&&this.blur.start())},this.stopBlur=()=>{this.blur&&(this.blur.stop(),this.config.backgroundBlur||this.destroyBlur())},this.destroyBlur=()=>{this.blur&&(this.blur.destroy(),this.blur=void 0)},this.updateAdSkippableState=e=>{this.adSkippableState!==e&&(this.adSkippableState=e,this.onAdSkippableStateChange.dispatch(e))},this.config=Xi({},qt(r=e),{},Wi(r),{videoSlotCanAutoPlay:void 0===r.videoSlotCanAutoPlay?void 0:Boolean(r.videoSlotCanAutoPlay),desiredBitrate:void 0===r.desiredBitrate?void 0:Number(r.desiredBitrate),clickThroughCallback:"function"===typeof r.clickThroughCallback?r.clickThroughCallback:void 0,lang:"string"===typeof r.lang?r.lang:zc,saveCurrentTime:"boolean"===typeof r.saveCurrentTime?r.saveCurrentTime:void 0}),this.videoNode=t,++up===pp&&Js.errorToStats(new Cs({code:"TOO_MANY_CREATE_AD_DISPLAY_CONTROLLER_REQUESTS",details:void 0})),Js.event({name:"CreateAdDisplayController",probability:ws,data:{config:this.config}});const{volume:n}=t;this.savedVolume=n||th;const{lang:o}=this.config;this.desiredBitrate=e.desiredBitrate,this.videoNodeController=new zh(t),e.qualityLevel&&(this.qualityLevel=e.qualityLevel),this.onAdEnd.add(()=>this.setVisibleNativeControls(!0)),this.onReady.add(()=>this.setVisibleNativeControls(!1)),this.gui=this.addGui(),this.onBeforeAdStart.addOne(()=>{this.setGuiVisibility(!0)}),this.onAdMediaStart.add(e=>{let{viewer:t}=e;const{contentType:i,playbackParams:r}=t,{showGuiForVpaid:n}=r,o=i===Gl.video||Boolean(i===Gl.js&&n);this.setGuiVisibility(o)}),this.onAdMediaEnd.add(()=>{this.setGuiVisibility(!1)}),Ni([this.shouldGuiBeVisible,this.slotSizeSensor.onResize],(e,t)=>{let{width:i}=t;return e&&i>=uh},e=>{e?this.gui.show():this.gui.hide()}),this.initBlur(),er(this.videoNode)&&!this.getIfIsNonLinear()&&(this.onAdMediaStart.add(()=>{t.style.cursor=this.getCurrentClickability()?"pointer":"default"}),this.onAdMediaEnd.add(()=>{t.style.cursor="default"})),this.onCurrentPositionChange.add(e=>{let{viewerTime:t,viewerDuration:i}=e;if(!this.currentViewer)return;const r=this.currentViewer.playbackParams.skipDelay>0&&t>=this.currentViewer.playbackParams.skipDelay;this.gui.controls.skip.setVisible(r);const n=function(e){const t=Math.floor(e/Ma),i=Math.floor(e-t*Ma);if(isNaN(i))return"";const r=ie(String(i),2,"0");return t?ie(String(t),2,"0")+":"+r:r}(i-t),s=qc("AD_TITLE",o);this.gui.controls.timeLeft.setText(s+" "+n)}),this.onDestroy.add(()=>{this.isFinished=!0,this.viewersList.forEach(e=>{e.destroy()}),this.viewersList.length=0,this.gui.wrapper.hide(),this.onCurrentPositionChange.removeAll(),this.onAdSkippableStateChange.removeAll(),this.adVolume.removeAll(),this.currentViewer&&(this.currentViewer.isStarted&&(void 0===this.adType&&Js.error({error:new Cs({code:"EMPTY_AD_TYPE_WHILE_PLAYING",details:void 0})}),this.onAdMediaEnd.dispatch({adType:this.adType})),this.currentViewer.destroy(),this.currentViewer=void 0),this.videoNodeController.destroy(),C(this.nativeControlsHidder),this.gui.destroy(),this.revertVideoState()})}async showAd(e){const t=er(this.videoNode)?Ri(this.videoNode):void 0;if(!1===t){const e=Oc(this.wrapperNode)?Ri(this.wrapperNode):void 0;return void Js.errorToStats(new Cs({code:"WRAPPER_OR_VIDEO_NODE_NOT_IN_DOM",details:{videoNodeInDom:t,wrapperInDom:e}}))}if(!e.mediaAds.length){const e=new Cs({code:"NO_AD_PODS_TO_PLAY_IN_SHOW_AD_METHOD",details:{config:this.config}});return void Js.error({error:e})}this.showAdCounter++,this.showAdCounter>1&&Js.event({name:"CallShowAdMultipleTimes",probability:ws,data:void 0});const{adBreak:i}=e.getFirstMediaAd(),r=i.adType?i.adType:$d.preroll;return this.adType=r,this.isFinished=!1,new Promise((t,i)=>{this.viewersList=e.mediaAds.map(e=>this.createViewer(e)).filter(e=>Boolean(e)),this.emitAdEnd=t,this.onBeforeAdStart.dispatch({adType:r}),this.startAdPlayback(r).then(t).catch(e=>{this.onAdMediaEnd.dispatch({adType:r}),this.isFinished=!0,i(e)})}).catch(e=>{Js.errorToStats(e)}).then(()=>{this.revertVideoState(),this.isFinished=!0,this.onAdEnd.dispatch({adType:r})})}getAdPlacementOptions(){return $i({slotSize:this.slotSizeSensor.getSize(),slotVisibilityRatio:this.slotVisibilitySensor.getVisibilityRatio(),videoContentSize:{width:this.videoNode.videoWidth,height:this.videoNode.videoHeight},videoPlaybackQuality:He(this.videoNode)})}getClickThroughURL(){const{currentViewer:e,viewersList:t}=this,i=e||t[0];if(i)return i.mediaAd.playbackParams.clickThroughUrl;throw new Error("AdSDK JS Error: Cannot get clickThroughUrl")}setMuted(e){this.setVolume(e?0:this.savedVolume)}resizeAd(e,t,i){void 0===i&&(i=Ql.NORMAL);const{currentViewer:r}=this;r&&r.resizeAd(e,t,i)}clickThrough(e){this.currentViewer&&this.currentViewer.clickThrough(e)}play(e){return void 0===e&&(e=!0),e&&(this.config.autoplay=!0),this.currentViewer?this.currentViewer.play(e):Promise.reject(new Error("AdSDK Error: play request without AdMedia"))}pause(){this.currentViewer?this.currentViewer.pause():this.isFinished||(this.apiPlayingStateBeforeCreateViewer=!1)}resume(){this.currentViewer?this.currentViewer.resume():this.isFinished||(this.apiPlayingStateBeforeCreateViewer=!0)}close(){this.destroyNextViewers("close")}skipAllViewers(){this.skipCurrentViewer(),this.destroyNextViewers("skip")}skipCurrentViewer(){this.setGuiVisibility(!1),this.currentViewer&&this.currentViewer.getAdSkippableState()&&this.currentViewer.skipAd(),this.currentViewer||this.stop()}setGuiVisibility(e){this.shouldGuiBeVisible.dispatch(e)}setGuiVisibilityPublic(e){this.setGuiVisibility(e)}stop(){this.isFinished=!0,this.emit("stop"),this.emitAdEnd&&this.emitAdEnd()}getAdWidth(){return this.currentViewer?this.currentViewer.getAdWidth():sh}getAdHeight(){return this.currentViewer?this.currentViewer.getAdHeight():nh}trackEvent(e,t){this.currentViewer&&this.currentViewer.trackEvent(e,t)}trackEventForAllViewers(e,t){this.viewersList.forEach(i=>{i.trackEvent(e,t)})}getCurrentContentType(){return this.currentViewer?this.currentViewer.contentType:void 0}getCurrentTime(){return this.currentViewer?this.getCurrentViewerStartTime()+this.currentViewer.getCurrentTime():0}getDuration(){let e=0;return this.viewersList.forEach(t=>{const i=t.getDuration();i>0&&(e+=i)}),e}getPaused(){return this.currentViewer?this.currentViewer.getPaused():!!this.isFinished||!1===this.apiPlayingStateBeforeCreateViewer}getVolume(){return this.adVolume.getValue()}setVolume(e){this.adVolume.dispatch(e);const{currentViewer:t}=this;t?t.setVolume(e):this.videoNodeController.setVolume(e)}setVisibleNativeControls(e){this.getIfIsNonLinear()||(e?C(this.nativeControlsHidder):(this.videoNode.controls=!1,this.nativeControlsHidder||(this.nativeControlsHidder=Pe(this.wrapperNode,"\n                        #"+this.videoNode.id+"::-webkit-media-controls{\n                            display: none !important;\n                        }\n                    ")),document.head.appendChild(this.nativeControlsHidder)))}getCurrentClickability(){if(this.currentViewer){const{isClickable:e,visitSiteShow:t}=this.currentViewer.playbackParams;return Boolean(e)&&!t}return!1}getCurrentSrc(){return this.currentViewer?this.currentViewer.getSrc():""}getMuted(){const{currentViewer:e}=this;return e?0===e.getVolume():this.videoNodeController.getMuted()}getAdSkippableState(){return this.adSkippableState}getAdVolumeAvailability(){return this.adVolumeAvailability.getValue()}revertVideoState(){this.initialVideoState&&(this.initialVideoState.revert(),delete this.initialVideoState)}trackError(e){this.currentViewer&&this.currentViewer.trackError(e)}getAutoplay(){return"boolean"===typeof this.apiPlayingStateBeforeCreateViewer?this.apiPlayingStateBeforeCreateViewer:this.getCurrentViewerIndex()>0||!this.autoplayAbility.requireUserGesture&&(void 0===this.config.autoplay||this.config.autoplay)}addGui(){const e=new hh(this.wrapperNode,this.config),{wrapper:t,controls:i}=e;return i.play.setVisible(!this.getAutoplay()),this.on("pause",()=>{i.play.show()}).on(["start","resume"],()=>{i.play.hide()}).once("playAdMedia",()=>{i.play.setVisible(!this.getAutoplay()||this.autoplayAbility.requireUserGesture)}),Pc?this.on(["start","resume"],()=>{this.currentViewer&&this.currentViewer.playbackParams.pauseAllowed&&i.pause.show()}):(this.onChangeHover.add(e=>{if(e){const e=this.currentViewer&&this.currentViewer.playbackParams.pauseAllowed,t=!i.play.isVisible&&!i.play.isBlocked();e&&t&&i.pause.show()}else i.pause.hide()}),this.on(["start","resume"],()=>{this.currentViewer&&this.currentViewer.playbackParams.pauseAllowed&&this.isHovered&&i.pause.show()})),this.on({pause:()=>i.pause.hide()}),e.on({click:()=>this.clickThrough(),pause:()=>this.pause(),play:()=>{this.currentContentType===Gl.video?this.videoNodeController.play():this.play()},skip:()=>{this.skipCurrentViewer()}}),e.onMuteButtonClick.add(()=>{this.setMuted(!this.getMuted())}),this.once("playAdMedia",()=>{e.addSkin(),this.getCurrentClickability()?t.addClass(hp.pointer):t.removeClass(hp.pointer)}),this.adVolume.add(t=>{const i=0===t;e.setMuted(i)}),this.onAdMediaStart.add(t=>{let{viewer:r}=t;const{playbackParams:n}=r,{title:o,isClickable:s,visitSiteShow:a,controlsSettings:d}=n;e.topRightBlock.className=!1!==d.controlsVisibility[ql.skip]?hp.topRightBlock:hp.topRightBlockMinimal,i.skip.setVisible(!1),i.timeLeft.show(),i.title.setText(o).setVisible(!(Na||Ra)&&Boolean(o)),i.mute.setVisible(!Re()),i.visitSite.setVisible(Boolean(s&&a)),e.setMuted(this.getMuted())}),e}initBlur(){ml>-1||(this.onAdMediaStart.add(this.startBlur),this.onAdMediaEnd.add(this.stopBlur),this.onDestroy.add(this.destroyBlur),this.config.backgroundBlur&&this.tryAppendBlur())}tryAppendBlur(){if(this.blur)return;if(!er(this.videoNode))return;const e=this.videoNode.parentElement;e?this.blur=new nu(e,this.videoNode):Js.errorToStats(new Cs({code:"NO_PARENT_ELEMENT_FOR_BLUR",details:void 0}))}getCurrentViewerIndex(){return this.currentViewer?Math.max(this.viewersList.indexOf(this.currentViewer),0):0}playAdMedia(e){this.currentViewer=e,e.trackEvent("onCreativeInit",void 0);const t=e.playbackParams,{contentType:i}=e,r=i===Gl.video,n=r?t.videoTimeout:t.vpaidTimeout,o=r?"VIDEO_TIMEOUT":"VPAID_START_TIMEOUT",s=new Error;return new Promise((r,a)=>{e.onPlayRequest.addOne(()=>{if(!e.isStarted){const{clear:r,promise:a}=go(n);a.then(()=>{const r=e.getSrc();e.onStop.dispatch(new Cs(s,{code:o,details:{contentType:i,timeout:n,src:r,config:this.config,playbackParams:t,isFirstErrorTimeout:!0}}))}),e.onStart.addOne(r),e.onResume.addOne(r),e.addDestroyHandler(r)}});let d=NaN;const l=e.onPlayRequest.addOne(()=>{d=Date.now()});e.addDestroyHandler(l),e.onStart.add(()=>{isNaN(d)?Js.errorToStats(new Cs({code:"AdPodStartWithoutPlayRequest",details:void 0})):Es&&Js.values({name:"AdPodStart",values:{startTime:Date.now()-d},data:{src:e.getSrc(),config:this.config,errorTimeout:n,playRequestTime:String(d)},labels:{contentType:i}})}),this.emit("playAdMedia"),this.play(this.getAutoplay()).then(r).catch(a)}).catch(e=>{this.trackError(e),Js.errorToStats(e),li("AdPod playing error",e),this.onAdPodError.dispatch(e)}).then(()=>{this.currentViewer=void 0,e.destroy()})}getCurrentViewerStartTime(){const e=this.getCurrentViewerIndex();let t=0;for(let i=0;i<e;i++)t+=this.viewersList[i].getDuration();return t}createViewer(e){const t=e.playbackParams,i=this.config;this.config.trackingEvents&&(e.vastAd.trackingEvents=ji(e.vastAd.trackingEvents,this.config.trackingEvents));const r=e.contentType===Gl.js?new rp(this,e):new cp(this,e);return r.onImpression.add(this.onAdPodImpression),r.onFirstQuartile.add(this.onAdPodFirstQuartile),r.onMidpoint.add(this.onAdPodMidpoint),r.onThirdQuartile.add(this.onAdPodThirdQuartile),t.controlsSettings=Qi(t.controlsSettings,i.controlsSettings,vh?{controlsVisibility:{skip:!1,timeLeft:!1}}:void 0),void 0!==i.visitSiteShow&&(t.visitSiteShow=i.visitSiteShow),void 0!==i.pauseAllowed&&(t.pauseAllowed=i.pauseAllowed),"boolean"===typeof i.backgroundBlur&&(t.backgroundBlur=i.backgroundBlur),!1===i.pauseOnClickThrough&&(t.pauseOnClickThrough=!1),!0===i.showGuiForVpaid&&(t.showGuiForVpaid=!0),"number"===typeof i.skipDelay&&(t.skipDelay=i.skipDelay),"number"===typeof i.bufferFullTimeout&&(t.bufferFullTimeout=i.bufferFullTimeout),"string"===typeof i.clickThroughUrl&&(t.clickThroughUrl=i.clickThroughUrl,t.isClickable=Boolean(i.clickThroughUrl)),!0===i.clickThroughConfirmation&&(t.clickThroughConfirmation=!0),r}async startAdPlayback(e){const t=void 0===this.config.saveCurrentTime?e===$d.midroll:this.config.saveCurrentTime;if(!this.getIfIsNonLinear()){this.initialVideoState=new sp(this.videoNode,t),this.videoNode.loop=!1;const{poster:e}=this.config;e&&this.videoNodeController.setPoster(e)}let i;const r=this.viewersList.every(e=>e.mediaAd.getIsIndependentOnVideoElement()),{videoSlotCanAutoPlay:n}=this.config;if(i=r&&Ap?Uc:"boolean"===typeof n?n?Uc:Fc:er(this.videoNode)?await this.requestAutoplayAbility():Uc,this.isFinished)throw new Cs({code:"AD_FINISHED_DURING_RAA",details:void 0});this.autoplayAbility=i,this.onDetectAutoplayAbility.dispatch(i),this.autoplayAbility.requireMute&&this.videoNodeController.setMute(!0);const o=this.viewersList[0];o.onReady.addOne(()=>this.onReady.dispatch(void 0)),o.onStart.addOne(()=>this.onAdStart.dispatch({adType:e}));let s=this.viewersList.length;this.viewersList.forEach(e=>{e.onComplete.addOne(()=>{s-=1})}),this.viewersList.forEach(t=>{t.onStart.add(()=>{this.emit("start")}),t.onPause.add(()=>{this.emit("pause")}),t.onResume.add(()=>{this.emit("resume")}),t.onVolumeChange.add(()=>{this.adVolume.dispatch(t.getVolume())}),t.onStart.addOne(()=>{this.adVolume.dispatch(t.getVolume())}),t.onSkip.add(()=>this.onAdSkipped.dispatch({adType:e})),t.onStart.addOne(()=>{this.onAdMediaStart.dispatch({viewer:t,adType:e})}),t.onCurrentPositionChange.add(e=>{let{currentTime:t,duration:i}=e;this.onCurrentPositionChange.dispatch({viewerTime:t,viewerDuration:i,totalTime:this.getCurrentViewerStartTime()+t,totalDuration:this.getDuration()})}),t.onClickThrough.add(e=>this.onClickThrough.dispatch(e));const{skipDelay:i,showGuiForVpaid:r}=t.mediaAd.playbackParams;"video"===t.contentType||r?t.onCurrentPositionChange.add(e=>{let{currentTime:t}=e;const r=0!==i&&t>i;this.updateAdSkippableState(r)}):"js"===t.contentType&&t.onAdSkippableStateChange.add(this.updateAdSkippableState)});for(const a of this.viewersList){if(this.updateAdSkippableState(!1),this.isFinished){a.mediaAd.trackError(new Cs({code:"AD_BREAK_IS_STOPPED",details:void 0}));continue}if(a.mediaAd.getIsYandexCreative()){const e=this.slotSizeSensor.getSize();if(!Zi(e)){a.mediaAd.trackError(new Cs({code:"SLOT_SMALL_SIZE",details:{slotSize:e,config:this.config,adConfig:a.mediaAd.adConfig}}));continue}}this.adVolume.dispatch(this.videoNodeController.getVolume()),this.gui.applyControlsSettings(a.mediaAd.playbackParams.controlsSettings),this.adVolumeAvailability.dispatch(a.mediaAd.getMutedControlVisibility()),await this.playAdMedia(a),this.onAdMediaEnd.dispatch({adType:e})}0===s&&this.onAllAdPodComplete.dispatch({adType:e})}async requestAutoplayAbility(){const e=Date.now(),{promise:t,stop:i}=function(e,t){let{checkSoundEnabled:i=!0}=void 0===t?{}:t;const r=new jc(e,{checkSoundEnabled:i});return{promise:r.promise,stop:r.stop}}(this.videoNode,{checkSoundEnabled:!this.getMuted()});let r;this.onDestroy.add(i);try{r=await t}catch(xA){return this.isFinished||Js.error({error:new Cs({code:"RAA_WAS_STOPPED_WITHOUT_AD_FINISH",details:void 0})}),Rr({},Fc)}return Js.values({name:"DetectAutoplayAbility",values:{duration:Date.now()-e},data:{config:this.config,autoplayAbility:r},labels:{},probability:ws}),r}destroyNextViewers(e){const{viewersList:t,currentViewer:i}=this;this.setGuiVisibility(!1),i&&i.destroy();for(let r=this.getCurrentViewerIndex();r<t.length;r++){const{mediaAd:i}=t[r];i.trackEvent(e,this.getAdPlacementOptions(),void 0)}this.stop()}getIfIsNonLinear(){return this.viewersList.every(e=>e.mediaAd.vastAd.isNonLinear)}}let gp,vp;!function(e){e.AdStarted="AdStarted",e.AdPodStarted="AdPodStarted",e.AdPodImpression="AdPodImpression",e.AdPodVideoFirstQuartile="AdPodVideoFirstQuartile",e.AdPodVideoMidpoint="AdPodVideoMidpoint",e.AdPodVideoThirdQuartile="AdPodVideoThirdQuartile",e.AdPodSkipped="AdPodSkipped",e.AdPodStopped="AdPodStopped",e.AdPodError="AdPodError",e.AdStopped="AdStopped",e.AllAdPodVideoComplete="AllAdPodVideoComplete",e.AdSkippableStateChange="AdSkippableStateChange",e.AdVolumeChange="AdVolumeChange",e.AdVolumeAvailabilityStateChange="AdVolumeAvailabilityStateChange"}(gp||(gp={})),function(e){e.adComplete="adComplete",e.stopAd="stopAd"}(vp||(vp={}));class yp extends co{constructor(e){let{videoSlot:t,slot:i,mediaAds:r,adDisplayConfig:n}=e;super(),this.pauseAd=this.createPlaybackMethod("pauseAd",()=>{this.adDisplayController.pause()}),this.resumeAd=this.createPlaybackMethod("resumeAd",()=>{this.adDisplayController.resume()}),this.isPlayAdCalled=!1,this.adDisplayController=void 0,this.videoSlot=void 0,this.slot=void 0,this.mediaAds=void 0,this.adDisplayConfig=void 0,this.getPublicInstance=()=>({playAd:this.playAd,stopAd:this.stopAd,pauseAd:this.pauseAd,getAdPlayingState:this.getAdPlayingState,resumeAd:this.resumeAd,subscribe:this.subscribe,skipAd:this.skipAd,getAdSkippableState:this.getAdSkippableState,getAdVolume:this.getAdVolume,setAdVolume:this.setAdVolume,getAdVolumeAvailabilityState:this.getAdVolumeAvailabilityState}),this.playAd=()=>{if(this.isPlayAdCalled){We(new Cs({code:"ATTEMPT_TO_PLAY_AD_SECOND_TIME",details:void 0}))}else this.isPlayAdCalled=!0,this.adDisplayController.showAd(this.mediaAds).then(()=>{this.destroy(vp.adComplete)})},this.stopAd=()=>{this.destroy(vp.stopAd)},this.getAdPlayingState=()=>this.isPlayAdCalled?this.adDisplayController.isFinished?Ec.END:this.adDisplayController.getPaused()?Ec.PAUSE:Ec.PLAY:Ec.PAUSE,this.getAdSkippableState=()=>this.adDisplayController.getAdSkippableState(),this.getAdVolume=()=>!this.isPlayAdCalled||this.isDestroyed?rh:this.adDisplayController.getVolume(),this.setAdVolume=e=>{if(this.isPlayAdCalled&&!this.isDestroyed)return this.adDisplayController.setVolume(e)},this.getAdVolumeAvailabilityState=()=>!this.isPlayAdCalled||this.isDestroyed?oh:this.adDisplayController.getAdVolumeAvailability(),this.skipAd=()=>{this.getAdSkippableState()?this.adDisplayController.skipAllViewers():Js.error({error:new Cs({code:"ATTEMPT_TO_SKIP_NOT_SKIPPABLE_AD",details:void 0})})},this.subscribe=(e,t)=>{if("function"!==typeof t)return o;const i=i=>{try{t(i)}catch(xA){Js.error({error:new Cs({code:"APC_CALLBACK_ERROR",details:{eventName:e,data:i}})}),j(xA)}};switch(e){case gp.AdStarted:return this.adDisplayController.onAdStart.add(()=>{i({})});case gp.AdPodStarted:return this.adDisplayController.onAdMediaStart.add(()=>{i({})});case gp.AdPodImpression:return this.adDisplayController.onAdPodImpression.add(()=>{i({})});case gp.AdPodVideoFirstQuartile:return this.adDisplayController.onAdPodFirstQuartile.add(()=>{i({})});case gp.AdPodVideoMidpoint:return this.adDisplayController.onAdPodMidpoint.add(()=>{i({})});case gp.AdPodVideoThirdQuartile:return this.adDisplayController.onAdPodThirdQuartile.add(()=>{i({})});case gp.AdPodSkipped:return this.adDisplayController.onAdSkipped.add(()=>{i({})});case gp.AdPodError:return this.adDisplayController.onAdPodError.add(e=>{let t;"string"===typeof e.code?t=e.code:(t="AD_POD_UNRECOGNIZED_ERROR_CODE",Js.error({error:new Cs({code:t,details:{error:e}})})),i({code:t})});case gp.AdPodStopped:return this.adDisplayController.onAdMediaEnd.add(()=>{i({})});case gp.AllAdPodVideoComplete:return this.adDisplayController.onAllAdPodComplete.add(()=>{i({})});case gp.AdStopped:return this.adDisplayController.onDestroy.add(()=>{i({})});case gp.AdSkippableStateChange:return this.adDisplayController.onAdSkippableStateChange.add(e=>{i({skippableState:e})});case gp.AdVolumeChange:return this.adDisplayController.adVolume.add(()=>{i({})});case gp.AdVolumeAvailabilityStateChange:return this.adDisplayController.adVolumeAvailability.add(()=>{i({})});default:return o}},this.videoSlot=t,this.slot=i,this.mediaAds=r,this.adDisplayConfig=n,this.adDisplayController=new mp(this.adDisplayConfig,this.videoSlot,this.slot),this.addDestroyHandler(()=>{this.adDisplayController.destroy()})}createPlaybackMethod(e,t){return()=>{if(this.isPlayAdCalled&&!this.isDestroyed)t();else{We(new Cs({code:this.isDestroyed?"CALL_PLAYBACK_METHOD_AFTER_STOP":"CALL_PLAYBACK_METHOD_BEFORE_PLAY",details:{methodName:e}}))}}}}class wp{constructor(e){var t=this;this.mediaAds=e,this.preloadPromise=void 0,this.showAdPlaybackControllers=[],this.getPublicInstance=()=>({createPlaybackController:this.createPlaybackController,showAd:this.showAd,getAdDuration:this.getAdDuration,separateAdPods:this.separateAdPods,getAdSourceTypes:this.getAdSourceTypes,setStatsRootField:this.setStatsRootField,setStatsRootFields:this.setStatsRootFields,hasNotReplacedBroadcastAd:this.hasNotReplacedBroadcastAd,hasYandexCreative:this.hasYandexCreative,destroy:this.destroy,preload:this.preload,filterAdPodsIndependentOnHtmlControls:this.filterAdPodsIndependentOnHtmlControls,preventPlaying:this.preventPlaying,getAdPodsCount:this.getAdPodsCount}),this.cancelPreloading=()=>{this.mediaAds.mediaAds.forEach(e=>{e.isPreloaded()||e.cancelPreloading()})},this.createPlaybackController=function(e,i,r){void 0===r&&(r={}),Js.event({name:"CreatePlaybackController",probability:ws,data:{config:r}});const n=r,{disableExecutionTrackings:o=!1}=n,s=Nr(n,["disableExecutionTrackings","autoplay"]),a=o?t.mediaAds.modify(e=>e.map(e=>{const t=e.clone();return t.vastAd.progressTrackings=[],t.vastAd.trackingEvents={error:t.vastAd.trackingEvents.error},t})):t.mediaAds;return t.cancelPreloading(),new yp({videoSlot:e,slot:i,mediaAds:a,adDisplayConfig:s}).getPublicInstance()},this.showAd=function(e,i,r){void 0===r&&(r={}),t.cancelPreloading();const n=t.createPlaybackController(e,i,r);t.showAdPlaybackControllers.push(n);const o=new Promise(e=>{n.subscribe(gp.AdStopped,()=>{t.showAdPlaybackControllers=t.showAdPlaybackControllers.filter(e=>e!==n),e()})});return n.playAd(),o},this.getAdDuration=()=>this.mediaAds.getDuration(),this.separateAdPods=()=>this.mediaAds.mediaAds.map(e=>{return new wp(new bc([e])).getPublicInstance()}),this.getAdSourceTypes=()=>this.mediaAds.mediaAds.map(e=>{let{contentType:t}=e;return t}).filter((e,t,i)=>i.indexOf(e)===t),this.setStatsRootField=(e,t)=>{Js.setRootFields({[e]:t}),Js.event({name:"UsingSetStatsRootFieldInAdLoader",probability:ws,data:void 0})},this.setStatsRootFields=e=>{Js.setRootFields(e)},this.hasNotReplacedBroadcastAd=()=>this.mediaAds.mediaAds.some(e=>e.isNotReplacedBroadcastAd()),this.hasYandexCreative=()=>this.mediaAds.mediaAds.some(e=>e.getIsYandexCreative()),this.destroy=()=>{this.preloadPromise=void 0,this.mediaAds.mediaAds.forEach(e=>e.cancelPreloading()),this.showAdPlaybackControllers.forEach(e=>{e.stopAd()}),this.showAdPlaybackControllers.length=0},this.preload=e=>{let{preloadTimeout:t=Zl}=e,i=Nr(e,["preloadTimeout"]);if(l(jo(window)))return Promise.resolve();const r=go(t).promise.then(this.cancelPreloading);if(void 0===this.preloadPromise){const e=this.mediaAds.mediaAds.map(e=>e.preload(i));this.preloadPromise=Promise.all(e).then(o)}return Promise.race([this.preloadPromise,r])},this.filterAdPodsIndependentOnHtmlControls=e=>{const[t,i]=Si(this.mediaAds.mediaAds,e=>e.getIfIsRequiredHtmlControls());this.mediaAds=new bc(i),t.forEach(t=>{t.trackError(new Cs({code:"CANNOT_SHOW_CPC_CONTROLS",details:{mediaFile:Ze(t.getJSMediaFile()),reason:e}}))})},this.preventPlaying=(e,t)=>{this.mediaAds.mediaAds.forEach(i=>{i.trackError(new Cs({code:"AD_VIEWER_PLAYING_PREVENTED",details:{mediaFiles:i.vastAd.mediaFiles.map(Ze),reason:e,details:t}}))}),this.mediaAds=new bc([])},this.getAdPodsCount=()=>this.mediaAds.mediaAds.length}}class bp{constructor(e){let{adConfig:t,whenVmapLoaded:i,adBreak:r,adPlacementOptions:n}=e;this.whenVmapLoaded=void 0,this.adBreak=void 0,this.vmap=void 0,this.adConfig=void 0,this.adPlacementOptions=void 0,this.getPublicInstance=()=>({loadAd:this.loadAd}),this.load=e=>{const{adConfig:t,adPlacementOptions:i}=this;return this.whenVmapLoaded.then(()=>Ei({adConfig:t,adBreak:e,adPlacementOptions:i}))},this.loadAd=async()=>{try{await this.whenVmapLoaded;const e=this.adBreak?this.adBreak:this.getPrerollBlock();if(!e)throw new Cs({code:"EXPECTED_PREROLL_AD_BREAK",details:void 0});const{adConfig:t,adPlacementOptions:i}=this,r=await Ei({adConfig:t,adBreak:e,adPlacementOptions:i});return new wp(r).getPublicInstance()}catch(xA){throw li(xA),Js.errorToStats(xA),xA}},this.getInPageBlock=()=>_i(this.getAdBreaks(),$d.inpage)[0],this.getPrerollBlock=()=>_i(this.getAdBreaks(),$d.preroll)[0],this.getPostrollBlock=()=>_i(this.getAdBreaks(),$d.postroll)[0],this.getMidrollBlocks=()=>_i(this.getAdBreaks(),$d.midroll),this.adConfig=t,this.whenVmapLoaded=i,this.adBreak=r,this.adPlacementOptions=n,i.then(e=>{this.vmap=e}).catch(e=>{Js.errorToStats(e)})}getAdBreaks(){if(this.adBreak)return[this.adBreak];if(this.vmap)return this.vmap.adBreaks;throw new Cs({code:"NO_AD_BREAK_OR_VMAP_IN_AD_LOADER",details:void 0})}}const Ep=3e3,_p="https://an.yandex.ru/vmap/",Sp=e=>{const{category:t,startWatchedTime:i,watchedTimeSinceAd:r,additionalParams:n}=e;return Dr({},ol(e),{"video-category-id":String(t),wtime:"number"===typeof i?String(Math.floor(i)):void 0,"wtime-since-ad":"number"===typeof r?String(Math.floor(r)):void 0,client_type:"html","vh-from":Object(Mo.isObject)(n)&&"string"===typeof n.from?n.from:void 0})};let Tp;!function(e){e.start="start",e.end="end"}(Tp||(Tp={}));const Cp={[Tp.start]:$d.preroll,[Tp.end]:$d.postroll},kp="linear,nonlinear",Pp="linear",Op="nonlinear",Ip=0,Rp=0;let Np;!function(e){e.manual="manual",e.auto="auto"}(Np||(Np={}));const Dp=e=>{const t=xr("Collapse",e);return!0===xr("Repeat",e)?Np.auto:!1===t?Np.manual:null};class Vp{constructor(){this.adBreaks=[],this.isSingleVideoSession=!1}static async load(e,t){const i=Wt(e),r=function(e,t){void 0===t&&(t=ld);const{partnerId:i}=e;if(!i)throw new Cs({code:"VMAP_CONFIG_WITHOUT_PARTNER_ID",details:void 0});const r=Le({url:V(""+_p+i,Sp(e)),ignoreAbd:!0,options:t}),{encodeUrl:n}=$a.videoAd||{};return"function"===typeof n?n(V(r,{abd:"1"})):r}(i,t),{vmapLoadTimeout:n,blockInfoLoadTimeout:s}=i;s&&Js.deprecated("VmapBlockInfoLoadTimeout","blockInfoLoadTimeout is deprecated, use vmapLoadTimeout");let a=Ep;n?a=n:s&&(a=s);const d={url:r,config:e,timeout:a};let c;Js.event({name:"VmapLoadStart",data:d,probability:ws});try{const e=!l(jo(window));c=await Be(r,null,a,e)}catch(xA){const t=new Cs(xA,{code:"VMAP_LOAD_ERROR",details:d});throw Js.errorToStats(t),t}if(200!==c.responseStatus)throw new Cs({code:"INVALID_VMAP_RESPONSE_STATUS",details:Ur({},d,{responseStatus:c.responseStatus,responseText:c.responseText})});try{const{vmap:t,events:i,errors:r}=function(e,t,i){const{xml:r,responseText:n}=e,s={responseText:n};if(null===r||void 0===r)throw new Cs({code:"VMAP_EMPTY_RESPONSE",details:Fr({},t,{vmapXmlObject:e})});const a=r.querySelector("VMAP");if(!a)throw new Cs({code:"NO_VMAP_ROOT_NODE",details:s});const d=a.querySelectorAll("AdBreak"),l=new Vp,c=r.querySelector("VMAP > Extensions");if(!c)throw new Cs({code:"NO_VMAP_EXTENSIONS",details:s});o(a.querySelectorAll("TrackingEvents"));const h=e=>{const t=c.querySelector('Extension[type="'+e+'"]');return t?Ge(t):""},u=e=>parseInt(h(e),10),p=e=>"true"===h(e);l.isSingleVideoSession=p("SingleVideoSession");const A={sessionId:h("SessionID"),title:h("Title").trim(),timeLeftShow:p("TimeLeftShow"),visitSiteShow:p("VisitSiteShow"),vastTimeout:u("VASTTimeout"),videoTimeout:u("VideoTimeout"),vpaidTimeout:u("VPAIDTimeout"),wrapperTimeout:u("WrapperTimeout"),wrapperMaxCount:u("WrapperMaxCount"),bufferFullTimeout:u("BufferFullTimeout"),bufferEmptyLimit:u("BufferEmptyLimit")},f=[],m=[];for(let o=0;o<d.length;o++)try{const{adBreak:e,errors:t,events:r}=Br(Fr({},A,{},i),s,d[o]);l.adBreaks.push(e),f.push(...t),m.push(...r)}catch(xA){f.push(xA)}return{vmap:l,errors:f,events:m}}(c,d,Ki(e));return st(r),i.forEach(e=>Js.event(Ur({labels:void 0},e))),Js.event({name:"VmapLoadSuccess",data:Ur({},d,{vmap:t}),probability:ws}),t}catch(xA){throw Js.errorToStats(xA),xA}}}const xp={sessionId:"",title:"",timeLeftShow:!1,visitSiteShow:!1,vastTimeout:3e3,videoTimeout:1e4,vpaidTimeout:1e4,wrapperTimeout:3e3,wrapperMaxCount:3,bufferFullTimeout:5e3,bufferEmptyLimit:5},Lp={adTagURI:"",adFoxParameters:void 0},Mp=Hr({adType:$d.preroll},Lp,{},xp),Bp=jr({adType:$d.inpage,replayMode:null,stick:!1,preload:!1},Lp,{},xp),Fp={repeatAfter:Rp,maxRepeatCount:Ip,repeatNumber:0,timeOffset:10},Up=zr({adType:$d.midroll,broadcastReplace:!1},Lp,{},Fp,{},xp),Hp=Wr({adType:$d.overlay},Lp,{},Fp,{},xp),jp=Yr({adType:$d.postroll},Lp,{},xp),zp={inpage:Bp,preroll:Mp,midroll:Up,postroll:jp,overlay:Hp},Wp=F(zp),Yp=async function(e,t,i,r){void 0===t&&(t=!1),void 0===i&&(i=$d.preroll);const{adConfig:n,adBreak:o,warnings:s}=Xr(e,t,i);st(s);const{adFoxParameters:a}=n;if(a){const e=o||Mp,t=new Vp;return t.adBreaks=[e],new bp({adConfig:n,whenVmapLoaded:Promise.resolve(t),adBreak:e,adPlacementOptions:r})}if(o){const e=new Vp;return e.adBreaks=[o],new bp({adConfig:n,whenVmapLoaded:Promise.resolve(e),adBreak:e.adBreaks[0],adPlacementOptions:r})}const d=Vp.load(n,r),l=new bp({adConfig:n,whenVmapLoaded:d,adPlacementOptions:r});return d.then(()=>l)},Gp="_displayController_"+Math.floor(1e3*Math.random()),qp=["INVALID_VAST_XML","NO_AD_SECTION","NO_VAST_AD_TAG_URI","VAST_LOAD_TIMEOUT","WRAPPER_LOAD_TIMEOUT","WRAPPER_MAX_COUNT_LIMIT","INCORRECT_SKIPOFFSET_FORMAT","ADFOX_VAST_LOAD_ERROR","VAST_LOAD_ERROR","VIDEO_TIMEOUT","VPAID_START_TIMEOUT","BUFFER_FULL_TIMEOUT","NO_AD_TO_DISPLAY","ALL_MEDIA_FILES_FILTERED_OUT","VMAP_CONFIG_WITHOUT_PARTNER_ID"];class Xp{get displayController(){return Js.warning({name:"GetDisplayControllerInPublicController",message:"AdSDK Warning: get displayController is deprecated, it will NOT be working in next versions"}),Qr(this)}set displayController(e){Js.warning({name:"SetDisplayControllerInPublicController",message:"AdSDK Warning: set displayController is deprecated, it will NOT be working in next versions"}),Kr(this,e)}constructor(e){this.onClickThrough=void 0,this.onStartError=void 0,this.onPlayStateChanged=void 0,this.onAdSkippableStateChange=void 0,this.onComplete=void 0,this.onFulfilled=void 0,this.onSlotVisible=void 0,this.onBeforeAdStart=void 0,this.onAdStart=void 0,this.onAdEnd=void 0,this.onAdMediaStart=void 0,this.onAdMediaEnd=void 0,this.onAdSkipped=void 0,this.adStarted=!1,this.paused=!0,Kr(this,e),Qr(this).onBeforeAdStart.add(e=>{let{adType:t}=e;if("function"===typeof this.onBeforeAdStart)try{this.onBeforeAdStart(t)}catch(LA){console.error(LA)}}),Qr(this).onAdStart.add(e=>{let{adType:t}=e;if("function"===typeof this.onAdStart)try{this.onAdStart(t)}catch(LA){console.error(LA)}}),Qr(this).onAdMediaStart.add(e=>{let{adType:t}=e;if(this.adStarted=!0,!this.paused&&"function"===typeof this.onPlayStateChanged)try{this.onPlayStateChanged(!0)}catch(LA){console.error(LA)}if("function"===typeof this.onAdMediaStart)try{this.onAdMediaStart(t)}catch(LA){console.error(LA)}}),Qr(this).onAdMediaEnd.add(e=>{let{adType:t}=e;if("function"===typeof this.onComplete)try{this.onComplete()}catch(LA){console.error(LA)}if("function"===typeof this.onAdMediaEnd)try{this.onAdMediaEnd(t)}catch(LA){console.error(LA)}if("function"===typeof this.onPlayStateChanged)try{this.onPlayStateChanged(!1)}catch(LA){console.error(LA)}}),Qr(this).onAdEnd.add(e=>{let{adType:t}=e;if("function"===typeof this.onAdEnd)try{this.onAdEnd(t)}catch(LA){console.error(LA)}}),Qr(this).onClickThrough.add(()=>{if("function"===typeof this.onClickThrough)try{this.onClickThrough()}catch(LA){console.error(LA)}}),Qr(this).onAdSkipped.add(e=>{let{adType:t}=e;if("function"===typeof this.onAdSkipped)try{this.onAdSkipped(t)}catch(LA){console.error(LA)}}),Qr(this).on(["resume","start"],()=>{if(this.paused=!1,this.adStarted&&"function"===typeof this.onPlayStateChanged)try{this.onPlayStateChanged(!0)}catch(LA){console.error(LA)}}).on("pause",()=>{if(this.paused=!0,"function"===typeof this.onPlayStateChanged)try{this.onPlayStateChanged(!1)}catch(LA){console.error(LA)}}),Qr(this).onAdSkippableStateChange.add(e=>{if("function"===typeof this.onAdSkippableStateChange)try{this.onAdSkippableStateChange(e)}catch(LA){console.error(LA)}}),this.addStartErrorHandler()}getCurrentContentType(){const e=Qr(this);if(e)return e.getCurrentContentType()}play(e){void 0===e&&(e=0===Qr(this).getVolume());const t=async()=>{Qr(this).setMuted(Qr(this).autoplayAbility.requireMute||e);try{await Qr(this).play()}catch(xA){Js.errorToStats(new Cs(xA,{code:"PUBLIC_CONTROLLER_PLAY_ERROR"}))}};void 0===Qr(this).getCurrentContentType()?Qr(this).once("playAdMedia",t):t()}resume(){this.play()}pause(){Qr(this).pause()}skip(){Js.event({name:"PublicControllerSkip",probability:ws,data:{}}),Qr(this).skipAllViewers()}clickThrough(){Qr(this).clickThrough()}getPaused(){return Qr(this).getPaused()}getMuted(){return 0===Qr(this).getVolume()}getVolume(){return Qr(this).getVolume()}setVolume(e){Qr(this).setVolume(e)}getDuration(){return Qr(this).getDuration()}getAdWidth(){return Qr(this).getAdWidth()}getAdHeight(){return Qr(this).getAdHeight()}getCurrentTime(){return Qr(this).getCurrentTime()}getAdSkippableState(){return Qr(this).getAdSkippableState()}setStatsRootField(e,t){Js.setRootFields({[e]:t}),Js.event({name:"UsingSetStatsRootFieldInPublicController",probability:ws,data:void 0})}setStatsRootFields(e){Js.setRootFields(e)}destroy(){Qr(this).destroy()}addStartErrorHandler(){Qr(this).on("error",e=>{if(e.code&&qp.indexOf(e.code)>-1&&"function"===typeof this.onStartError)try{this.onStartError(e)}catch(LA){console.error(LA)}})}}const Kp={width:16,height:9},Qp="{REFERER}";var Zp=i(10),Jp=i.n(Zp);const{locals:$p}=Jp.a;class eA{constructor(e,t,i,n,o){if(this.container=void 0,this.buttonsContainer=void 0,this.wrapper=void 0,this.styleEl=void 0,this.unsubscribeButtonsClick=[],this.wrapper=e,this.styleEl=Pe(this.wrapper,Jp.a.toString()),this.container=Ne($p.yaAdSdkEndScreen),t){const{randomBackgrounds:e}=t,i=ee(e);r(this.container,{backgroundImage:"url('"+i+"')"})}this.buttonsContainer=Ne($p.buttonsContainer),n&&this.addButton($p.row__goButton,qc("LEARN_MORE",o),()=>{window.open(n,"_blank")}),this.addButton($p.row__replayButton,qc("REPEAT",o),()=>{C(this.container),i()}),this.container.appendChild(this.buttonsContainer)}show(){this.wrapper&&this.wrapper.appendChild(this.container)}hide(){C(this.container)}destroy(){this.unsubscribeButtonsClick.forEach(e=>e),C(this.container),C(this.styleEl),this.wrapper=void 0}addButton(e,t,i){const r=Ne(e,t);this.unsubscribeButtonsClick.push(a(r,"click",()=>{i()}));const n=Ne($p.buttonsContainer__row);n.appendChild(r),this.buttonsContainer.appendChild(n)}}var tA=i(7),iA=i.n(tA);const rA=((e,t)=>i=>{let r,n;const o=()=>{e(n),n=NaN},s=function(){for(var e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return o(),n=t(e=>{n=NaN,r=i.call(this,e,...s)}),r};return s.cancel=o,s})(Vn,Dn),nA=/^(\d+\.)?\d+m?s$/,oA=/ms$/,sA=/calc\(([^\)]+)\)/,aA=/[-/*()]/;var dA=i(17),lA=i.n(dA);const{locals:cA}=lA.a,{STICKY_ANIMATION_DURATION_STYLE_VALUE:hA}=cA,uA=function e(t){if(sA.test(t)){const[,i]=t.match(sA);if(aA.test(i))throw new TypeError("Can't parse CSS duration string from ["+t+"]");const r=i.split("+").map(e=>e.trim());if(!r.every(e=>nA.test(e)))throw new TypeError("Can't parse CSS duration string from ["+t+"]");return r.reduce((t,i)=>t+e(i),0)}if(!nA.test(t))throw new TypeError("Can't parse CSS duration string from ["+t+"]");const i=parseFloat(t);return oA.test(t)?i:i*La}(hA),pA=18,AA=Ah,fA=fh,mA=e=>{let{adWidth:t,adHeight:i,windowWidth:r,description:n}=e;if(!n)return!1;const o=AA*(t/i);return!!ot(o)&&o/r<.55},{locals:gA}=iA.a;var vA,yA;!function(e){e.Expanded="Expanded",e.Collapsed="Collapsed",e.Expanding="Expanding",e.Collapsing="Collapsing"}(vA||(vA={})),function(e){e.top="top",e.bottom="bottom"}(yA||(yA={}));const wA=i(38),bA=[255,255,255],EA=[40,52,89],_A=[96,109,128,.15],SA={stickTo:$c.auto,stickyColorScheme:eh.dark},TA="10000",CA={covering:{horizontal:0,vertical:0},flyroll:{horizontal:32,vertical:24}};class kA extends co{constructor(e,t,i,r,n,s,d){super(),this.displayController=e,this.placeholder=t,this.stickyWrapper=i,this.wrapper=r,this.video=n,this.onCrossClick=d,this.setDescription=o,this.window=void 0,this.isStickyFlyroll=void 0,this.additionalContentContainer=void 0,this.additionalContent=void 0,this.description="",this.showAdditionalContent=!1,this.stickedTo=void 0,this.cancelExpanding=void 0,this.cancelUpdatingVideoSize=void 0,this.cancelCollapsing=void 0,this.bannerState=vA.Collapsed,this.savedStyle={stickyWrapper:{},wrapper:{}},this.stickyConfig=void 0,this.onWindowResize=rA(()=>{this.updateAdditionalContentVisibility();const{bannerState:e}=this;if(e===vA.Expanding||e===vA.Expanded){const e=this.getActualStickPosition();this.setStickyViewStyles(e)}}),this.handleActionClick=()=>{this.displayController.clickThrough()},this.window=t.ownerDocument.defaultView,this.stickyConfig=Zr({},SA,{},T(s)),this.isStickyFlyroll=this.stickyConfig.stickTo===$c["bottom-right"],this.addDestroyHandler(a(this.window,"resize",this.onWindowResize)),this.stickyWrapper.appendChild(this.renderAdditionalContent()),this.setAdditionalContentVisibility(!1),i.classList.add(gA.yaInPageStickyWrapper),i.style.zIndex=TA,this.isStickyFlyroll?this.stickyWrapper.classList.add(gA.yaInPageStickyWrapper__variant__flyroll):(i.style.boxShadow=this.getExpandedBannerShadowStyle(!1),this.stickyWrapper.classList.add(gA.yaInPageStickyWrapper__variant__covering)),this.saveStyle()}destroy(){this.isDestroyed||(this.stickyWrapper.removeChild(this.additionalContentContainer),this.cancelExpanding&&this.cancelExpanding(),this.cancelCollapsing&&this.cancelCollapsing(),this.cancelUpdatingVideoSize&&this.cancelUpdatingVideoSize(),super.destroy())}async goSticky(){const{bannerState:e}=this;if(!this.canExpand())return Promise.resolve();e===vA.Collapsing&&this.stopCollapsing(),this.bannerState=vA.Expanding,this.stickyWrapper.classList.remove(gA.yaInPageStickyWrapper__inline),this.isStickyFlyroll&&this.stickyWrapper.classList.add(gA.yaInPageStickyWrapper__sticky__flyroll);const t=this.getActualStickPosition();this.updateAdditionalContentVisibility(),this.setAnimationEnabled(!1),this.setDetachedStyles(t),this.setAnimationEnabled(!0),this.setStickyViewStyles(t),this.stickedTo=t;const{promise:i,clear:r}=go(uA);this.cancelExpanding=r,await i,this.cancelExpanding=void 0,this.bannerState=vA.Expanded,this.setAdditionalContentVisibility(!0)}async unSticky(){const{bannerState:e}=this;if(!this.canCollapse())return Promise.resolve();e===vA.Expanding&&this.stopExpanding(),this.bannerState=vA.Collapsing;const t=this.stickedTo||this.getActualStickPosition();this.stickyWrapper.classList.add(gA.yaInPageStickyWrapper__inline),this.isStickyFlyroll&&this.stickyWrapper.classList.remove(gA.yaInPageStickyWrapper__sticky__flyroll),this.setAnimationEnabled(!1),this.setAttachedStyles(t),this.setAnimationEnabled(!0),this.setUnStickyViewStyles(t),this.setAdditionalContentVisibility(!1);const{promise:i,clear:r}=go(uA);this.cancelCollapsing=r,await i,this.cancelCollapsing=void 0,this.stickedTo=void 0,this.bannerState=vA.Collapsed,this.recoverStyle()}stopExpanding(){this.bannerState===vA.Expanding&&(this.cancelExpanding&&(this.cancelExpanding(),this.cancelExpanding=o),this.cancelUpdatingVideoSize&&(this.cancelUpdatingVideoSize(),this.cancelUpdatingVideoSize=o),this.bannerState=vA.Expanded,this.setAdditionalContentVisibility(!0))}stopCollapsing(){this.bannerState===vA.Collapsing&&(this.cancelCollapsing&&this.cancelCollapsing(),this.bannerState=vA.Collapsed,this.recoverStyle())}setDetachedStyles(e){const{stickyWrapper:t}=this,{left:i,top:n,bottom:o,width:s,height:a}=t.getBoundingClientRect(),d=e===yA.bottom?this.getContainerViewDimensions().height-o+"px":null;r(t,{position:"fixed",top:e===yA.top?n+"px":null,bottom:d,left:i+"px",width:s+"px",height:a+"px",background:this.isStickyFlyroll?"":this.getBackgroundColor(!1)}),$r(t)}setStickyViewStyles(e){const t=this.getStickyViewDimensions(),i=this.isStickyFlyroll?CA.flyroll:CA.covering,n=e===yA.top?i.vertical+"px":null,o=e===yA.bottom?i.vertical+"px":null,{showAdditionalContent:s}=this,a=this.getContainerViewDimensions().width-t.width,d=this.isStickyFlyroll?a-i.horizontal:0;r(this.stickyWrapper,{height:t.height+"px",width:this.isStickyFlyroll?t.width+"px":"100%",top:n,bottom:o,left:d+"px",background:this.isStickyFlyroll?"":this.getBackgroundColor(!0)}),r(this.additionalContent,{display:s?"block":"none","font-size":pA+"px"}),this.isStickyFlyroll||r(this.wrapper,{width:t.width+"px"})}setAttachedStyles(e){const{placeholder:t,stickyWrapper:i,wrapper:n}=this,{left:o,top:s,bottom:a}=t.getBoundingClientRect(),{left:d,top:l,bottom:c,width:h,height:u}=i.getBoundingClientRect();r(i,{position:"absolute",top:e===yA.top?l-s+"px":null,bottom:e===yA.bottom?a-c+"px":null,left:d-o+"px",width:h+"px",height:u+"px"});const p=n.getBoundingClientRect().width;r(n,{width:p+"px"})}setUnStickyViewStyles(e){const t=e===yA.top?"0":null,i=e===yA.bottom?"0":null;r(this.stickyWrapper,{top:t,bottom:i,left:"0",width:"100%",height:"100%",background:this.isStickyFlyroll?"":this.getBackgroundColor(!1)}),r(this.wrapper,{width:"100%"})}setAdditionalContentVisibility(e){r(this.additionalContentContainer,{opacity:e?"1":"0",visibility:e?"visible":"hidden"}),this.isStickyFlyroll||(this.stickyWrapper.style.boxShadow=this.getExpandedBannerShadowStyle(e))}saveStyle(){this.savedStyle.stickyWrapper=Jr(this.stickyWrapper),this.savedStyle.wrapper=Jr(this.wrapper)}recoverStyle(){r(this.stickyWrapper,this.savedStyle.stickyWrapper),r(this.wrapper,this.savedStyle.wrapper),this.video.style.width=null}renderAdditionalContent(){const e=document.createElement("div");if(this.additionalContent=e,e.classList.add(gA.yaInpageAdditionalContent),this.isStickyFlyroll){const t=document.createElement("div");t.classList.add(gA.yaInpageAdditionalContent__adTitle),t.innerHTML="\u0440\u0435\u043a\u043b\u0430\u043c\u0430",e.appendChild(t)}else e.classList.add(gA["yaInpageAdditionalContent_"+this.stickyConfig.stickyColorScheme]),e.appendChild(this.renderDescription()),e.appendChild(this.renderActionButton());const t=document.createElement("div");return this.additionalContentContainer=t,t.classList.add(gA.yaInpageAdditionalContentContainer),t.appendChild(this.renderCross()),t.appendChild(e),t}renderDescription(){var e=this;const t=document.createElement("div");return t.classList.add(gA.yaInpageAdditionalContent__description),this.addDestroyHandler(a(t,"click",this.handleActionClick)),this.setDescription=function(i){void 0===i&&(i=""),e.description=i,t.innerText=i,e.updateAdditionalContentVisibility()},t}renderActionButton(){const e=document.createElement("div");e.classList.add(gA.yaInpageAdditionalContent__buttonClickableArea);const t=document.createElement("div");return t.classList.add(gA.yaInpageAdditionalContent__button),t.appendChild(e),t.innerText="\u0423\u0437\u043d\u0430\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435",this.addDestroyHandler(a(t,"click",this.handleActionClick)),t}renderCross(){const e=document.createElement("div");return e.classList.add(gA.yaInpageAdditionalContent__cross),e.innerHTML=wA,this.addDestroyHandler(a(e,"click",this.onCrossClick)),e}updateAdditionalContentVisibility(){this.isStickyFlyroll?this.showAdditionalContent=!0:this.showAdditionalContent=mA({adWidth:this.displayController.getAdWidth(),adHeight:this.displayController.getAdHeight(),windowWidth:this.window.innerWidth,description:this.description})}getActualStickPosition(){const{stickTo:e}=this.stickyConfig;if(e===$c.top)return yA.top;if(e===$c.bottom||this.isStickyFlyroll)return yA.bottom;const{top:t}=this.stickyWrapper.getBoundingClientRect();return t<=0?yA.top:yA.bottom}getBackgroundColor(e){const{stickyColorScheme:t}=this.stickyConfig,i=t===eh.light?bA:EA,[r,n,o]=i;return"rgba("+r+", "+n+", "+o+", "+(e?"1":"0")+")"}getExpandedBannerShadowStyle(e){const[t,i,r,n]=_A;return"0 0 20px 20px rgba("+t+","+i+","+r+","+(e?n:0)+")"}canExpand(){const{bannerState:e}=this;return e!==vA.Expanding&&e!==vA.Expanded}canCollapse(){const{bannerState:e}=this;return e!==vA.Collapsing&&e!==vA.Collapsed}getContainerViewDimensions(){const{offsetHeight:e,offsetWidth:t}=this.stickyWrapper.ownerDocument.documentElement;return{height:e,width:t}}getStickyViewDimensions(){const e=this.getContainerViewDimensions().width;return this.isStickyFlyroll&&e>=1600?{width:360,height:202}:{width:fA,height:AA}}setAnimationEnabled(e){e?this.stickyWrapper.classList.remove(gA.yaInPageStickyWrapper__unAnimated):this.stickyWrapper.classList.add(gA.yaInPageStickyWrapper__unAnimated),$r(this.stickyWrapper)}}const PA=e=>{let{win:t,inPageConfig:i,adBreak:r}=e;return!function(e){return void 0===e&&(e=window),/Mobi|Android/i.test(e.navigator.userAgent)}(t)&&("boolean"===typeof i.stick?i.stick:r.stick)};class OA extends co{constructor(e){let{container:t,childElement:i,isOpened:r=!1,openingDuration:n=0,shouldStretch:o=!1}=e;super(),this.container=void 0,this.childElement=void 0,this.isOpened=void 0,this.openingDuration=void 0,this.shouldStretch=void 0,this.container=t,this.childElement=i,this.isOpened=r,this.openingDuration=n,this.shouldStretch=o,r?this.setContainerHeight(this.shouldStretch?"parent":"content"):this.setContainerHeight("none"),this.setOverflowVisible(!1),t.style.position=r?"relative":"absolute",t.style.padding="0",this.changeAnimation(!0),t.appendChild(i)}open(){return this.setOpen(!0)}close(){return this.setOpen(!1)}async setOpen(e){if(this.isOpened===e)return void this.setOverflowVisible(!0);this.isOpened=e,this.setOverflowVisible(!1);const{style:t}=this.container;e&&(t.position="relative"),this.setContainerHeight("child"),await this.waitForAnimationEnd(),this.changeAnimation(!e),this.setContainerHeight(e?"content":"none"),await this.waitForAnimationEnd(),t.visibility=e?"visible":"hidden",this.setOverflowVisible(!0),e||(t.position="absolute")}setOverflowVisible(e){this.container.style.overflow=e?"visible":"hidden"}setContainerHeight(e){"none"===e?this.container.style.height="0px":"child"===e?this.container.style.height=this.childElement.offsetHeight+"px":"content"===e?this.container.style.height="auto":"parent"===e&&(this.container.style.height="100%")}changeAnimation(e){const t=e&&this.openingDuration>0?"height "+this.openingDuration+"s ease-out":"none";this.container.style.transition=t,this.container.style.webkitTransition=t,this.container.offsetTop}waitForAnimationEnd(){const e=1e3*this.openingDuration,{promise:t,clear:i}=go(e);return this.addDestroyHandler(i),t}}const IA=40,{locals:RA}=iA.a,NA=.3,DA=e=>V(e,{tags:"inpage"});class VA extends co{constructor(e,t,i){super(),this.adConfig=t,this.callback=i,this.shadowRootContainerElement=void 0,this.containerElement=void 0,this.placeholderElement=void 0,this.isPlaceholderSizeFixed=void 0,this.wrapperElement=void 0,this.stickyWrapperElement=void 0,this.videoNode=void 0,this.placeholderVisibilitySensor=void 0,this.placeholderSizeSensor=void 0,this.openingLayer=void 0,this.displayController=void 0,this.mediaAds=void 0,this.adLoader=void 0,this.endScreen=void 0,this.replayMode=null,this.stickyInPageHelper=void 0,this.publicController=void 0,this.pausedByClickThrough=!1,this.pausedByContainerVisibility=!1,this.pausedByDocumentVisibility=!1,this.destroy=e=>{this.endScreen&&this.endScreen.destroy(),this.placeholderVisibilitySensor.destroy(void 0),this.placeholderSizeSensor.destroy(),C(this.containerElement),e&&(We(e),this.callback(e)),super.destroy(e)},this.showEndScreen=()=>{if(!this.endScreen){const[{vastAd:{endScreenParams:e,clickThrough:t}}]=this.mediaAds.mediaAds;this.endScreen=new eA(this.wrapperElement,e,this.showAds,1===this.mediaAds.mediaAds.length?t:void 0,this.adConfig.lang)}this.endScreen.show()},this.makeStickAction=async e=>{try{this.displayController.disableResizeHandling(),await e(),this.displayController.enableResizeHandling()}catch(xA){Js.errorToStats(new Cs(xA,{code:"InPageOnStickError"}))}},this.showAds=async()=>{try{if(await this.displayController.showAd(this.mediaAds),this.replayMode===Np.auto)return;this.replayMode===Np.manual?this.showEndScreen():(this.stickyInPageHelper&&await this.turnOffStickyMode(),await this.openingLayer.close(),this.destroy(void 0))}catch(xA){this.destroy(xA)}},this.onceWhenCanShowInpage=()=>{if("function"===typeof this.publicController.onSlotVisible)try{this.publicController.onSlotVisible()}catch(LA){console.error(LA)}},this.handleStickyInpageCrossClick=()=>{this.stickyInPageHelper&&(this.turnOffStickyMode(),this.placeholderVisibilitySensor.getVisibility()||this.displayController.getPaused()||(this.pausedByContainerVisibility=!0,this.displayController.pause()))};const n=function(e){if(e){const t=e.adFoxUrl;return t&&"string"!==typeof t?new Error('Invalid format of "adConfig.adFoxUrl" parameter.'):null}return new Error('Parameter "adConfig" is required.')}(t);if(n)throw n;const{insertPosition:o,insertAfter:s}=t,a=dn(o,s,e);if(!a)throw super.destroy(void 0),new Cs({code:"CANNOT_FIND_INPAGE_CONTAINER_ELEMENT",details:{containerElementOrId:String(e),adConfig:t}});{const e=br(a);this.shadowRootContainerElement=e||a,this.containerElement=a,e&&t.visibleAfterInit&&r(e,{height:"100%"})}const d=this.containerElement.getBoundingClientRect();if(0===d.width)throw super.destroy(void 0),new Cs({code:"INPAGE_CONTAINER_ZERO_WIDTH",details:{containerElementOrId:String(e),adConfig:t}});this.isPlaceholderSizeFixed=d.height>0,Js.event({name:"AddInPageVideo",probability:ws,data:{adConfig:t,containerElementOrId:String(e),containerRect:d}}),r(this.containerElement,{position:"relative"});const l=Ne();var c;l.className=RA.yaInPageOpeningDiv,this.shadowRootContainerElement.appendChild(l),this.placeholderElement=Ne(),this.placeholderElement.className=RA.yaInPagePlaceholderElement,this.stickyWrapperElement=document.createElement("div"),r(this.stickyWrapperElement,{width:"100%",height:"100%"}),this.placeholderElement.appendChild(this.stickyWrapperElement),this.wrapperElement=Ne(),r(this.stickyWrapperElement,{height:"100%"}),this.wrapperElement.id="wrapper"+this.shadowRootContainerElement.id,this.wrapperElement.classList.add(RA.yaInPageWrapper),this.stickyWrapperElement.appendChild(this.wrapperElement),this.openingLayer=new OA({container:l,childElement:this.placeholderElement,isOpened:t.visibleAfterInit,openingDuration:t.slide?NA:0,shouldStretch:t.visibleAfterInit}),this.addDestroyHandler(()=>this.openingLayer.destroy()),an(t),this.videoNode=Ie(this.wrapperElement),this.videoNode.classList.add(RA.yaInPageVideo),this.videoNode.volume=0,this.videoNode.muted=!0,this.videoNode.setAttribute("width","100%"),this.videoNode.setAttribute("height","100%"),r(this.videoNode,{display:"block",margin:"0",padding:"0"}),r(this.wrapperElement,{fontSize:"0"}),this.mountStyles(),(c=this.videoNode).setAttribute("playsinline","playsinline"),c.setAttribute("webkit-playsinline","webkit-playsinline"),t.autoplay=!1,this.adjustAdHeight(),this.displayController=new mp(t,this.videoNode,this.wrapperElement),this.displayController.onDestroy.add(this.destroy),this.publicController=new Xp(this.displayController),i(this.publicController),this.placeholderVisibilitySensor=new Po(this.placeholderElement),this.placeholderSizeSensor=new mo(this.placeholderElement),this.processInPage().catch(this.destroy)}async processInPage(){const e=await this.loadVmap();if(this.replayMode="replayMode"in this.adConfig?this.adConfig.replayMode:e.replayMode,PA({win:window,inPageConfig:this.adConfig,adBreak:e})){const t=sn({stickTo:e.stickTo,stickyColorScheme:e.stickyColorScheme},T(Gi(this.adConfig))),i=new kA(this.displayController,this.placeholderElement,this.stickyWrapperElement,this.wrapperElement,this.videoNode,t,this.handleStickyInpageCrossClick);this.addDestroyHandler(()=>{i.destroy()}),this.stickyInPageHelper=i}("boolean"===typeof this.adConfig.preload?this.adConfig.preload:Boolean(e.preload))?(await this.loadAd(e),this.mediaAds.preload({videoSlot:this.videoNode,desiredBitrate:this.adConfig.desiredBitrate}),await this.waitForShowing()):(await this.waitForShowing(),await this.loadAd(e)),this.subscribeDisplayControllerEvents();let t=this.showAds();this.replayMode===Np.auto&&this.displayController.onAllAdPodComplete.add(async()=>{await t,this.isDestroyed||(t=this.showAds())})}subscribeDisplayControllerEvents(){const{stickyInPageHelper:e}=this;this.displayController.onDetectAutoplayAbility.addOne(t=>{let{requireUserGesture:i}=t;const r=this.displayController.slotVisibilitySensor,o=this.displayController.gui.controls.play;this.displayController.once("start",async()=>{this.adjustAdHeight(),await this.openingLayer.open(),r.getVisibility()||(e?e.goSticky():(this.pausedByContainerVisibility=!0,this.displayController.pause())),e?(this.placeholderVisibilitySensor.addDestroyHandler(d(this.containerElement.ownerDocument,e=>{this.displayController.getPaused()||e?!this.pausedByClickThrough&&e&&this.pausedByDocumentVisibility&&(this.displayController.resume(),this.pausedByDocumentVisibility=!1):(this.displayController.pause(),this.pausedByDocumentVisibility=!0)})),this.placeholderVisibilitySensor.onChangeVisibility(t=>{if(t){this.pausedByContainerVisibility&&(this.displayController.play().catch(e=>{Js.errorToStats(new Cs(e,{code:"InPageOnVisibilityPlayError"}))}),this.pausedByContainerVisibility=!1),o&&this.pausedByClickThrough&&o.removeHideReason(Kl.INPAGE_OUT_OF_SIGHT).show(),this.stickyInPageHelper?this.makeStickAction(async()=>{await e.unSticky(),this.displayController.setGuiVisibilityPublic(!0)}):this.pausedByContainerVisibility&&this.displayController.getPaused()&&(this.pausedByContainerVisibility=!1,this.displayController.resume())}else n(document)&&(this.stickyInPageHelper?this.makeStickAction(async()=>{this.displayController.setGuiVisibilityPublic(!1),await e.goSticky()}):this.pausedByContainerVisibility||this.displayController.getPaused()||(this.pausedByContainerVisibility=!0,this.displayController.pause()))})):this.placeholderVisibilitySensor.onChangeVisibility(e=>{e?(!this.pausedByClickThrough&&this.pausedByContainerVisibility&&(this.displayController.play().catch(e=>{Js.errorToStats(new Cs(e,{code:"InPageOnVisibilityPlayError"}))}),this.pausedByContainerVisibility=!1),o&&this.pausedByClickThrough&&o.removeHideReason(Kl.INPAGE_OUT_OF_SIGHT).show()):this.pausedByContainerVisibility||this.displayController.getPaused()||(this.displayController.pause(),o&&o.hide(),this.pausedByContainerVisibility=!0)})}),this.displayController.on(["start","resume"],()=>{this.pausedByClickThrough=!1,o&&o.addHideReason(Kl.INPAGE_OUT_OF_SIGHT)}),this.displayController.on("stop",()=>{this.displayController.destroy()}),this.displayController.onAdMediaStart.add(t=>{let{viewer:i}=t;e&&e.setDescription(i.mediaAd.playbackParams.description)}),e&&!this.replayMode&&this.displayController.onAdEnd.add(()=>{e.unSticky()}),this.displayController.onClickThrough.add(e=>{let{adWasPaused:t}=e;t&&(this.pausedByClickThrough=!0,o&&r.getVisibility()&&o.removeHideReason(Kl.INPAGE_OUT_OF_SIGHT).show())}),this.displayController.onReady.add(()=>{i?(this.displayController.setMuted(!1),this.openingLayer.open()):this.displayController.play().catch(e=>{Js.errorToStats(new Cs(e,{code:"InPageOnReadyPlayError"}))})})})}async loadVmap(){const e=Boolean(this.adConfig.partnerId&&void 0!==this.adConfig.category);this.adLoader=await Yp(this.adConfig,!e,$d.inpage,this.displayController.getAdPlacementOptions());const t=this.adLoader.getInPageBlock();if(t)return t;throw new Cs({code:"NO_INPAGE_AD_BREAK_IN_VMAP",details:{config:this.adConfig}})}async waitForShowing(){this.placeholderSizeSensor.onResize.add(()=>this.adjustAdHeight());const e=function(e,t){const i={promise:Promise.resolve(void 0),unsubscribe:()=>void 0};if(on(e,t))return i;if(nn(e)&&en(e))return i;{let i;const r=setInterval(()=>{i&&(on(e,t)||nn(e)&&en(e))&&(i(),clearInterval(r))},po);return{promise:new Promise(e=>{i=e}),unsubscribe:()=>clearInterval(r)}}}(this.placeholderElement,Co);this.addDestroyHandler(e.unsubscribe),await e.promise,this.onceWhenCanShowInpage()}async loadAd(e){this.mediaAds=await this.adLoader.load(e),this.mediaAds.mediaAds.length>1&&Js.event({name:"InPageHasMultipleMediaAds",probability:ws,data:{mediaAdsCount:this.mediaAds.mediaAds.length}})}mountStyles(){const e=Pe(this.shadowRootContainerElement,iA.a.toString());this.addDestroyHandler(()=>{C(e)})}adjustAdHeight(){let e=Kp.width,t=Kp.height;if(this.displayController){const i=this.displayController.getAdWidth(),r=this.displayController.getAdHeight();i>=fh&&r>0&&(e=i,t=r)}const i=t/e,n=Math.floor(this.placeholderElement.clientWidth*i);if(!this.adConfig.visibleAfterInit)return void r(this.placeholderElement,{height:n+"px"});const o=this.containerElement.clientHeight<=n;this.isPlaceholderSizeFixed&&o?r(this.placeholderElement,{height:this.containerElement.clientHeight+"px"}):r(this.placeholderElement,{minHeight:n+"px"})}async turnOffStickyMode(){this.stickyInPageHelper&&(await this.stickyInPageHelper.unSticky(),this.stickyInPageHelper=void 0)}}!function(e,t){ke({videoAd:{modules:{[Ls]:{[e]:t}}}},"ya")}(cn.InPage,{addInPageVideo:(e,t,i)=>{const r="function"===typeof i?Se(i,"INPAGE_CALLBACK_ERROR"):o;try{new VA(e,t,r)}catch(xA){r(xA),We(xA)}}})}]);